/Library/Developer/CommandLineTools/usr/bin/python3: can't open file '/Users/zeev/Desktop/code/yad-2-to-telegram/src/main.py': [Errno 1] Operation not permitted
/Library/Developer/CommandLineTools/usr/bin/python3: can't open file '/Users/zeev/Desktop/code/yad-2-to-telegram/src/main.py': [Errno 1] Operation not permitted
/Library/Developer/CommandLineTools/usr/bin/python3: can't open file '/Users/zeev/Desktop/code/yad-2-to-telegram/src/main.py': [Errno 1] Operation not permitted
/Library/Developer/CommandLineTools/usr/bin/python3: can't open file '/Users/zeev/Desktop/code/yad-2-to-telegram/src/main.py': [Errno 1] Operation not permitted
/Users/zeev/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
2025-05-08 19:51:01,461 - __main__ - INFO - Starting Yad2 Apartment Notifier script.
sys.path: ['/Users/zeev/Desktop/code/yad-2-to-telegram', '/Users/zeev/Desktop/code/yad-2-to-telegram/src', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python39.zip', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/lib-dynload', '/Users/zeev/Library/Python/3.9/lib/python/site-packages', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/site-packages']
2025-05-08 19:51:01,461 - asyncio - DEBUG - Using selector: KqueueSelector
2025-05-08 19:51:01,461 - __main__ - INFO - Starting apartment check run...
2025-05-08 19:51:01,461 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:51:01,462 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:51:01,664 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Initiated*', 'parse_mode': 'Markdown'}`
2025-05-08 19:51:01,672 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:51:01,787 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x102c16430>
2025-05-08 19:51:01,804 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x102bceba0> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:51:01,962 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x102c0b220>
2025-05-08 19:51:01,963 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:51:01,964 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:51:01,964 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:51:01,964 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:51:01,964 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:51:02,063 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 08 May 2025 16:51:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'465'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-08 19:51:02,064 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-08 19:51:02,064 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-08 19:51:02,064 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-08 19:51:02,064 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:51:02,064 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:51:02,065 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2775, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746723062, 'text': 'Search Initiated', 'entities': [{'offset': 0, 'length': 16, 'type': 'bold'}]}`
2025-05-08 19:51:02,065 - src.notifier - INFO - Successfully sent message: *Search Initiated*
2025-05-08 19:51:02,067 - src.state - INFO - Loaded 471 sent listing states (ID -> timestamp) from /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 19:51:02,067 - __main__ - INFO - Fetching data for bbox 1/12: 32.075192,34.763754,32.086468,34.779760...
2025-05-08 19:51:02,068 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15
2025-05-08 19:51:02,068 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075192,34.763754,32.086468,34.779760', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:02,084 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): gw.yad2.co.il:443
2025-05-08 19:51:02,712 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:02,783 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15.
2025-05-08 19:51:02,783 - src.listing_parser - INFO - Found 132 apartment items in the list. Attempting to parse...
2025-05-08 19:51:02,786 - src.listing_parser - INFO - Successfully parsed 132/132 listings.
2025-05-08 19:51:02,786 - __main__ - INFO - Parsed 132 listings for bbox: 32.075192,34.763754,32.086468,34.779760.
2025-05-08 19:51:02,786 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:06,804 - __main__ - INFO - Fetching data for bbox 2/12: 32.075076,34.771885,32.086353,34.787891...
2025-05-08 19:51:06,805 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15
2025-05-08 19:51:06,805 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075076,34.771885,32.086353,34.787891', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:07,219 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:07,308 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15.
2025-05-08 19:51:07,308 - src.listing_parser - INFO - Found 146 apartment items in the list. Attempting to parse...
2025-05-08 19:51:07,312 - src.listing_parser - INFO - Successfully parsed 146/146 listings.
2025-05-08 19:51:07,312 - __main__ - INFO - Parsed 146 listings for bbox: 32.075076,34.771885,32.086353,34.787891.
2025-05-08 19:51:07,312 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:11,313 - __main__ - INFO - Fetching data for bbox 3/12: 32.076017,34.781501,32.084821,34.793997...
2025-05-08 19:51:11,314 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15
2025-05-08 19:51:11,314 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.076017,34.781501,32.084821,34.793997', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:11,775 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:11,858 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15.
2025-05-08 19:51:11,859 - src.listing_parser - INFO - Found 141 apartment items in the list. Attempting to parse...
2025-05-08 19:51:11,862 - src.listing_parser - INFO - Successfully parsed 141/141 listings.
2025-05-08 19:51:11,862 - __main__ - INFO - Parsed 141 listings for bbox: 32.076017,34.781501,32.084821,34.793997.
2025-05-08 19:51:11,862 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:15,864 - __main__ - INFO - Fetching data for bbox 4/12: 32.080523,34.782766,32.088978,34.794767...
2025-05-08 19:51:15,865 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15
2025-05-08 19:51:15,865 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.080523,34.782766,32.088978,34.794767', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:16,330 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:16,409 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15.
2025-05-08 19:51:16,409 - src.listing_parser - INFO - Found 145 apartment items in the list. Attempting to parse...
2025-05-08 19:51:16,412 - src.listing_parser - INFO - Successfully parsed 145/145 listings.
2025-05-08 19:51:16,412 - __main__ - INFO - Parsed 145 listings for bbox: 32.080523,34.782766,32.088978,34.794767.
2025-05-08 19:51:16,412 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:20,414 - __main__ - INFO - Fetching data for bbox 5/12: 32.068977,34.760081,32.081317,34.777596...
2025-05-08 19:51:20,415 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15
2025-05-08 19:51:20,415 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.068977,34.760081,32.081317,34.777596', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:20,855 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:20,910 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15.
2025-05-08 19:51:20,910 - src.listing_parser - INFO - Found 124 apartment items in the list. Attempting to parse...
2025-05-08 19:51:20,914 - src.listing_parser - INFO - Successfully parsed 124/124 listings.
2025-05-08 19:51:20,914 - __main__ - INFO - Parsed 124 listings for bbox: 32.068977,34.760081,32.081317,34.777596.
2025-05-08 19:51:20,914 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:24,915 - __main__ - INFO - Fetching data for bbox 6/12: 32.067273,34.764900,32.079614,34.782414...
2025-05-08 19:51:24,916 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15
2025-05-08 19:51:24,916 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.067273,34.764900,32.079614,34.782414', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:25,355 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:25,412 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15.
2025-05-08 19:51:25,413 - src.listing_parser - INFO - Found 126 apartment items in the list. Attempting to parse...
2025-05-08 19:51:25,416 - src.listing_parser - INFO - Successfully parsed 126/126 listings.
2025-05-08 19:51:25,416 - __main__ - INFO - Parsed 126 listings for bbox: 32.067273,34.764900,32.079614,34.782414.
2025-05-08 19:51:25,416 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:29,417 - __main__ - INFO - Fetching data for bbox 7/12: 32.065226,34.770869,32.077566,34.788383...
2025-05-08 19:51:29,418 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15
2025-05-08 19:51:29,418 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.065226,34.770869,32.077566,34.788383', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:29,812 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:29,881 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15.
2025-05-08 19:51:29,881 - src.listing_parser - INFO - Found 121 apartment items in the list. Attempting to parse...
2025-05-08 19:51:29,884 - src.listing_parser - INFO - Successfully parsed 121/121 listings.
2025-05-08 19:51:29,884 - __main__ - INFO - Parsed 121 listings for bbox: 32.065226,34.770869,32.077566,34.788383.
2025-05-08 19:51:29,884 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:33,886 - __main__ - INFO - Fetching data for bbox 8/12: 32.064591,34.775937,32.076932,34.793451...
2025-05-08 19:51:33,886 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15
2025-05-08 19:51:33,886 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.064591,34.775937,32.076932,34.793451', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:34,458 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:34,528 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15.
2025-05-08 19:51:34,528 - src.listing_parser - INFO - Found 131 apartment items in the list. Attempting to parse...
2025-05-08 19:51:34,531 - src.listing_parser - INFO - Successfully parsed 131/131 listings.
2025-05-08 19:51:34,531 - __main__ - INFO - Parsed 131 listings for bbox: 32.064591,34.775937,32.076932,34.793451.
2025-05-08 19:51:34,531 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:38,532 - __main__ - INFO - Fetching data for bbox 9/12: 32.060576,34.760166,32.071472,34.775629...
2025-05-08 19:51:38,532 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15
2025-05-08 19:51:38,532 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.060576,34.760166,32.071472,34.775629', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:38,963 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:39,060 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15.
2025-05-08 19:51:39,061 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-08 19:51:39,062 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-08 19:51:39,062 - __main__ - INFO - Parsed 130 listings for bbox: 32.060576,34.760166,32.071472,34.775629.
2025-05-08 19:51:39,062 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:43,064 - __main__ - INFO - Fetching data for bbox 10/12: 32.057632,34.767177,32.068528,34.782639...
2025-05-08 19:51:43,065 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15
2025-05-08 19:51:43,065 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.057632,34.767177,32.068528,34.782639', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:43,468 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:43,552 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15.
2025-05-08 19:51:43,552 - src.listing_parser - INFO - Found 155 apartment items in the list. Attempting to parse...
2025-05-08 19:51:43,556 - src.listing_parser - INFO - Successfully parsed 155/155 listings.
2025-05-08 19:51:43,556 - __main__ - INFO - Parsed 155 listings for bbox: 32.057632,34.767177,32.068528,34.782639.
2025-05-08 19:51:43,556 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:47,557 - __main__ - INFO - Fetching data for bbox 11/12: 32.052334,34.760749,32.063151,34.776098...
2025-05-08 19:51:47,558 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15
2025-05-08 19:51:47,558 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.052334,34.760749,32.063151,34.776098', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:47,975 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:48,047 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15.
2025-05-08 19:51:48,048 - src.listing_parser - INFO - Found 176 apartment items in the list. Attempting to parse...
2025-05-08 19:51:48,051 - src.listing_parser - INFO - Successfully parsed 176/176 listings.
2025-05-08 19:51:48,051 - __main__ - INFO - Parsed 176 listings for bbox: 32.052334,34.760749,32.063151,34.776098.
2025-05-08 19:51:48,051 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:52,053 - __main__ - INFO - Fetching data for bbox 12/12: 32.066111,34.765788,32.070878,34.786357...
2025-05-08 19:51:52,054 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15
2025-05-08 19:51:52,054 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.066111,34.765788,32.070878,34.786357', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:52,390 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:52,465 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15.
2025-05-08 19:51:52,465 - src.listing_parser - INFO - Found 123 apartment items in the list. Attempting to parse...
2025-05-08 19:51:52,468 - src.listing_parser - INFO - Successfully parsed 123/123 listings.
2025-05-08 19:51:52,468 - __main__ - INFO - Parsed 123 listings for bbox: 32.066111,34.765788,32.070878,34.786357.
2025-05-08 19:51:52,468 - __main__ - INFO - Finished fetching. Total listings fetched across all bboxes (before deduplication): 1650
2025-05-08 19:51:52,469 - __main__ - INFO - Total unique apartments found after aggregation and deduplication: 361
Traceback (most recent call last):
  File "/Users/zeev/Desktop/code/yad-2-to-telegram/src/main.py", line 296, in <module>
    asyncio.run(run_check(is_test_mode=args.test))
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/Users/zeev/Desktop/code/yad-2-to-telegram/src/main.py", line 184, in run_check
    new_apartments: List[ApartmentDTO] = state.filter_new_listings(unique_listings, sent_state) # Pass state dict
AttributeError: module 'src.state' has no attribute 'filter_new_listings'
/Users/zeev/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
2025-05-08 19:54:01,051 - __main__ - INFO - Starting Yad2 Apartment Notifier script.
sys.path: ['/Users/zeev/Desktop/code/yad-2-to-telegram', '/Users/zeev/Desktop/code/yad-2-to-telegram/src', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python39.zip', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/lib-dynload', '/Users/zeev/Library/Python/3.9/lib/python/site-packages', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/site-packages']
2025-05-08 19:54:01,051 - asyncio - DEBUG - Using selector: KqueueSelector
2025-05-08 19:54:01,051 - __main__ - INFO - Starting apartment check run...
2025-05-08 19:54:01,052 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:54:01,052 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:54:01,114 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Initiated*', 'parse_mode': 'Markdown'}`
2025-05-08 19:54:01,119 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:54:01,217 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10cf38430>
2025-05-08 19:54:01,217 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10ceeea50> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:54:01,373 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10cf2d220>
2025-05-08 19:54:01,374 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:54:01,374 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:54:01,374 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:54:01,374 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:54:01,374 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:54:01,469 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 08 May 2025 16:54:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'465'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-08 19:54:01,470 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-08 19:54:01,470 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-08 19:54:01,470 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-08 19:54:01,470 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:54:01,470 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:54:01,470 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2776, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746723241, 'text': 'Search Initiated', 'entities': [{'offset': 0, 'length': 16, 'type': 'bold'}]}`
2025-05-08 19:54:01,471 - src.notifier - INFO - Successfully sent message: *Search Initiated*
2025-05-08 19:54:01,472 - src.state - INFO - Loaded 471 sent listing states (ID -> timestamp) from /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 19:54:01,472 - __main__ - INFO - Fetching data for bbox 1/12: 32.075192,34.763754,32.086468,34.779760...
2025-05-08 19:54:01,472 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15
2025-05-08 19:54:01,473 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075192,34.763754,32.086468,34.779760', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:01,485 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): gw.yad2.co.il:443
2025-05-08 19:54:02,120 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:02,188 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15.
2025-05-08 19:54:02,189 - src.listing_parser - INFO - Found 132 apartment items in the list. Attempting to parse...
2025-05-08 19:54:02,190 - src.listing_parser - INFO - Successfully parsed 132/132 listings.
2025-05-08 19:54:02,190 - __main__ - INFO - Parsed 132 listings for bbox: 32.075192,34.763754,32.086468,34.779760.
2025-05-08 19:54:02,190 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:06,192 - __main__ - INFO - Fetching data for bbox 2/12: 32.075076,34.771885,32.086353,34.787891...
2025-05-08 19:54:06,193 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15
2025-05-08 19:54:06,193 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075076,34.771885,32.086353,34.787891', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:06,627 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:06,696 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15.
2025-05-08 19:54:06,697 - src.listing_parser - INFO - Found 146 apartment items in the list. Attempting to parse...
2025-05-08 19:54:06,699 - src.listing_parser - INFO - Successfully parsed 146/146 listings.
2025-05-08 19:54:06,699 - __main__ - INFO - Parsed 146 listings for bbox: 32.075076,34.771885,32.086353,34.787891.
2025-05-08 19:54:06,700 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:10,701 - __main__ - INFO - Fetching data for bbox 3/12: 32.076017,34.781501,32.084821,34.793997...
2025-05-08 19:54:10,702 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15
2025-05-08 19:54:10,702 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.076017,34.781501,32.084821,34.793997', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:11,074 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:11,147 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15.
2025-05-08 19:54:11,147 - src.listing_parser - INFO - Found 141 apartment items in the list. Attempting to parse...
2025-05-08 19:54:11,150 - src.listing_parser - INFO - Successfully parsed 141/141 listings.
2025-05-08 19:54:11,150 - __main__ - INFO - Parsed 141 listings for bbox: 32.076017,34.781501,32.084821,34.793997.
2025-05-08 19:54:11,150 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:15,152 - __main__ - INFO - Fetching data for bbox 4/12: 32.080523,34.782766,32.088978,34.794767...
2025-05-08 19:54:15,153 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15
2025-05-08 19:54:15,153 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.080523,34.782766,32.088978,34.794767', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:15,637 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:15,708 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15.
2025-05-08 19:54:15,709 - src.listing_parser - INFO - Found 145 apartment items in the list. Attempting to parse...
2025-05-08 19:54:15,712 - src.listing_parser - INFO - Successfully parsed 145/145 listings.
2025-05-08 19:54:15,712 - __main__ - INFO - Parsed 145 listings for bbox: 32.080523,34.782766,32.088978,34.794767.
2025-05-08 19:54:15,712 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:19,713 - __main__ - INFO - Fetching data for bbox 5/12: 32.068977,34.760081,32.081317,34.777596...
2025-05-08 19:54:19,714 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15
2025-05-08 19:54:19,714 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.068977,34.760081,32.081317,34.777596', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:20,143 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:20,214 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15.
2025-05-08 19:54:20,214 - src.listing_parser - INFO - Found 124 apartment items in the list. Attempting to parse...
2025-05-08 19:54:20,217 - src.listing_parser - INFO - Successfully parsed 124/124 listings.
2025-05-08 19:54:20,217 - __main__ - INFO - Parsed 124 listings for bbox: 32.068977,34.760081,32.081317,34.777596.
2025-05-08 19:54:20,217 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:24,218 - __main__ - INFO - Fetching data for bbox 6/12: 32.067273,34.764900,32.079614,34.782414...
2025-05-08 19:54:24,219 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15
2025-05-08 19:54:24,220 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.067273,34.764900,32.079614,34.782414', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:24,649 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:24,717 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15.
2025-05-08 19:54:24,718 - src.listing_parser - INFO - Found 126 apartment items in the list. Attempting to parse...
2025-05-08 19:54:24,720 - src.listing_parser - INFO - Successfully parsed 126/126 listings.
2025-05-08 19:54:24,720 - __main__ - INFO - Parsed 126 listings for bbox: 32.067273,34.764900,32.079614,34.782414.
2025-05-08 19:54:24,720 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:28,722 - __main__ - INFO - Fetching data for bbox 7/12: 32.065226,34.770869,32.077566,34.788383...
2025-05-08 19:54:28,723 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15
2025-05-08 19:54:28,723 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.065226,34.770869,32.077566,34.788383', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:29,063 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:29,132 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15.
2025-05-08 19:54:29,133 - src.listing_parser - INFO - Found 121 apartment items in the list. Attempting to parse...
2025-05-08 19:54:29,135 - src.listing_parser - INFO - Successfully parsed 121/121 listings.
2025-05-08 19:54:29,135 - __main__ - INFO - Parsed 121 listings for bbox: 32.065226,34.770869,32.077566,34.788383.
2025-05-08 19:54:29,135 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:33,136 - __main__ - INFO - Fetching data for bbox 8/12: 32.064591,34.775937,32.076932,34.793451...
2025-05-08 19:54:33,136 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15
2025-05-08 19:54:33,136 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.064591,34.775937,32.076932,34.793451', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:33,557 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:33,624 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15.
2025-05-08 19:54:33,625 - src.listing_parser - INFO - Found 131 apartment items in the list. Attempting to parse...
2025-05-08 19:54:33,626 - src.listing_parser - INFO - Successfully parsed 131/131 listings.
2025-05-08 19:54:33,626 - __main__ - INFO - Parsed 131 listings for bbox: 32.064591,34.775937,32.076932,34.793451.
2025-05-08 19:54:33,626 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:37,628 - __main__ - INFO - Fetching data for bbox 9/12: 32.060576,34.760166,32.071472,34.775629...
2025-05-08 19:54:37,628 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15
2025-05-08 19:54:37,628 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.060576,34.760166,32.071472,34.775629', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:38,063 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:38,142 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15.
2025-05-08 19:54:38,143 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-08 19:54:38,145 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-08 19:54:38,145 - __main__ - INFO - Parsed 130 listings for bbox: 32.060576,34.760166,32.071472,34.775629.
2025-05-08 19:54:38,145 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:42,146 - __main__ - INFO - Fetching data for bbox 10/12: 32.057632,34.767177,32.068528,34.782639...
2025-05-08 19:54:42,147 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15
2025-05-08 19:54:42,147 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.057632,34.767177,32.068528,34.782639', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:42,671 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:42,743 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15.
2025-05-08 19:54:42,744 - src.listing_parser - INFO - Found 155 apartment items in the list. Attempting to parse...
2025-05-08 19:54:42,746 - src.listing_parser - INFO - Successfully parsed 155/155 listings.
2025-05-08 19:54:42,747 - __main__ - INFO - Parsed 155 listings for bbox: 32.057632,34.767177,32.068528,34.782639.
2025-05-08 19:54:42,747 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:46,747 - __main__ - INFO - Fetching data for bbox 11/12: 32.052334,34.760749,32.063151,34.776098...
2025-05-08 19:54:46,748 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15
2025-05-08 19:54:46,748 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.052334,34.760749,32.063151,34.776098', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:47,245 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:47,251 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15.
2025-05-08 19:54:47,252 - src.listing_parser - INFO - Found 176 apartment items in the list. Attempting to parse...
2025-05-08 19:54:47,255 - src.listing_parser - INFO - Successfully parsed 176/176 listings.
2025-05-08 19:54:47,255 - __main__ - INFO - Parsed 176 listings for bbox: 32.052334,34.760749,32.063151,34.776098.
2025-05-08 19:54:47,255 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:51,257 - __main__ - INFO - Fetching data for bbox 12/12: 32.066111,34.765788,32.070878,34.786357...
2025-05-08 19:54:51,258 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15
2025-05-08 19:54:51,258 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.066111,34.765788,32.070878,34.786357', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:51,682 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:51,753 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15.
2025-05-08 19:54:51,754 - src.listing_parser - INFO - Found 123 apartment items in the list. Attempting to parse...
2025-05-08 19:54:51,756 - src.listing_parser - INFO - Successfully parsed 123/123 listings.
2025-05-08 19:54:51,756 - __main__ - INFO - Parsed 123 listings for bbox: 32.066111,34.765788,32.070878,34.786357.
2025-05-08 19:54:51,756 - __main__ - INFO - Finished fetching. Total listings fetched across all bboxes (before deduplication): 1650
2025-05-08 19:54:51,757 - __main__ - INFO - Total unique apartments found after aggregation and deduplication: 363
2025-05-08 19:54:51,757 - __main__ - INFO - Found 10 new apartments potentially matching criteria.
2025-05-08 19:54:51,757 - __main__ - INFO - Attempting to notify for 10 apartments.
2025-05-08 19:54:51,757 - __main__ - INFO - Starting the notification process...
2025-05-08 19:54:51,757 - __main__ - INFO - Sending batch 1 with 5 apartments...
2025-05-08 19:54:51,757 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:54:51,757 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:54:51,772 - src.notifier - INFO - Sending notification for apartment 55246023 to chat -4741762001 (8 images)
2025-05-08 19:54:51,773 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55246023`)\n------\n*Address:*  20 ( )   \n*Price:* 6200\n*Rooms:* 3\n*Floor:* 2\n*Size:* 66 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/2stb8gq5)', media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010657_20250410152033.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010971_20250410152036.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010547_20250410152043.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010318_20250410152033.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010056_20250410152036.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010304_20250410152048.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010116_20250410152045.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010140_20250410152038.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:54:51,774 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:54:51,855 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b070>
2025-05-08 19:54:51,855 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76c10> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:54:52,015 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d210dc0>
2025-05-08 19:54:52,016 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:54:52,016 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:54:52,016 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:54:52,017 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:54:52,017 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:54:57,019 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:54:57,019 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:54:57,020 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:54:57,020 - src.notifier - WARNING - Telegram request timed out for apartment 55246023. Will be retried next run if state saving failed or skipped.
2025-05-08 19:54:57,023 - __main__ - WARNING - Notifier returned False for apartment 55246023.
2025-05-08 19:54:57,023 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:54:57,023 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:54:57,038 - src.notifier - INFO - Sending notification for apartment 55245944 to chat -4741762001 (9 images)
2025-05-08 19:54:57,039 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55245944`)\n------\n*Address:*  20 ( )   \n*Price:* 6200\n*Rooms:* 3\n*Floor:* 1\n*Size:* 70 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/79iulmqm)', media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010300_20250410150111.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010134_20250410150056.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010548_20250410150247.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010796_20250410150051.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010329_20250410150056.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010583_20250410150057.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010567_20250410150246.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010600_20250410150052.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010303_20250410150055.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:54:57,040 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:54:57,126 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b220>
2025-05-08 19:54:57,127 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76f20> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:54:57,292 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d210d30>
2025-05-08 19:54:57,293 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:54:57,293 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:54:57,293 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:54:57,294 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:54:57,294 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:02,295 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:55:02,296 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:02,296 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:02,297 - src.notifier - WARNING - Telegram request timed out for apartment 55245944. Will be retried next run if state saving failed or skipped.
2025-05-08 19:55:02,300 - __main__ - WARNING - Notifier returned False for apartment 55245944.
2025-05-08 19:55:02,300 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:02,300 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:02,316 - src.notifier - INFO - Sending notification for apartment 54195140 to chat -4741762001 (8 images)
2025-05-08 19:55:02,317 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `54195140`)\n------\n*Address:*  ()   \n*Price:* 7700\n*Rooms:* 2\n*Floor:* 5\n*Size:* 65 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/43fjqfbm)', media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010187_20240806131050.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010452_20240806131056.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010467_20240806131102.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010912_20240806131107.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010811_20240806131112.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010058_20240806131116.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010950_20240806131120.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010896_20240806131132.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:55:02,317 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:55:02,399 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b5e0>
2025-05-08 19:55:02,399 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76c10> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:55:02,555 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d210f70>
2025-05-08 19:55:02,558 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:55:02,559 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:55:02,576 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:55:02,577 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:55:02,577 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:07,579 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:55:07,579 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:07,580 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:07,580 - src.notifier - WARNING - Telegram request timed out for apartment 54195140. Will be retried next run if state saving failed or skipped.
2025-05-08 19:55:07,583 - __main__ - WARNING - Notifier returned False for apartment 54195140.
2025-05-08 19:55:07,583 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:07,583 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:07,598 - src.notifier - INFO - Sending notification for apartment 55289897 to chat -4741762001 (5 images)
2025-05-08 19:55:07,599 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55289897`)\n------\n*Address:*  17   \n*Price:* 7000\n*Rooms:* 2\n*Floor:* 1\n*Size:* 64 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/e9107wm1)', media='https://img.yad2.co.il/Pic/202504/22/2_6/o/y2_1pa_010089_20250422180005.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/22/2_6/o/y2_1pa_010998_20250422180028.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/22/2_6/o/y2_1pa_010154_20250422180029.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/22/2_6/o/y2_1pa_010735_20250422180029.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/22/2_6/o/y2_1pa_010343_20250422180237.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:55:07,600 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:55:07,683 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b190>
2025-05-08 19:55:07,683 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76f20> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:55:07,853 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d210d60>
2025-05-08 19:55:07,853 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:55:07,854 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:55:07,854 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:55:07,854 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:55:07,855 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:12,856 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:55:12,856 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:12,857 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:12,858 - src.notifier - WARNING - Telegram request timed out for apartment 55289897. Will be retried next run if state saving failed or skipped.
2025-05-08 19:55:12,861 - __main__ - WARNING - Notifier returned False for apartment 55289897.
2025-05-08 19:55:12,861 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:12,861 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:12,876 - src.notifier - INFO - Sending notification for apartment 54206030 to chat -4741762001 (9 images)
2025-05-08 19:55:12,877 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `54206030`)\n------\n*Address:*  18 ( )   \n*Price:* 5500\n*Rooms:* 2\n*Floor:* 3\n*Size:* 55 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/weqyyl0n)', media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_1_XGFXBldCGT_20250304.jpg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_2_e9Mq9SSJFM_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_3_wnQAUpHbiy_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_4_qeF9s7SDaw_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_5_5tAnafE1wd_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_6_NSCxmIEZdH_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_7_2W8z5w285o_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_8_CS_lyEMpeC_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_9_qx65eqMAcs_20250304.jpg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:55:12,878 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:55:12,964 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b2e0>
2025-05-08 19:55:12,964 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76c10> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:55:13,128 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d210b50>
2025-05-08 19:55:13,129 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:55:13,129 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:55:13,130 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:55:13,130 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:55:13,130 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:18,132 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:55:18,132 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:18,133 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:18,133 - src.notifier - WARNING - Telegram request timed out for apartment 54206030. Will be retried next run if state saving failed or skipped.
2025-05-08 19:55:18,136 - __main__ - WARNING - Notifier returned False for apartment 54206030.
2025-05-08 19:55:18,139 - src.state - INFO - Updated sent listings with batch 1 containing 5 listings.
2025-05-08 19:55:18,139 - __main__ - INFO - Waiting 10 seconds before sending the next batch...
2025-05-08 19:55:28,140 - __main__ - INFO - Sending batch 2 with 5 apartments...
2025-05-08 19:55:28,141 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:28,141 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:28,157 - src.notifier - INFO - Sending notification for apartment 54278482 to chat -4741762001 (6 images)
2025-05-08 19:55:28,158 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `54278482`)\n------\n*Address:*    ()   \n*Price:* 6900\n*Rooms:* 2\n*Floor:* 2\n*Size:* 58 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/a36d99ys)', media='https://img.yad2.co.il/Pic/202408/25/2_6/o/y2_1pa_010075_20240825171340.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/25/2_6/o/y2_1pa_010783_20240825171340.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/25/2_6/o/y2_1pa_010932_20240825171340.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/25/2_6/o/y2_1pa_010305_20240825171339.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/25/2_6/o/y2_1pa_010245_20240825171340.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/25/2_6/o/y2_1pa_010252_20240825171340.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:55:28,159 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:55:28,250 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b7f0>
2025-05-08 19:55:28,250 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76f20> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:55:28,413 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10cf2d190>
2025-05-08 19:55:28,414 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:55:28,415 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:55:28,415 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:55:28,415 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:55:28,415 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:33,417 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:55:33,417 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:33,418 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:33,418 - src.notifier - WARNING - Telegram request timed out for apartment 54278482. Will be retried next run if state saving failed or skipped.
2025-05-08 19:55:33,421 - __main__ - WARNING - Notifier returned False for apartment 54278482.
2025-05-08 19:55:33,421 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:33,421 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:33,436 - src.notifier - INFO - Sending notification for apartment 55356058 to chat -4741762001 (9 images)
2025-05-08 19:55:33,437 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55356058`)\n------\n*Address:*   46   \n*Price:* 6500\n*Rooms:* 2\n*Floor:* 6\n*Size:* 49 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/x99grbvy)', media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010590_20250507170159.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010363_20250507170129.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010895_20250507170200.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010804_20250507170159.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010527_20250507170200.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010142_20250507170159.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010214_20250507170200.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010387_20250507170302.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010446_20250507170303.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:55:33,438 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:55:33,524 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b7c0>
2025-05-08 19:55:33,524 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76c10> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:55:33,689 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d200820>
2025-05-08 19:55:33,690 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:55:33,690 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:55:33,690 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:55:33,691 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:55:33,691 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:38,693 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:55:38,693 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:38,694 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:38,694 - src.notifier - WARNING - Telegram request timed out for apartment 55356058. Will be retried next run if state saving failed or skipped.
2025-05-08 19:55:38,697 - __main__ - WARNING - Notifier returned False for apartment 55356058.
2025-05-08 19:55:38,697 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:38,697 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:38,712 - src.notifier - INFO - Sending notification for apartment 55149816 to chat -4741762001 (2 images)
2025-05-08 19:55:38,713 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55149816`)\n------\n*Address:*    \n*Price:* 7000\n*Rooms:* 2\n*Floor:* 4\n*Size:* 63 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/f7pfzb72)', media='https://img.yad2.co.il/Pic/202503/19/2_6/o/y2_1_zD28T7uRv2_20250319.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/19/2_6/o/y2_2_5WE2JV4YHv_20250319.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:55:38,713 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:55:38,795 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18bd30>
2025-05-08 19:55:38,795 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76f20> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:55:38,958 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18bf10>
2025-05-08 19:55:38,958 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:55:38,959 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:55:38,959 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:55:38,959 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:55:38,960 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:39,047 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 08 May 2025 16:55:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'111'), (b'Connection', b'keep-alive'), (b'Retry-After', b'34'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-08 19:55:39,048 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMediaGroup "HTTP/1.1 429 Too Many Requests"
2025-05-08 19:55:39,048 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-08 19:55:39,048 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-08 19:55:39,048 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:39,049 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:39,049 - src.notifier - WARNING - Telegram Flood control exceeded for 55149816. Need to retry after 34 seconds.
2025-05-08 19:55:39,049 - __main__ - WARNING - Rate limit hit for 55149816. Waiting 35 seconds before retrying...
2025-05-08 19:56:14,057 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:56:14,057 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:56:14,073 - src.notifier - INFO - Sending notification for apartment 55110599 to chat -4741762001 (1 images)
2025-05-08 19:56:14,073 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendPhoto` with parameters `{'chat_id': '-4741762001', 'photo': 'https://img.yad2.co.il/Pic/202503/10/2_6/o/y2_1pa_010253_20250310114724.jpeg', 'caption': '*New Listing Found!* (ID: `55110599`)\n------\n*Address:*   10 ( ,   )   \n*Price:* 7500\n*Rooms:* 2\n*Floor:* 3\n*Size:* 62 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/243q1v07)', 'parse_mode': 'Markdown'}`
2025-05-08 19:56:14,074 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:56:14,153 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d394a90>
2025-05-08 19:56:14,153 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cff4a50> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:56:14,307 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d2101c0>
2025-05-08 19:56:14,308 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:56:14,308 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:56:14,308 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:56:14,309 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:56:14,309 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:56:14,412 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 08 May 2025 16:56:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1708'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-08 19:56:14,413 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendPhoto "HTTP/1.1 200 OK"
2025-05-08 19:56:14,413 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-08 19:56:14,413 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-08 19:56:14,414 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:56:14,414 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:56:14,414 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendPhoto` finished with return value `{'message_id': 2804, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746723374, 'photo': [{'file_id': 'AgACAgQAAxkDAAIK9Ggc4i4e5f_eJC0hWdOWlGfIdUhKAAJEtzEb33zFUqzugIx28v-tAQADAgADcwADNgQ', 'file_unique_id': 'AQADRLcxG998xVJ4', 'file_size': 1569, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxkDAAIK9Ggc4i4e5f_eJC0hWdOWlGfIdUhKAAJEtzEb33zFUqzugIx28v-tAQADAgADbQADNgQ', 'file_unique_id': 'AQADRLcxG998xVJy', 'file_size': 22240, 'width': 238, 'height': 320}, {'file_id': 'AgACAgQAAxkDAAIK9Ggc4i4e5f_eJC0hWdOWlGfIdUhKAAJEtzEb33zFUqzugIx28v-tAQADAgADeAADNgQ', 'file_unique_id': 'AQADRLcxG998xVJ9', 'file_size': 32396, 'width': 357, 'height': 480}], 'caption': 'New Listing Found! (ID: 55110599)\n------\nAddress:   10 ( ,   )   \nPrice: 7500\nRooms: 2\nFloor: 3\nSize: 62 sqm\n------\nLink to Yad2', 'caption_entities': [{'offset': 0, 'length': 18, 'type': 'bold'}, {'offset': 24, 'length': 8, 'type': 'code'}, {'offset': 41, 'length': 8, 'type': 'bold'}, {'offset': 105, 'length': 6, 'type': 'bold'}, {'offset': 117, 'length': 6, 'type': 'bold'}, {'offset': 126, 'length': 6, 'type': 'bold'}, {'offset': 135, 'length': 5, 'type': 'bold'}, {'offset': 155, 'length': 12, 'type': 'text_link', 'url': 'https://www.yad2.co.il/realestate/item/243q1v07'}]}`
2025-05-08 19:56:14,415 - src.notifier - DEBUG - Sent single photo message for 55110599.
2025-05-08 19:56:14,415 - src.notifier - INFO - Successfully sent notification for apartment 55110599
2025-05-08 19:56:14,416 - __main__ - DEBUG - Notification for 55110599 successful.
2025-05-08 19:56:14,417 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:56:14,417 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:56:14,432 - src.notifier - INFO - Sending notification for apartment 55247900 to chat -4741762001 (12 images)
2025-05-08 19:56:14,433 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55247900`)\n------\n*Address:*   46 ( ,   )   \n*Price:* 7500\n*Rooms:* 2\n*Floor:* 7\n*Size:* 49 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/e6lvj3k5)', media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010885_20250411095919.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010343_20250411100059.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010034_20250411095945.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010619_20250411095944.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010487_20250411095952.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010588_20250411095953.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010351_20250411095953.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010792_20250411095953.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010124_20250411100004.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010956_20250411100003.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:56:14,434 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:56:14,515 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d395220>
2025-05-08 19:56:14,515 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cff4580> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:56:14,668 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d3926a0>
2025-05-08 19:56:14,669 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:56:14,670 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:56:14,670 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:56:14,670 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:56:14,670 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:56:19,672 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:56:19,672 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:56:19,673 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:56:19,674 - src.notifier - WARNING - Telegram request timed out for apartment 55247900. Will be retried next run if state saving failed or skipped.
2025-05-08 19:56:19,676 - __main__ - WARNING - Notifier returned False for apartment 55247900.
2025-05-08 19:56:19,679 - src.state - INFO - Updated sent listings with batch 1 containing 5 listings.
2025-05-08 19:56:19,679 - __main__ - INFO - Notification process completed.
2025-05-08 19:56:19,679 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:56:19,679 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:56:19,694 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Finished* - Current amount saw is 481', 'parse_mode': 'Markdown'}`
2025-05-08 19:56:19,695 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:56:19,775 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d395130>
2025-05-08 19:56:19,775 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cff4580> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:56:19,932 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d394d30>
2025-05-08 19:56:19,933 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:56:19,934 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:56:19,934 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:56:19,934 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:56:19,934 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:56:24,936 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:56:24,937 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:56:24,938 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:56:24,938 - src.notifier - ERROR - Failed to send message: *Search Finished* - Current amount saw is 481. Error: Timed out
Traceback (most recent call last):
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/http11.py", line 136, in handle_async_request
    raise exc
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_backends/anyio.py", line 37, in read
    return b""
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_httpxrequest.py", line 277, in do_request
    res = await self._client.request(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zeev/Desktop/code/yad-2-to-telegram/src/notifier.py", line 156, in send_telegram_message
    await bot.send_message(chat_id=chat_id, text=message, parse_mode="Markdown")
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 1091, in send_message
    return await self._send_message(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 803, in _send_message
    result = await self._post(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 691, in _post
    return await self._do_post(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 720, in _do_post
    result = await request.post(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_httpxrequest.py", line 294, in do_request
    raise TimedOut from err
telegram.error.TimedOut: Timed out
2025-05-08 19:56:24,989 - __main__ - INFO - Notification process completed.
2025-05-08 19:56:24,989 - __main__ - INFO - Notification summary: 1 sent, 8 failed.
2025-05-08 19:56:24,989 - __main__ - INFO - Attempting to save updated state with 481 total sent IDs and timestamps.
2025-05-08 19:56:24,991 - src.state - INFO - Successfully saved state for 481 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 19:56:24,991 - __main__ - INFO - Attempting to save state for 481 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 19:56:24,992 - src.state - INFO - Successfully saved state for 481 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 19:56:24,993 - __main__ - INFO - Apartment check run finished.
2025-05-08 19:56:24,994 - __main__ - INFO - Yad2 Apartment Notifier script finished.
/Users/zeev/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
2025-05-08 20:30:00,712 - __main__ - INFO - Starting Yad2 Apartment Notifier script.
sys.path: ['/Users/zeev/Desktop/code/yad-2-to-telegram', '/Users/zeev/Desktop/code/yad-2-to-telegram/src', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python39.zip', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/lib-dynload', '/Users/zeev/Library/Python/3.9/lib/python/site-packages', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/site-packages']
2025-05-08 20:30:00,712 - asyncio - DEBUG - Using selector: KqueueSelector
2025-05-08 20:30:00,713 - __main__ - INFO - Starting apartment check run...
2025-05-08 20:30:00,713 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:30:00,713 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:30:00,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Initiated*', 'parse_mode': 'Markdown'}`
2025-05-08 20:30:00,833 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 20:30:00,936 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1110ce400>
2025-05-08 20:30:00,936 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x111084ac0> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 20:30:01,089 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1110c31f0>
2025-05-08 20:30:01,089 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 20:30:01,090 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 20:30:01,090 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 20:30:01,090 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 20:30:01,091 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 20:30:01,444 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 08 May 2025 17:30:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'465'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-08 20:30:01,445 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-08 20:30:01,445 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-08 20:30:01,445 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-08 20:30:01,445 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 20:30:01,446 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 20:30:01,446 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2806, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746725401, 'text': 'Search Initiated', 'entities': [{'offset': 0, 'length': 16, 'type': 'bold'}]}`
2025-05-08 20:30:01,447 - src.notifier - INFO - Successfully sent message: *Search Initiated*
2025-05-08 20:30:01,450 - src.state - INFO - Loaded 481 sent listing states (ID -> timestamp) from /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 20:30:01,450 - __main__ - INFO - Fetching data for bbox 1/12: 32.075192,34.763754,32.086468,34.779760...
2025-05-08 20:30:01,451 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15
2025-05-08 20:30:01,451 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075192,34.763754,32.086468,34.779760', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 20:30:01,471 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): gw.yad2.co.il:443
2025-05-08 20:30:02,063 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15 HTTP/1.1" 200 None
2025-05-08 20:30:02,136 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15.
2025-05-08 20:30:02,136 - src.listing_parser - INFO - Found 134 apartment items in the list. Attempting to parse...
2025-05-08 20:30:02,139 - src.listing_parser - INFO - Successfully parsed 134/134 listings.
2025-05-08 20:30:02,139 - __main__ - INFO - Parsed 134 listings for bbox: 32.075192,34.763754,32.086468,34.779760.
2025-05-08 20:30:02,139 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 20:30:06,141 - __main__ - INFO - Fetching data for bbox 2/12: 32.075076,34.771885,32.086353,34.787891...
2025-05-08 20:30:06,142 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15
2025-05-08 20:30:06,142 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075076,34.771885,32.086353,34.787891', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 20:30:06,567 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15 HTTP/1.1" 200 None
2025-05-08 20:30:06,640 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15.
2025-05-08 20:30:06,640 - src.listing_parser - INFO - Found 147 apartment items in the list. Attempting to parse...
2025-05-08 20:30:06,643 - src.listing_parser - INFO - Successfully parsed 147/147 listings.
2025-05-08 20:30:06,643 - __main__ - INFO - Parsed 147 listings for bbox: 32.075076,34.771885,32.086353,34.787891.
2025-05-08 20:30:06,643 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 20:30:10,644 - __main__ - INFO - Fetching data for bbox 3/12: 32.076017,34.781501,32.084821,34.793997...
2025-05-08 20:30:10,645 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15
2025-05-08 20:30:10,645 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.076017,34.781501,32.084821,34.793997', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 20:30:11,073 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15 HTTP/1.1" 200 None
2025-05-08 20:30:11,143 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15.
2025-05-08 20:30:11,143 - src.listing_parser - INFO - Found 142 apartment items in the list. Attempting to parse...
2025-05-08 20:30:11,146 - src.listing_parser - INFO - Successfully parsed 142/142 listings.
2025-05-08 20:30:11,146 - __main__ - INFO - Parsed 142 listings for bbox: 32.076017,34.781501,32.084821,34.793997.
2025-05-08 20:30:11,146 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 20:30:15,147 - __main__ - INFO - Fetching data for bbox 4/12: 32.080523,34.782766,32.088978,34.794767...
2025-05-08 20:30:15,148 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15
2025-05-08 20:30:15,149 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.080523,34.782766,32.088978,34.794767', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 20:30:15,579 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15 HTTP/1.1" 200 None
2025-05-08 20:30:15,653 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15.
2025-05-08 20:30:15,653 - src.listing_parser - INFO - Found 146 apartment items in the list. Attempting to parse...
2025-05-08 20:30:15,656 - src.listing_parser - INFO - Successfully parsed 146/146 listings.
2025-05-08 20:30:15,656 - __main__ - INFO - Parsed 146 listings for bbox: 32.080523,34.782766,32.088978,34.794767.
2025-05-08 20:30:15,656 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 20:30:19,657 - __main__ - INFO - Fetching data for bbox 5/12: 32.068977,34.760081,32.081317,34.777596...
2025-05-08 20:30:19,658 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15
2025-05-08 20:30:19,658 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.068977,34.760081,32.081317,34.777596', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 20:30:20,042 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15 HTTP/1.1" 200 None
2025-05-08 20:30:20,112 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15.
2025-05-08 20:30:20,113 - src.listing_parser - INFO - Found 126 apartment items in the list. Attempting to parse...
2025-05-08 20:30:20,115 - src.listing_parser - INFO - Successfully parsed 126/126 listings.
2025-05-08 20:30:20,115 - __main__ - INFO - Parsed 126 listings for bbox: 32.068977,34.760081,32.081317,34.777596.
2025-05-08 20:30:20,115 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 20:30:24,116 - __main__ - INFO - Fetching data for bbox 6/12: 32.067273,34.764900,32.079614,34.782414...
2025-05-08 20:30:24,117 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15
2025-05-08 20:30:24,117 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.067273,34.764900,32.079614,34.782414', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 20:30:24,489 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15 HTTP/1.1" 200 None
2025-05-08 20:30:24,559 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15.
2025-05-08 20:30:24,559 - src.listing_parser - INFO - Found 128 apartment items in the list. Attempting to parse...
2025-05-08 20:30:24,562 - src.listing_parser - INFO - Successfully parsed 128/128 listings.
2025-05-08 20:30:24,562 - __main__ - INFO - Parsed 128 listings for bbox: 32.067273,34.764900,32.079614,34.782414.
2025-05-08 20:30:24,562 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 20:30:28,562 - __main__ - INFO - Fetching data for bbox 7/12: 32.065226,34.770869,32.077566,34.788383...
2025-05-08 20:30:28,563 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15
2025-05-08 20:30:28,563 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.065226,34.770869,32.077566,34.788383', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 20:30:28,994 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15 HTTP/1.1" 200 None
2025-05-08 20:30:29,063 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15.
2025-05-08 20:30:29,064 - src.listing_parser - INFO - Found 123 apartment items in the list. Attempting to parse...
2025-05-08 20:30:29,066 - src.listing_parser - INFO - Successfully parsed 123/123 listings.
2025-05-08 20:30:29,066 - __main__ - INFO - Parsed 123 listings for bbox: 32.065226,34.770869,32.077566,34.788383.
2025-05-08 20:30:29,066 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 20:30:33,067 - __main__ - INFO - Fetching data for bbox 8/12: 32.064591,34.775937,32.076932,34.793451...
2025-05-08 20:30:33,068 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15
2025-05-08 20:30:33,068 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.064591,34.775937,32.076932,34.793451', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 20:30:33,500 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15 HTTP/1.1" 200 None
2025-05-08 20:30:33,572 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15.
2025-05-08 20:30:33,572 - src.listing_parser - INFO - Found 133 apartment items in the list. Attempting to parse...
2025-05-08 20:30:33,575 - src.listing_parser - INFO - Successfully parsed 133/133 listings.
2025-05-08 20:30:33,575 - __main__ - INFO - Parsed 133 listings for bbox: 32.064591,34.775937,32.076932,34.793451.
2025-05-08 20:30:33,575 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 20:30:37,576 - __main__ - INFO - Fetching data for bbox 9/12: 32.060576,34.760166,32.071472,34.775629...
2025-05-08 20:30:37,577 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15
2025-05-08 20:30:37,578 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.060576,34.760166,32.071472,34.775629', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 20:30:38,006 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15 HTTP/1.1" 200 None
2025-05-08 20:30:38,086 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15.
2025-05-08 20:30:38,086 - src.listing_parser - INFO - Found 132 apartment items in the list. Attempting to parse...
2025-05-08 20:30:38,088 - src.listing_parser - INFO - Successfully parsed 132/132 listings.
2025-05-08 20:30:38,088 - __main__ - INFO - Parsed 132 listings for bbox: 32.060576,34.760166,32.071472,34.775629.
2025-05-08 20:30:38,088 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 20:30:42,089 - __main__ - INFO - Fetching data for bbox 10/12: 32.057632,34.767177,32.068528,34.782639...
2025-05-08 20:30:42,090 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15
2025-05-08 20:30:42,091 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.057632,34.767177,32.068528,34.782639', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 20:30:42,512 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15 HTTP/1.1" 200 None
2025-05-08 20:30:42,584 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15.
2025-05-08 20:30:42,584 - src.listing_parser - INFO - Found 156 apartment items in the list. Attempting to parse...
2025-05-08 20:30:42,587 - src.listing_parser - INFO - Successfully parsed 156/156 listings.
2025-05-08 20:30:42,587 - __main__ - INFO - Parsed 156 listings for bbox: 32.057632,34.767177,32.068528,34.782639.
2025-05-08 20:30:42,587 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 20:30:46,589 - __main__ - INFO - Fetching data for bbox 11/12: 32.052334,34.760749,32.063151,34.776098...
2025-05-08 20:30:46,590 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15
2025-05-08 20:30:46,590 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.052334,34.760749,32.063151,34.776098', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 20:30:47,084 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15 HTTP/1.1" 200 None
2025-05-08 20:30:47,091 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15.
2025-05-08 20:30:47,092 - src.listing_parser - INFO - Found 179 apartment items in the list. Attempting to parse...
2025-05-08 20:30:47,095 - src.listing_parser - INFO - Successfully parsed 179/179 listings.
2025-05-08 20:30:47,095 - __main__ - INFO - Parsed 179 listings for bbox: 32.052334,34.760749,32.063151,34.776098.
2025-05-08 20:30:47,095 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 20:30:51,096 - __main__ - INFO - Fetching data for bbox 12/12: 32.066111,34.765788,32.070878,34.786357...
2025-05-08 20:30:51,097 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15
2025-05-08 20:30:51,097 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.066111,34.765788,32.070878,34.786357', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 20:30:51,458 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15 HTTP/1.1" 200 None
2025-05-08 20:30:51,560 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15.
2025-05-08 20:30:51,560 - src.listing_parser - INFO - Found 125 apartment items in the list. Attempting to parse...
2025-05-08 20:30:51,563 - src.listing_parser - INFO - Successfully parsed 125/125 listings.
2025-05-08 20:30:51,563 - __main__ - INFO - Parsed 125 listings for bbox: 32.066111,34.765788,32.070878,34.786357.
2025-05-08 20:30:51,563 - __main__ - INFO - Finished fetching. Total listings fetched across all bboxes (before deduplication): 1671
2025-05-08 20:30:51,563 - __main__ - INFO - Total unique apartments found after aggregation and deduplication: 372
2025-05-08 20:30:51,563 - __main__ - INFO - Found 5 new apartments potentially matching criteria.
2025-05-08 20:30:51,563 - __main__ - INFO - Attempting to notify for 5 apartments.
2025-05-08 20:30:51,563 - __main__ - INFO - Starting the notification process...
2025-05-08 20:30:51,563 - __main__ - INFO - Sending batch 1 with 5 apartments...
2025-05-08 20:30:51,564 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:30:51,564 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:30:51,578 - src.notifier - INFO - Sending notification for apartment 55362581 to chat -4741762001 (6 images)
2025-05-08 20:30:51,579 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55362581`)\n------\n*Address:*   8 (  ,   )   \n*Price:* 7800\n*Rooms:* 2.5\n*Floor:* 0\n*Size:* 50 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/jfeb2o7d)', media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010663_20250508193704.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010989_20250508194310.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010345_20250508195214.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010634_20250508195226.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010645_20250508195243.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010032_20250508195657.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 20:30:51,580 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 20:30:51,661 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x111396b80>
2025-05-08 20:30:51,661 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1110f9f90> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 20:30:51,817 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11050fcd0>
2025-05-08 20:30:51,817 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 20:30:51,818 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 20:30:51,818 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 20:30:51,819 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 20:30:51,819 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 20:30:56,820 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 20:30:56,821 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 20:30:56,821 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 20:30:56,822 - src.notifier - WARNING - Telegram request timed out for apartment 55362581. Will be retried next run if state saving failed or skipped.
2025-05-08 20:30:56,825 - __main__ - WARNING - Notifier returned False for apartment 55362581.
2025-05-08 20:30:56,825 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:30:56,825 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:30:56,840 - src.notifier - INFO - Sending notification for apartment 55362658 to chat -4741762001 (3 images)
2025-05-08 20:30:56,841 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55362658`)\n------\n*Address:* (  ,   )   \n*Price:* 4500\n*Rooms:* 2\n*Floor:* 2\n*Size:* 35 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/bihax3nh)', media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010949_20250508201602.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010551_20250508201602.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010702_20250508201602.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 20:30:56,841 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 20:30:56,922 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x111396cd0>
2025-05-08 20:30:56,922 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1110f9040> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 20:30:57,080 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x111372fa0>
2025-05-08 20:30:57,081 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 20:30:57,082 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 20:30:57,082 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 20:30:57,082 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 20:30:57,082 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 20:30:57,872 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 08 May 2025 17:30:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'3508'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-08 20:30:57,873 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMediaGroup "HTTP/1.1 200 OK"
2025-05-08 20:30:57,873 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-08 20:30:57,873 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-08 20:30:57,873 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 20:30:57,874 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 20:30:57,874 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMediaGroup` finished with return value `[{'message_id': 2807, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746725457, 'media_group_id': '13973803663102948', 'photo': [{'file_id': 'AgACAgQAAxUHaBzqUTF_pWZMWZDwEaAEiD0LPnEAAgm5MRvh_O1QZHqUrn1lF8UBAAMCAANzAAM2BA', 'file_unique_id': 'AQADCbkxG-H87VB4', 'file_size': 989, 'width': 51, 'height': 90}, {'file_id': 'AgACAgQAAxUHaBzqUTF_pWZMWZDwEaAEiD0LPnEAAgm5MRvh_O1QZHqUrn1lF8UBAAMCAANtAAM2BA', 'file_unique_id': 'AQADCbkxG-H87VBy', 'file_size': 11663, 'width': 180, 'height': 320}, {'file_id': 'AgACAgQAAxUHaBzqUTF_pWZMWZDwEaAEiD0LPnEAAgm5MRvh_O1QZHqUrn1lF8UBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADCbkxG-H87VB9', 'file_size': 16114, 'width': 270, 'height': 480}], 'caption': 'New Listing Found! (ID: 55362658)\n------\nAddress: (  ,   )   \nPrice: 4500\nRooms: 2\nFloor: 2\nSize: 35 sqm\n------\nLink to Yad2', 'caption_entities': [{'offset': 0, 'length': 18, 'type': 'bold'}, {'offset': 24, 'length': 8, 'type': 'code'}, {'offset': 41, 'length': 8, 'type': 'bold'}, {'offset': 89, 'length': 6, 'type': 'bold'}, {'offset': 101, 'length': 6, 'type': 'bold'}, {'offset': 110, 'length': 6, 'type': 'bold'}, {'offset': 119, 'length': 5, 'type': 'bold'}, {'offset': 139, 'length': 12, 'type': 'text_link', 'url': 'https://www.yad2.co.il/realestate/item/bihax3nh'}]}, {'message_id': 2808, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746725457, 'media_group_id': '13973803663102948', 'photo': [{'file_id': 'AgACAgQAAxUHaBzqUVM6yJKA9Wj4tDfv7xGwzXMAAt24MRtrRuxQotTHtzGbFzMBAAMCAANzAAM2BA', 'file_unique_id': 'AQAD3bgxG2tG7FB4', 'file_size': 1102, 'width': 51, 'height': 90}, {'file_id': 'AgACAgQAAxUHaBzqUVM6yJKA9Wj4tDfv7xGwzXMAAt24MRtrRuxQotTHtzGbFzMBAAMCAANtAAM2BA', 'file_unique_id': 'AQAD3bgxG2tG7FBy', 'file_size': 13710, 'width': 180, 'height': 320}, {'file_id': 'AgACAgQAAxUHaBzqUVM6yJKA9Wj4tDfv7xGwzXMAAt24MRtrRuxQotTHtzGbFzMBAAMCAAN4AAM2BA', 'file_unique_id': 'AQAD3bgxG2tG7FB9', 'file_size': 19193, 'width': 270, 'height': 480}]}, {'message_id': 2809, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746725457, 'media_group_id': '13973803663102948', 'photo': [{'file_id': 'AgACAgQAAxUHaBzqUXGKEA-yFeuyr6RqkojE9FcAAhG5MRt-VO1QVaudT4d8aBkBAAMCAANzAAM2BA', 'file_unique_id': 'AQADEbkxG35U7VB4', 'file_size': 1150, 'width': 51, 'height': 90}, {'file_id': 'AgACAgQAAxUHaBzqUXGKEA-yFeuyr6RqkojE9FcAAhG5MRt-VO1QVaudT4d8aBkBAAMCAANtAAM2BA', 'file_unique_id': 'AQADEbkxG35U7VBy', 'file_size': 15548, 'width': 180, 'height': 320}, {'file_id': 'AgACAgQAAxUHaBzqUXGKEA-yFeuyr6RqkojE9FcAAhG5MRt-VO1QVaudT4d8aBkBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADEbkxG35U7VB9', 'file_size': 21147, 'width': 270, 'height': 480}]}]`
2025-05-08 20:30:57,875 - src.notifier - DEBUG - Sent media group (3 photos) for 55362658.
2025-05-08 20:30:57,875 - src.notifier - INFO - Successfully sent notification for apartment 55362658
2025-05-08 20:30:57,877 - __main__ - DEBUG - Notification for 55362658 successful.
2025-05-08 20:30:57,877 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:30:57,877 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:30:57,892 - src.notifier - INFO - Sending notification for apartment 55362585 to chat -4741762001 (5 images)
2025-05-08 20:30:57,893 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55362585`)\n------\n*Address:*   18 ()   \n*Price:* 7800\n*Rooms:* 3\n*Floor:* 0\n*Size:* 79 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/vsra3gfj)', media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010098_20250508195805.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010761_20250508195806.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010141_20250508195807.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010478_20250508195807.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010245_20250508195808.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 20:30:57,894 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 20:30:57,974 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x111193100>
2025-05-08 20:30:57,974 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11118c270> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 20:30:58,131 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x111185e50>
2025-05-08 20:30:58,131 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 20:30:58,132 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 20:30:58,132 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 20:30:58,133 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 20:30:58,133 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 20:31:03,134 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 20:31:03,134 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 20:31:03,135 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 20:31:03,135 - src.notifier - WARNING - Telegram request timed out for apartment 55362585. Will be retried next run if state saving failed or skipped.
2025-05-08 20:31:03,138 - __main__ - WARNING - Notifier returned False for apartment 55362585.
2025-05-08 20:31:03,138 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:31:03,138 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:31:03,154 - src.notifier - INFO - Sending notification for apartment 55362677 to chat -4741762001 (3 images)
2025-05-08 20:31:03,154 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55362677`)\n------\n*Address:*   44 ( ,   )   \n*Price:* 7250\n*Rooms:* 2\n*Floor:* 3\n*Size:* 45 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/k28xz3pa)', media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010766_20250508202039.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010876_20250508202040.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_2/o/y2_1pa_010737_20250508202041.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 20:31:03,155 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 20:31:03,239 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1111931c0>
2025-05-08 20:31:03,239 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1110bdf20> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 20:31:03,403 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x111185e20>
2025-05-08 20:31:03,403 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 20:31:03,404 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 20:31:03,404 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 20:31:03,404 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 20:31:03,405 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 20:31:07,579 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 08 May 2025 17:31:07 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'109'), (b'Connection', b'keep-alive'), (b'Retry-After', b'5'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-08 20:31:07,580 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMediaGroup "HTTP/1.1 429 Too Many Requests"
2025-05-08 20:31:07,580 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-08 20:31:07,580 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-08 20:31:07,581 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 20:31:07,581 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 20:31:07,581 - src.notifier - WARNING - Telegram Flood control exceeded for 55362677. Need to retry after 5 seconds.
2025-05-08 20:31:07,581 - __main__ - WARNING - Rate limit hit for 55362677. Waiting 6 seconds before retrying...
2025-05-08 20:31:13,584 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:31:13,585 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:31:13,601 - src.notifier - INFO - Sending notification for apartment 55344858 to chat -4741762001 (13 images)
2025-05-08 20:31:13,602 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55344858`)\n------\n*Address:*  ()   \n*Price:* 6500\n*Rooms:* 2\n*Floor:* 3\n*Size:* 73 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/dpr26oom)', media='https://img.yad2.co.il/Pic/202505/05/2_6/o/y2_2_ZPqaCI0cEK_20250505.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/05/2_6/o/y2_3_BqDNa5ESOI_20250505.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/05/2_6/o/y2_4_yVsXSuA8fL_20250505.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/05/2_6/o/y2_5_6EUKAP1Kuq_20250505.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/05/2_6/o/y2_6_dxnY1cJ0zz_20250505.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/05/2_6/o/y2_7_oWHTsXE9pM_20250505.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/05/2_6/o/y2_8_I05ZxJtlbN_20250505.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/05/2_6/o/y2_14_rZadHsSt6k_20250505.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/05/2_6/o/y2_9_EditTXZoGW_20250505.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/05/2_6/o/y2_10_ItG4fSQjGl_20250505.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 20:31:13,603 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 20:31:13,689 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1114b8730>
2025-05-08 20:31:13,690 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11118c270> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 20:31:13,846 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1111856a0>
2025-05-08 20:31:13,847 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 20:31:13,847 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 20:31:13,847 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 20:31:13,848 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 20:31:13,848 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 20:31:18,850 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 20:31:18,850 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 20:31:18,851 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 20:31:18,851 - src.notifier - WARNING - Telegram request timed out for apartment 55344858. Will be retried next run if state saving failed or skipped.
2025-05-08 20:31:18,854 - __main__ - WARNING - Notifier returned False for apartment 55344858.
2025-05-08 20:31:18,857 - src.state - INFO - Updated sent listings with batch 1 containing 5 listings.
2025-05-08 20:31:18,857 - __main__ - INFO - Notification process completed.
2025-05-08 20:31:18,857 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:31:18,857 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 20:31:18,873 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Finished* - Current amount saw is 486', 'parse_mode': 'Markdown'}`
2025-05-08 20:31:18,873 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 20:31:18,954 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1114b8520>
2025-05-08 20:31:18,954 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11118c270> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 20:31:19,109 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1111b5b50>
2025-05-08 20:31:19,109 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 20:31:19,110 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 20:31:19,110 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 20:31:19,110 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 20:31:19,110 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 20:31:19,214 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 08 May 2025 17:31:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'111'), (b'Connection', b'keep-alive'), (b'Retry-After', b'43'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-08 20:31:19,214 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 429 Too Many Requests"
2025-05-08 20:31:19,214 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-08 20:31:19,214 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-08 20:31:19,215 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 20:31:19,215 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 20:31:19,215 - src.notifier - ERROR - Failed to send message: *Search Finished* - Current amount saw is 486. Error: Flood control exceeded. Retry in 43 seconds
Traceback (most recent call last):
  File "/Users/zeev/Desktop/code/yad-2-to-telegram/src/notifier.py", line 156, in send_telegram_message
    await bot.send_message(chat_id=chat_id, text=message, parse_mode="Markdown")
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 1091, in send_message
    return await self._send_message(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 803, in _send_message
    result = await self._post(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 691, in _post
    return await self._do_post(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 720, in _do_post
    result = await request.post(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_baserequest.py", line 339, in _request_wrapper
    raise RetryAfter(retry_after)
telegram.error.RetryAfter: Flood control exceeded. Retry in 43 seconds
2025-05-08 20:31:19,232 - __main__ - INFO - Notification process completed.
2025-05-08 20:31:19,232 - __main__ - INFO - Notification summary: 1 sent, 3 failed.
2025-05-08 20:31:19,232 - __main__ - INFO - Attempting to save updated state with 486 total sent IDs and timestamps.
2025-05-08 20:31:19,239 - src.state - INFO - Successfully saved state for 486 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 20:31:19,239 - __main__ - INFO - Attempting to save state for 486 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 20:31:19,241 - src.state - INFO - Successfully saved state for 486 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 20:31:19,241 - __main__ - INFO - Apartment check run finished.
2025-05-08 20:31:19,243 - __main__ - INFO - Yad2 Apartment Notifier script finished.
/Users/zeev/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
2025-05-09 16:52:00,789 - __main__ - INFO - Starting Yad2 Apartment Notifier script.
sys.path: ['/Users/zeev/Desktop/code/yad-2-to-telegram', '/Users/zeev/Desktop/code/yad-2-to-telegram/src', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python39.zip', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/lib-dynload', '/Users/zeev/Library/Python/3.9/lib/python/site-packages', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/site-packages']
2025-05-09 16:52:00,789 - asyncio - DEBUG - Using selector: KqueueSelector
2025-05-09 16:52:00,789 - __main__ - INFO - Starting apartment check run...
2025-05-09 16:52:00,789 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:52:00,789 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:52:00,921 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Initiated*', 'parse_mode': 'Markdown'}`
2025-05-09 16:52:00,926 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:52:01,027 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fa4b490>
2025-05-09 16:52:01,027 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fa0a9e0> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:52:01,179 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fa40280>
2025-05-09 16:52:01,180 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:52:01,181 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:52:01,181 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:52:01,181 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:52:01,181 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:52:01,276 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 13:52:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'465'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 16:52:01,277 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-09 16:52:01,277 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 16:52:01,277 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 16:52:01,277 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:52:01,277 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:52:01,278 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2815, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746798721, 'text': 'Search Initiated', 'entities': [{'offset': 0, 'length': 16, 'type': 'bold'}]}`
2025-05-09 16:52:01,279 - src.notifier - INFO - Successfully sent message: *Search Initiated*
2025-05-09 16:52:01,282 - src.state - INFO - Loaded 486 sent listing states (ID -> timestamp) from /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-09 16:52:01,282 - __main__ - INFO - Fetching data for bbox 1/12: 32.075192,34.763754,32.086468,34.779760...
2025-05-09 16:52:01,283 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15
2025-05-09 16:52:01,283 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075192,34.763754,32.086468,34.779760', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 16:52:01,304 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): gw.yad2.co.il:443
2025-05-09 16:52:01,854 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15 HTTP/1.1" 200 None
2025-05-09 16:52:01,926 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15.
2025-05-09 16:52:01,926 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-09 16:52:01,929 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-09 16:52:01,929 - __main__ - INFO - Parsed 130 listings for bbox: 32.075192,34.763754,32.086468,34.779760.
2025-05-09 16:52:01,929 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 16:52:05,931 - __main__ - INFO - Fetching data for bbox 2/12: 32.075076,34.771885,32.086353,34.787891...
2025-05-09 16:52:05,932 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15
2025-05-09 16:52:05,932 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075076,34.771885,32.086353,34.787891', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 16:52:06,379 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15 HTTP/1.1" 200 None
2025-05-09 16:52:06,451 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15.
2025-05-09 16:52:06,451 - src.listing_parser - INFO - Found 149 apartment items in the list. Attempting to parse...
2025-05-09 16:52:06,454 - src.listing_parser - INFO - Successfully parsed 149/149 listings.
2025-05-09 16:52:06,454 - __main__ - INFO - Parsed 149 listings for bbox: 32.075076,34.771885,32.086353,34.787891.
2025-05-09 16:52:06,454 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 16:52:10,455 - __main__ - INFO - Fetching data for bbox 3/12: 32.076017,34.781501,32.084821,34.793997...
2025-05-09 16:52:10,457 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15
2025-05-09 16:52:10,457 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.076017,34.781501,32.084821,34.793997', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 16:52:10,801 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15 HTTP/1.1" 200 None
2025-05-09 16:52:10,872 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15.
2025-05-09 16:52:10,872 - src.listing_parser - INFO - Found 144 apartment items in the list. Attempting to parse...
2025-05-09 16:52:10,875 - src.listing_parser - INFO - Successfully parsed 144/144 listings.
2025-05-09 16:52:10,875 - __main__ - INFO - Parsed 144 listings for bbox: 32.076017,34.781501,32.084821,34.793997.
2025-05-09 16:52:10,875 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 16:52:14,877 - __main__ - INFO - Fetching data for bbox 4/12: 32.080523,34.782766,32.088978,34.794767...
2025-05-09 16:52:14,878 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15
2025-05-09 16:52:14,878 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.080523,34.782766,32.088978,34.794767', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 16:52:15,290 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15 HTTP/1.1" 200 None
2025-05-09 16:52:15,359 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15.
2025-05-09 16:52:15,360 - src.listing_parser - INFO - Found 148 apartment items in the list. Attempting to parse...
2025-05-09 16:52:15,363 - src.listing_parser - INFO - Successfully parsed 148/148 listings.
2025-05-09 16:52:15,363 - __main__ - INFO - Parsed 148 listings for bbox: 32.080523,34.782766,32.088978,34.794767.
2025-05-09 16:52:15,363 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 16:52:19,364 - __main__ - INFO - Fetching data for bbox 5/12: 32.068977,34.760081,32.081317,34.777596...
2025-05-09 16:52:19,365 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15
2025-05-09 16:52:19,365 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.068977,34.760081,32.081317,34.777596', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 16:52:19,711 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15 HTTP/1.1" 200 None
2025-05-09 16:52:19,814 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15.
2025-05-09 16:52:19,814 - src.listing_parser - INFO - Found 124 apartment items in the list. Attempting to parse...
2025-05-09 16:52:19,817 - src.listing_parser - INFO - Successfully parsed 124/124 listings.
2025-05-09 16:52:19,817 - __main__ - INFO - Parsed 124 listings for bbox: 32.068977,34.760081,32.081317,34.777596.
2025-05-09 16:52:19,817 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 16:52:23,817 - __main__ - INFO - Fetching data for bbox 6/12: 32.067273,34.764900,32.079614,34.782414...
2025-05-09 16:52:23,818 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15
2025-05-09 16:52:23,818 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.067273,34.764900,32.079614,34.782414', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 16:52:24,154 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15 HTTP/1.1" 200 None
2025-05-09 16:52:24,224 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15.
2025-05-09 16:52:24,224 - src.listing_parser - INFO - Found 126 apartment items in the list. Attempting to parse...
2025-05-09 16:52:24,227 - src.listing_parser - INFO - Successfully parsed 126/126 listings.
2025-05-09 16:52:24,227 - __main__ - INFO - Parsed 126 listings for bbox: 32.067273,34.764900,32.079614,34.782414.
2025-05-09 16:52:24,227 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 16:52:28,228 - __main__ - INFO - Fetching data for bbox 7/12: 32.065226,34.770869,32.077566,34.788383...
2025-05-09 16:52:28,229 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15
2025-05-09 16:52:28,229 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.065226,34.770869,32.077566,34.788383', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 16:52:28,575 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15 HTTP/1.1" 200 None
2025-05-09 16:52:28,645 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15.
2025-05-09 16:52:28,646 - src.listing_parser - INFO - Found 120 apartment items in the list. Attempting to parse...
2025-05-09 16:52:28,649 - src.listing_parser - INFO - Successfully parsed 120/120 listings.
2025-05-09 16:52:28,649 - __main__ - INFO - Parsed 120 listings for bbox: 32.065226,34.770869,32.077566,34.788383.
2025-05-09 16:52:28,649 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 16:52:32,650 - __main__ - INFO - Fetching data for bbox 8/12: 32.064591,34.775937,32.076932,34.793451...
2025-05-09 16:52:32,651 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15
2025-05-09 16:52:32,652 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.064591,34.775937,32.076932,34.793451', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 16:52:32,989 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15 HTTP/1.1" 200 None
2025-05-09 16:52:33,060 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15.
2025-05-09 16:52:33,060 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-09 16:52:33,063 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-09 16:52:33,063 - __main__ - INFO - Parsed 130 listings for bbox: 32.064591,34.775937,32.076932,34.793451.
2025-05-09 16:52:33,063 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 16:52:37,064 - __main__ - INFO - Fetching data for bbox 9/12: 32.060576,34.760166,32.071472,34.775629...
2025-05-09 16:52:37,065 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15
2025-05-09 16:52:37,066 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.060576,34.760166,32.071472,34.775629', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 16:52:37,417 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15 HTTP/1.1" 200 None
2025-05-09 16:52:37,497 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15.
2025-05-09 16:52:37,497 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-09 16:52:37,499 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-09 16:52:37,499 - __main__ - INFO - Parsed 130 listings for bbox: 32.060576,34.760166,32.071472,34.775629.
2025-05-09 16:52:37,499 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 16:52:41,501 - __main__ - INFO - Fetching data for bbox 10/12: 32.057632,34.767177,32.068528,34.782639...
2025-05-09 16:52:41,502 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15
2025-05-09 16:52:41,502 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.057632,34.767177,32.068528,34.782639', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 16:52:41,844 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15 HTTP/1.1" 200 None
2025-05-09 16:52:41,942 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15.
2025-05-09 16:52:41,942 - src.listing_parser - INFO - Found 157 apartment items in the list. Attempting to parse...
2025-05-09 16:52:41,945 - src.listing_parser - INFO - Successfully parsed 157/157 listings.
2025-05-09 16:52:41,945 - __main__ - INFO - Parsed 157 listings for bbox: 32.057632,34.767177,32.068528,34.782639.
2025-05-09 16:52:41,945 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 16:52:45,947 - __main__ - INFO - Fetching data for bbox 11/12: 32.052334,34.760749,32.063151,34.776098...
2025-05-09 16:52:45,948 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15
2025-05-09 16:52:45,948 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.052334,34.760749,32.063151,34.776098', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 16:52:46,305 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15 HTTP/1.1" 200 None
2025-05-09 16:52:46,379 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15.
2025-05-09 16:52:46,380 - src.listing_parser - INFO - Found 177 apartment items in the list. Attempting to parse...
2025-05-09 16:52:46,383 - src.listing_parser - INFO - Successfully parsed 177/177 listings.
2025-05-09 16:52:46,383 - __main__ - INFO - Parsed 177 listings for bbox: 32.052334,34.760749,32.063151,34.776098.
2025-05-09 16:52:46,383 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 16:52:50,384 - __main__ - INFO - Fetching data for bbox 12/12: 32.066111,34.765788,32.070878,34.786357...
2025-05-09 16:52:50,385 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15
2025-05-09 16:52:50,385 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.066111,34.765788,32.070878,34.786357', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 16:52:50,724 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15 HTTP/1.1" 200 None
2025-05-09 16:52:50,794 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15.
2025-05-09 16:52:50,795 - src.listing_parser - INFO - Found 123 apartment items in the list. Attempting to parse...
2025-05-09 16:52:50,797 - src.listing_parser - INFO - Successfully parsed 123/123 listings.
2025-05-09 16:52:50,797 - __main__ - INFO - Parsed 123 listings for bbox: 32.066111,34.765788,32.070878,34.786357.
2025-05-09 16:52:50,797 - __main__ - INFO - Finished fetching. Total listings fetched across all bboxes (before deduplication): 1658
2025-05-09 16:52:50,797 - __main__ - INFO - Total unique apartments found after aggregation and deduplication: 366
2025-05-09 16:52:50,797 - __main__ - INFO - Found 16 new apartments potentially matching criteria.
2025-05-09 16:52:50,798 - __main__ - INFO - Attempting to notify for 16 apartments.
2025-05-09 16:52:50,798 - __main__ - INFO - Starting the notification process...
2025-05-09 16:52:50,798 - __main__ - INFO - Sending batch 1 with 5 apartments...
2025-05-09 16:52:50,798 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:52:50,798 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:52:50,813 - src.notifier - INFO - Sending notification for apartment 54492816 to chat -4741762001 (6 images)
2025-05-09 16:52:50,813 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `54492816`)\n------\n*Address:*   69 (  - )   \n*Price:* 7000\n*Rooms:* 2\n*Floor:* 0\n*Size:* 50 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/p7lp37ac)', media='https://img.yad2.co.il/Pic/202411/02/2_2/o/y2_1_05471_20241102103944.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202411/09/2_2/o/y2_2_06090_20241109144636.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202411/09/2_2/o/y2_3_09513_20241109144639.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202411/09/2_2/o/y2_4_06504_20241109144642.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202411/09/2_2/o/y2_5_01312_20241109144645.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202411/10/2_2/o/y2_6_03475_20241110081917.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:52:50,815 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:52:50,898 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fc86430>
2025-05-09 16:52:50,898 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fa8fe40> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:52:51,065 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fd00f70>
2025-05-09 16:52:51,066 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:52:51,067 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:52:51,067 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:52:51,067 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:52:51,067 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:52:56,069 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 16:52:56,069 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:52:56,070 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:52:56,071 - src.notifier - WARNING - Telegram request timed out for apartment 54492816. Will be retried next run if state saving failed or skipped.
2025-05-09 16:52:56,074 - __main__ - WARNING - Notifier returned False for apartment 54492816.
2025-05-09 16:52:56,074 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:52:56,074 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:52:56,090 - src.notifier - INFO - Sending notification for apartment 55365453 to chat -4741762001 (0 images)
2025-05-09 16:52:56,090 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': "*New Listing Found!* (ID: `55365453`)\n------\n*Address:*  '' 101 (  - )   \n*Price:* 6300\n*Rooms:* 2\n*Floor:* 2\n*Size:* 50 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/co0zx443)", 'link_preview_options': LinkPreviewOptions(is_disabled=False), 'parse_mode': 'Markdown'}`
2025-05-09 16:52:56,091 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:52:56,173 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fc86340>
2025-05-09 16:52:56,173 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fa8fe40> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:52:56,339 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fa720d0>
2025-05-09 16:52:56,339 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:52:56,340 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:52:56,340 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:52:56,340 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:52:56,341 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:53:01,342 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 16:53:01,343 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:53:01,343 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:53:01,343 - src.notifier - WARNING - Telegram request timed out for apartment 55365453. Will be retried next run if state saving failed or skipped.
2025-05-09 16:53:01,346 - __main__ - WARNING - Notifier returned False for apartment 55365453.
2025-05-09 16:53:01,346 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:53:01,347 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:53:01,362 - src.notifier - INFO - Sending notification for apartment 55365025 to chat -4741762001 (10 images)
2025-05-09 16:53:01,363 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55365025`)\n------\n*Address:*  (  - )   \n*Price:* 6500\n*Rooms:* 2\n*Floor:* 3\n*Size:* 65 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/nexiv96t)', media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010038_20250509130841.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010788_20250509130852.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010601_20250509130909.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010373_20250509130925.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010538_20250509130946.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010707_20250509130946.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010918_20250509130946.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010547_20250509130946.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010801_20250509130958.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010356_20250509131007.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:53:01,364 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:53:01,449 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fc86a30>
2025-05-09 16:53:01,449 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fa8fe40> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:53:01,613 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fc86a90>
2025-05-09 16:53:01,613 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:53:01,614 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:53:01,614 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:53:01,615 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:53:01,615 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:53:06,616 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 16:53:06,617 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:53:06,617 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:53:06,617 - src.notifier - WARNING - Telegram request timed out for apartment 55365025. Will be retried next run if state saving failed or skipped.
2025-05-09 16:53:06,620 - __main__ - WARNING - Notifier returned False for apartment 55365025.
2025-05-09 16:53:06,620 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:53:06,621 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:53:06,636 - src.notifier - INFO - Sending notification for apartment 55365169 to chat -4741762001 (4 images)
2025-05-09 16:53:06,637 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55365169`)\n------\n*Address:*   (  ,   )   \n*Price:* 7950\n*Rooms:* 2\n*Floor:* 0\n*Size:* 60 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/mjdiqwj1)', media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010815_20250509134902.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010166_20250509134902.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010174_20250509134902.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010432_20250509134902.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:53:06,638 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:53:06,717 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fc868e0>
2025-05-09 16:53:06,717 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fa8fe40> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:53:06,878 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fc86b20>
2025-05-09 16:53:06,879 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:53:06,880 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:53:06,880 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:53:06,880 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:53:06,880 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:53:11,881 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 16:53:11,882 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:53:11,882 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:53:11,882 - src.notifier - WARNING - Telegram request timed out for apartment 55365169. Will be retried next run if state saving failed or skipped.
2025-05-09 16:53:11,885 - __main__ - WARNING - Notifier returned False for apartment 55365169.
2025-05-09 16:53:11,885 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:53:11,886 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:53:11,900 - src.notifier - INFO - Sending notification for apartment 53641149 to chat -4741762001 (13 images)
2025-05-09 16:53:11,901 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `53641149`)\n------\n*Address:*    (  ,   )   \n*Price:* 7900\n*Rooms:* 2\n*Floor:* 3\n*Size:* 45 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/eaxpt7hv)', media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_11_SjHPR2hNAL_20250509.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_12_91t4ADNM34_20250509.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/06/2_6/o/y2_1pa_010862_20240506142044.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/06/2_6/o/y2_1pa_010442_20240506142109.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/06/2_6/o/y2_1pa_010236_20240506142110.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/06/2_6/o/y2_1pa_010032_20240506142106.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/06/2_6/o/y2_1pa_010032_20240506142108.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_13_74EGC5Ic95_20250509.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_14_cF02SZcnDe_20250509.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_15_qgBb0U9kbx_20250509.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:53:11,902 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:53:11,984 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fc86820>
2025-05-09 16:53:11,984 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fa8fe40> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:53:12,147 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fc86880>
2025-05-09 16:53:12,148 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:53:12,148 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:53:12,148 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:53:12,149 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:53:12,149 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:53:17,150 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 16:53:17,150 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:53:17,150 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:53:17,150 - src.notifier - WARNING - Telegram request timed out for apartment 53641149. Will be retried next run if state saving failed or skipped.
2025-05-09 16:53:17,153 - __main__ - WARNING - Notifier returned False for apartment 53641149.
2025-05-09 16:53:17,156 - src.state - INFO - Updated sent listings with batch 1 containing 5 listings.
2025-05-09 16:53:17,156 - __main__ - INFO - Waiting 10 seconds before sending the next batch...
2025-05-09 16:53:27,157 - __main__ - INFO - Sending batch 2 with 5 apartments...
2025-05-09 16:53:27,157 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:53:27,158 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:53:27,174 - src.notifier - INFO - Sending notification for apartment 55364387 to chat -4741762001 (7 images)
2025-05-09 16:53:27,175 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55364387`)\n------\n*Address:*   \n*Price:* 7750\n*Rooms:* 3\n*Floor:* 1\n*Size:* 80 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/mbg9d97b)', media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1_SfA5lW4VN1_20250509.jpg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_2_0yyM7ESZIM_20250509.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_3_WmD5Msp2xc_20250509.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_4_qtEYaEtHbX_20250509.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_5_Q32EtLDMiX_20250509.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_6_AtGSClZlzV_20250509.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_7_GS55oceWHx_20250509.jpg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:53:27,176 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:53:27,263 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fc86760>
2025-05-09 16:53:27,264 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fa8fe40> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:53:27,422 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fd00f70>
2025-05-09 16:53:27,423 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:53:27,423 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:53:27,423 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:53:27,424 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:53:27,424 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:53:27,515 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 13:53:27 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'111'), (b'Connection', b'keep-alive'), (b'Retry-After', b'34'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 16:53:27,515 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMediaGroup "HTTP/1.1 429 Too Many Requests"
2025-05-09 16:53:27,516 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 16:53:27,516 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 16:53:27,516 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:53:27,516 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:53:27,517 - src.notifier - WARNING - Telegram Flood control exceeded for 55364387. Need to retry after 34 seconds.
2025-05-09 16:53:27,517 - __main__ - WARNING - Rate limit hit for 55364387. Waiting 35 seconds before retrying...
2025-05-09 16:54:02,520 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:54:02,521 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:54:02,537 - src.notifier - INFO - Sending notification for apartment 47485125 to chat -4741762001 (11 images)
2025-05-09 16:54:02,538 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `47485125`)\n------\n*Address:*   (  ,   )   \n*Price:* 6500\n*Rooms:* 2\n*Floor:* 1\n*Size:* 45 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/3rj9yqc9)', media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_1_j7t7fyFU5U_20220713.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_2_YnbqXQ6XIX_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_3_s4u89oSSmC_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_4_bb_SyBUBre_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_5_SqwASCqPJr_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_6_VsDYXWknQv_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_7_z1k4w4qYGt_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_8_GGXUT4Sywv_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_9_7RgKRZ4dPJ_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_10_auyu7CSjVd_20220713.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:54:02,539 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:54:02,627 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fd9d1f0>
2025-05-09 16:54:02,627 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fb0bf90> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:54:02,784 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fc86970>
2025-05-09 16:54:02,784 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:54:02,785 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:54:02,785 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:54:02,785 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:54:02,785 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:54:07,787 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 16:54:07,787 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:54:07,788 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:54:07,788 - src.notifier - WARNING - Telegram request timed out for apartment 47485125. Will be retried next run if state saving failed or skipped.
2025-05-09 16:54:07,791 - __main__ - WARNING - Notifier returned False for apartment 47485125.
2025-05-09 16:54:07,791 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:54:07,791 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:54:07,807 - src.notifier - INFO - Sending notification for apartment 55364126 to chat -4741762001 (7 images)
2025-05-09 16:54:07,807 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55364126`)\n------\n*Address:*  9 (  - )   \n*Price:* 8000\n*Rooms:* 3\n*Floor:* 0\n*Size:* 87 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/vcln5hnm)', media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010971_20250509095110.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010702_20250509095106.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010619_20250509095107.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010788_20250509095108.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010039_20250509095109.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010123_20250509095110.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010926_20250509095111.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:54:07,808 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:54:07,887 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fd9d280>
2025-05-09 16:54:07,887 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fb0bf90> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:54:08,044 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fb02f70>
2025-05-09 16:54:08,045 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:54:08,045 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:54:08,046 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:54:08,046 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:54:08,046 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:54:13,048 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 16:54:13,048 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:54:13,049 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:54:13,049 - src.notifier - WARNING - Telegram request timed out for apartment 55364126. Will be retried next run if state saving failed or skipped.
2025-05-09 16:54:13,052 - __main__ - WARNING - Notifier returned False for apartment 55364126.
2025-05-09 16:54:13,052 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:54:13,052 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:54:13,067 - src.notifier - INFO - Sending notification for apartment 55327278 to chat -4741762001 (0 images)
2025-05-09 16:54:13,067 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*New Listing Found!* (ID: `55327278`)\n------\n*Address:*   7 (  -  )   \n*Price:* 7600\n*Rooms:* 2.5\n*Floor:* 3\n*Size:* 80 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/pol0mk4s)', 'link_preview_options': LinkPreviewOptions(is_disabled=False), 'parse_mode': 'Markdown'}`
2025-05-09 16:54:13,068 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:54:13,150 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fb02e20>
2025-05-09 16:54:13,150 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fb0bf90> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:54:13,307 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fb02e80>
2025-05-09 16:54:13,308 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:54:13,308 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:54:13,308 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:54:13,309 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:54:13,309 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:54:13,408 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 13:54:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1223'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 16:54:13,409 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-09 16:54:13,409 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 16:54:13,409 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 16:54:13,409 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:54:13,410 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:54:13,410 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2823, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746798853, 'text': 'New Listing Found! (ID: 55327278)\n------\nAddress:   7 (  -  )   \nPrice: 7600\nRooms: 2.5\nFloor: 3\nSize: 80 sqm\n------\nLink to Yad2', 'entities': [{'offset': 0, 'length': 18, 'type': 'bold'}, {'offset': 24, 'length': 8, 'type': 'code'}, {'offset': 41, 'length': 8, 'type': 'bold'}, {'offset': 101, 'length': 6, 'type': 'bold'}, {'offset': 113, 'length': 6, 'type': 'bold'}, {'offset': 124, 'length': 6, 'type': 'bold'}, {'offset': 133, 'length': 5, 'type': 'bold'}, {'offset': 153, 'length': 12, 'type': 'text_link', 'url': 'https://www.yad2.co.il/realestate/item/pol0mk4s'}], 'link_preview_options': {'url': 'https://www.yad2.co.il/realestate/item/pol0mk4s'}}`
2025-05-09 16:54:13,411 - src.notifier - DEBUG - Sent text-only message for 55327278.
2025-05-09 16:54:13,411 - src.notifier - INFO - Successfully sent notification for apartment 55327278
2025-05-09 16:54:13,412 - __main__ - DEBUG - Notification for 55327278 successful.
2025-05-09 16:54:13,412 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:54:13,412 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:54:13,427 - src.notifier - INFO - Sending notification for apartment 55362765 to chat -4741762001 (7 images)
2025-05-09 16:54:13,428 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55362765`)\n------\n*Address:*   ( )   \n*Price:* 7500\n*Rooms:* 2\n*Floor:* 0\n*Size:* 45 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/zvyt6u2n)', media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010864_20250508203959.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010118_20250508203959.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010221_20250508204000.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010566_20250508204000.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010335_20250508204000.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010824_20250508204000.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010522_20250508204000.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:54:13,429 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:54:13,513 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fd9d940>
2025-05-09 16:54:13,513 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fb0b3c0> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:54:13,677 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fd9d0a0>
2025-05-09 16:54:13,678 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:54:13,679 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:54:13,679 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:54:13,679 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:54:13,679 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:54:18,681 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 16:54:18,681 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:54:18,682 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:54:18,682 - src.notifier - WARNING - Telegram request timed out for apartment 55362765. Will be retried next run if state saving failed or skipped.
2025-05-09 16:54:18,685 - __main__ - WARNING - Notifier returned False for apartment 55362765.
2025-05-09 16:54:18,687 - src.state - INFO - Updated sent listings with batch 1 containing 5 listings.
2025-05-09 16:54:18,687 - __main__ - INFO - Waiting 10 seconds before sending the next batch...
2025-05-09 16:54:28,688 - __main__ - INFO - Sending batch 3 with 5 apartments...
2025-05-09 16:54:28,688 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:54:28,688 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:54:28,705 - src.notifier - INFO - Sending notification for apartment 55364523 to chat -4741762001 (5 images)
2025-05-09 16:54:28,706 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55364523`)\n------\n*Address:*  ()   \n*Price:* 7000\n*Rooms:* 2\n*Floor:* 1\n*Size:* 60 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/pu8dral1)', media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010542_20250509111926.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010929_20250509111926.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010034_20250509111926.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010450_20250509111927.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010631_20250509111926.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:54:28,706 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:54:28,790 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fcc3e50>
2025-05-09 16:54:28,790 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fb25120> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:54:28,949 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fa24d30>
2025-05-09 16:54:28,949 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:54:28,950 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:54:28,950 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:54:28,950 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:54:28,951 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:54:29,037 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 13:54:29 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'111'), (b'Connection', b'keep-alive'), (b'Retry-After', b'33'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 16:54:29,038 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMediaGroup "HTTP/1.1 429 Too Many Requests"
2025-05-09 16:54:29,038 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 16:54:29,038 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 16:54:29,038 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:54:29,039 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:54:29,039 - src.notifier - WARNING - Telegram Flood control exceeded for 55364523. Need to retry after 33 seconds.
2025-05-09 16:54:29,039 - __main__ - WARNING - Rate limit hit for 55364523. Waiting 34 seconds before retrying...
2025-05-09 16:55:03,042 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:55:03,042 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:55:03,058 - src.notifier - INFO - Sending notification for apartment 55364705 to chat -4741762001 (11 images)
2025-05-09 16:55:03,059 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55364705`)\n------\n*Address:*  12 ()   \n*Price:* 5900\n*Rooms:* 2\n*Floor:* 1\n*Size:* 40 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/lgfj0n7k)', media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010906_20250509115312.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010029_20250509115251.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010254_20250509115343.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010990_20250509115342.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_09999_20250509115318.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010724_20250509115344.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010080_20250509115323.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010507_20250509115350.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010069_20250509115339.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010121_20250509115350.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:55:03,060 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:55:03,140 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fb02310>
2025-05-09 16:55:03,140 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fb254a0> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:55:03,294 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fd9d8e0>
2025-05-09 16:55:03,295 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:55:03,296 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:55:03,296 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:55:03,296 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:55:03,296 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:55:08,298 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 16:55:08,298 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:55:08,299 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:55:08,299 - src.notifier - WARNING - Telegram request timed out for apartment 55364705. Will be retried next run if state saving failed or skipped.
2025-05-09 16:55:08,302 - __main__ - WARNING - Notifier returned False for apartment 55364705.
2025-05-09 16:55:08,302 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:55:08,302 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:55:08,317 - src.notifier - INFO - Sending notification for apartment 55243066 to chat -4741762001 (8 images)
2025-05-09 16:55:08,318 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55243066`)\n------\n*Address:*   ( ,   )   \n*Price:* 7600\n*Rooms:* 2\n*Floor:* 7\n*Size:* 50 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/ke38hpye)', media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010965_20250409191050.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010653_20250409191049.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010398_20250409191050.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010491_20250409191049.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010003_20250409191050.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010607_20250409191050.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010410_20250409191050.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010546_20250409191050.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:55:08,319 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:55:08,403 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fb028b0>
2025-05-09 16:55:08,403 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fb254a0> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:55:08,572 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fd23670>
2025-05-09 16:55:08,573 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:55:08,573 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:55:08,573 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:55:08,574 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:55:08,574 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:55:13,576 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 16:55:13,576 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:55:13,577 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:55:13,577 - src.notifier - WARNING - Telegram request timed out for apartment 55243066. Will be retried next run if state saving failed or skipped.
2025-05-09 16:55:13,580 - __main__ - WARNING - Notifier returned False for apartment 55243066.
2025-05-09 16:55:13,580 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:55:13,580 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:55:13,595 - src.notifier - INFO - Sending notification for apartment 54214837 to chat -4741762001 (8 images)
2025-05-09 16:55:13,596 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `54214837`)\n------\n*Address:*  ()   \n*Price:* 4500\n*Rooms:* 2\n*Floor:* 0\n*Size:* 52 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/1oicjdsu)', media='https://img.yad2.co.il/Pic/202408/11/2_6/o/y2_1_CJu1X5BDVg_20240811.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/11/2_6/o/y2_2_q9SIQq_5Vf_20240811.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/11/2_6/o/y2_3_FutDP6gUYf_20240811.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/11/2_6/o/y2_4_YEkt6i_lUs_20240811.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/11/2_6/o/y2_5_0AYQ73xjG4_20240811.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/11/2_6/o/y2_6_FJ5vCbujvr_20240811.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/11/2_6/o/y2_7_DIxBJbdjfY_20240811.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/11/2_6/o/y2_8_S0EsHG9uef_20240811.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:55:13,597 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:55:13,676 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fb02910>
2025-05-09 16:55:13,676 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fb254a0> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:55:13,832 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fb02220>
2025-05-09 16:55:13,832 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:55:13,833 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:55:13,833 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:55:13,833 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:55:13,833 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:55:18,835 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 16:55:18,835 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:55:18,836 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:55:18,836 - src.notifier - WARNING - Telegram request timed out for apartment 54214837. Will be retried next run if state saving failed or skipped.
2025-05-09 16:55:18,839 - __main__ - WARNING - Notifier returned False for apartment 54214837.
2025-05-09 16:55:18,839 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:55:18,839 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:55:18,855 - src.notifier - INFO - Sending notification for apartment 55365437 to chat -4741762001 (5 images)
2025-05-09 16:55:18,855 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55365437`)\n------\n*Address:*   ( ,   )   \n*Price:* 6000\n*Rooms:* 2.5\n*Floor:* 1\n*Size:* 65 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/odjg9b96)', media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1_kWYJnt9pAy_20250509.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_2_kPzzzSDUEW_20250509.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_3_oEQDhqOLBq_20250509.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_4_LARMY51oxt_20250509.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_5_TbCJLeVdH2_20250509.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:55:18,856 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:55:18,938 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fb024c0>
2025-05-09 16:55:18,938 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fb254a0> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:55:19,100 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fb02100>
2025-05-09 16:55:19,100 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:55:19,101 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:55:19,101 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:55:19,101 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:55:19,101 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:55:19,189 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 13:55:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'111'), (b'Connection', b'keep-alive'), (b'Retry-After', b'44'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 16:55:19,189 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMediaGroup "HTTP/1.1 429 Too Many Requests"
2025-05-09 16:55:19,190 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 16:55:19,190 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 16:55:19,190 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:55:19,190 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:55:19,191 - src.notifier - WARNING - Telegram Flood control exceeded for 55365437. Need to retry after 44 seconds.
2025-05-09 16:55:19,191 - __main__ - WARNING - Rate limit hit for 55365437. Waiting 45 seconds before retrying...
2025-05-09 16:56:04,197 - src.state - INFO - Updated sent listings with batch 1 containing 5 listings.
2025-05-09 16:56:04,197 - __main__ - INFO - Waiting 10 seconds before sending the next batch...
2025-05-09 16:56:14,198 - __main__ - INFO - Sending batch 4 with 1 apartments...
2025-05-09 16:56:14,199 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:56:14,199 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:56:14,216 - src.notifier - INFO - Sending notification for apartment 52255271 to chat -4741762001 (12 images)
2025-05-09 16:56:14,217 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `52255271`)\n------\n*Address:*  49 ()   \n*Price:* 5400\n*Rooms:* 2\n*Floor:* 4\n*Size:* 45 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/a64xsr4r)', media='https://img.yad2.co.il/Pic/202405/29/2_6/o/y2_1_u0Ygqza2O0_20240529.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202311/29/2_6/o/y2_2_Uw6HlAwFsN_20231129.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/29/2_6/o/y2_3_4ESXru2k3M_20240529.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202311/29/2_6/o/y2_3_ZYyHvsS3dZ_20231129.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/29/2_6/o/y2_4_APjtYi7RMf_20240529.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/29/2_6/o/y2_5_4JnwXmG9x0_20240529.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/29/2_6/o/y2_6_j3C7n4KRpL_20240529.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/29/2_6/o/y2_7_BESMmxpeXO_20240529.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/29/2_6/o/y2_8_w76J2zS0_i_20240529.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/29/2_6/o/y2_9_SPM1rIkVNG_20240529.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 16:56:14,218 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:56:14,296 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fd23850>
2025-05-09 16:56:14,297 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fb259e0> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:56:14,453 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fd236d0>
2025-05-09 16:56:14,453 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:56:14,454 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:56:14,454 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:56:14,455 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:56:14,455 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:56:19,455 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 16:56:19,455 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:56:19,456 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:56:19,456 - src.notifier - WARNING - Telegram request timed out for apartment 52255271. Will be retried next run if state saving failed or skipped.
2025-05-09 16:56:19,458 - __main__ - WARNING - Notifier returned False for apartment 52255271.
2025-05-09 16:56:19,460 - src.state - INFO - Updated sent listings with batch 1 containing 1 listings.
2025-05-09 16:56:19,460 - __main__ - INFO - Notification process completed.
2025-05-09 16:56:19,460 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:56:19,460 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 16:56:19,475 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Finished* - Current amount saw is 502', 'parse_mode': 'Markdown'}`
2025-05-09 16:56:19,476 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 16:56:19,555 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fd9a880>
2025-05-09 16:56:19,555 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10fb259e0> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 16:56:19,711 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10fd9ab80>
2025-05-09 16:56:19,711 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 16:56:19,712 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 16:56:19,712 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 16:56:19,712 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 16:56:19,712 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 16:56:24,714 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 16:56:24,714 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 16:56:24,714 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 16:56:24,714 - src.notifier - ERROR - Failed to send message: *Search Finished* - Current amount saw is 502. Error: Timed out
Traceback (most recent call last):
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/http11.py", line 136, in handle_async_request
    raise exc
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_backends/anyio.py", line 37, in read
    return b""
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_httpxrequest.py", line 277, in do_request
    res = await self._client.request(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zeev/Desktop/code/yad-2-to-telegram/src/notifier.py", line 158, in send_telegram_message
    await bot.send_message(chat_id=chat_id, text=message, parse_mode="Markdown")
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 1091, in send_message
    return await self._send_message(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 803, in _send_message
    result = await self._post(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 691, in _post
    return await self._do_post(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 720, in _do_post
    result = await request.post(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_httpxrequest.py", line 294, in do_request
    raise TimedOut from err
telegram.error.TimedOut: Timed out
2025-05-09 16:56:24,760 - __main__ - INFO - Notification process completed.
2025-05-09 16:56:24,761 - __main__ - INFO - Notification summary: 1 sent, 12 failed.
2025-05-09 16:56:24,761 - __main__ - INFO - Attempting to save updated state with 502 total sent IDs and timestamps.
2025-05-09 16:56:24,766 - src.state - INFO - Successfully saved state for 502 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-09 16:56:24,766 - __main__ - INFO - Attempting to save state for 502 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-09 16:56:24,768 - src.state - INFO - Successfully saved state for 502 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-09 16:56:24,768 - __main__ - INFO - Apartment check run finished.
2025-05-09 16:56:24,770 - __main__ - INFO - Yad2 Apartment Notifier script finished.
/Users/zeev/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
2025-05-09 18:22:01,398 - __main__ - INFO - Starting Yad2 Apartment Notifier script.
sys.path: ['/Users/zeev/Desktop/code/yad-2-to-telegram', '/Users/zeev/Desktop/code/yad-2-to-telegram/src', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python39.zip', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/lib-dynload', '/Users/zeev/Library/Python/3.9/lib/python/site-packages', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/site-packages']
2025-05-09 18:22:01,398 - asyncio - DEBUG - Using selector: KqueueSelector
2025-05-09 18:22:01,398 - __main__ - INFO - Starting apartment check run...
2025-05-09 18:22:01,398 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 18:22:01,398 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 18:22:01,493 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Initiated*', 'parse_mode': 'Markdown'}`
2025-05-09 18:22:01,498 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 18:22:01,606 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103a76430>
2025-05-09 18:22:01,606 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x103a2dac0> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 18:22:01,770 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103a6b220>
2025-05-09 18:22:01,771 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 18:22:01,771 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 18:22:01,772 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 18:22:01,772 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 18:22:01,772 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 18:22:01,905 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 15:22:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'465'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 18:22:01,906 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-09 18:22:01,906 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 18:22:01,907 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 18:22:01,907 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 18:22:01,907 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 18:22:01,908 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2842, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746804122, 'text': 'Search Initiated', 'entities': [{'offset': 0, 'length': 16, 'type': 'bold'}]}`
2025-05-09 18:22:01,908 - src.notifier - INFO - Successfully sent message: *Search Initiated*
2025-05-09 18:22:01,912 - src.state - INFO - Loaded 502 sent listing states (ID -> timestamp) from /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-09 18:22:01,912 - __main__ - INFO - Fetching data for bbox 1/12: 32.075192,34.763754,32.086468,34.779760...
2025-05-09 18:22:01,913 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15
2025-05-09 18:22:01,913 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075192,34.763754,32.086468,34.779760', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 18:22:01,930 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): gw.yad2.co.il:443
2025-05-09 18:22:02,582 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15 HTTP/1.1" 200 None
2025-05-09 18:22:02,653 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15.
2025-05-09 18:22:02,653 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-09 18:22:02,656 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-09 18:22:02,656 - __main__ - INFO - Parsed 130 listings for bbox: 32.075192,34.763754,32.086468,34.779760.
2025-05-09 18:22:02,656 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 18:22:06,657 - __main__ - INFO - Fetching data for bbox 2/12: 32.075076,34.771885,32.086353,34.787891...
2025-05-09 18:22:06,658 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15
2025-05-09 18:22:06,658 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075076,34.771885,32.086353,34.787891', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 18:22:07,088 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15 HTTP/1.1" 200 None
2025-05-09 18:22:07,158 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15.
2025-05-09 18:22:07,158 - src.listing_parser - INFO - Found 149 apartment items in the list. Attempting to parse...
2025-05-09 18:22:07,161 - src.listing_parser - INFO - Successfully parsed 149/149 listings.
2025-05-09 18:22:07,161 - __main__ - INFO - Parsed 149 listings for bbox: 32.075076,34.771885,32.086353,34.787891.
2025-05-09 18:22:07,161 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 18:22:11,163 - __main__ - INFO - Fetching data for bbox 3/12: 32.076017,34.781501,32.084821,34.793997...
2025-05-09 18:22:11,163 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15
2025-05-09 18:22:11,163 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.076017,34.781501,32.084821,34.793997', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 18:22:11,592 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15 HTTP/1.1" 200 None
2025-05-09 18:22:11,663 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15.
2025-05-09 18:22:11,663 - src.listing_parser - INFO - Found 144 apartment items in the list. Attempting to parse...
2025-05-09 18:22:11,666 - src.listing_parser - INFO - Successfully parsed 144/144 listings.
2025-05-09 18:22:11,666 - __main__ - INFO - Parsed 144 listings for bbox: 32.076017,34.781501,32.084821,34.793997.
2025-05-09 18:22:11,666 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 18:22:15,668 - __main__ - INFO - Fetching data for bbox 4/12: 32.080523,34.782766,32.088978,34.794767...
2025-05-09 18:22:15,669 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15
2025-05-09 18:22:15,669 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.080523,34.782766,32.088978,34.794767', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 18:22:16,098 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15 HTTP/1.1" 200 None
2025-05-09 18:22:16,167 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15.
2025-05-09 18:22:16,168 - src.listing_parser - INFO - Found 148 apartment items in the list. Attempting to parse...
2025-05-09 18:22:16,170 - src.listing_parser - INFO - Successfully parsed 148/148 listings.
2025-05-09 18:22:16,170 - __main__ - INFO - Parsed 148 listings for bbox: 32.080523,34.782766,32.088978,34.794767.
2025-05-09 18:22:16,170 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 18:22:20,171 - __main__ - INFO - Fetching data for bbox 5/12: 32.068977,34.760081,32.081317,34.777596...
2025-05-09 18:22:20,172 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15
2025-05-09 18:22:20,172 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.068977,34.760081,32.081317,34.777596', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 18:22:20,605 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15 HTTP/1.1" 200 None
2025-05-09 18:22:20,673 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15.
2025-05-09 18:22:20,674 - src.listing_parser - INFO - Found 124 apartment items in the list. Attempting to parse...
2025-05-09 18:22:20,676 - src.listing_parser - INFO - Successfully parsed 124/124 listings.
2025-05-09 18:22:20,677 - __main__ - INFO - Parsed 124 listings for bbox: 32.068977,34.760081,32.081317,34.777596.
2025-05-09 18:22:20,677 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 18:22:24,677 - __main__ - INFO - Fetching data for bbox 6/12: 32.067273,34.764900,32.079614,34.782414...
2025-05-09 18:22:24,678 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15
2025-05-09 18:22:24,679 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.067273,34.764900,32.079614,34.782414', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 18:22:25,036 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15 HTTP/1.1" 200 None
2025-05-09 18:22:25,174 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15.
2025-05-09 18:22:25,174 - src.listing_parser - INFO - Found 126 apartment items in the list. Attempting to parse...
2025-05-09 18:22:25,177 - src.listing_parser - INFO - Successfully parsed 126/126 listings.
2025-05-09 18:22:25,177 - __main__ - INFO - Parsed 126 listings for bbox: 32.067273,34.764900,32.079614,34.782414.
2025-05-09 18:22:25,177 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 18:22:29,178 - __main__ - INFO - Fetching data for bbox 7/12: 32.065226,34.770869,32.077566,34.788383...
2025-05-09 18:22:29,179 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15
2025-05-09 18:22:29,179 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.065226,34.770869,32.077566,34.788383', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 18:22:29,615 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15 HTTP/1.1" 200 None
2025-05-09 18:22:29,684 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15.
2025-05-09 18:22:29,684 - src.listing_parser - INFO - Found 120 apartment items in the list. Attempting to parse...
2025-05-09 18:22:29,687 - src.listing_parser - INFO - Successfully parsed 120/120 listings.
2025-05-09 18:22:29,687 - __main__ - INFO - Parsed 120 listings for bbox: 32.065226,34.770869,32.077566,34.788383.
2025-05-09 18:22:29,687 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 18:22:33,688 - __main__ - INFO - Fetching data for bbox 8/12: 32.064591,34.775937,32.076932,34.793451...
2025-05-09 18:22:33,688 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15
2025-05-09 18:22:33,689 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.064591,34.775937,32.076932,34.793451', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 18:22:34,038 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15 HTTP/1.1" 200 None
2025-05-09 18:22:34,110 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15.
2025-05-09 18:22:34,110 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-09 18:22:34,113 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-09 18:22:34,113 - __main__ - INFO - Parsed 130 listings for bbox: 32.064591,34.775937,32.076932,34.793451.
2025-05-09 18:22:34,113 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 18:22:38,114 - __main__ - INFO - Fetching data for bbox 9/12: 32.060576,34.760166,32.071472,34.775629...
2025-05-09 18:22:38,115 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15
2025-05-09 18:22:38,115 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.060576,34.760166,32.071472,34.775629', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 18:22:38,524 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15 HTTP/1.1" 200 None
2025-05-09 18:22:38,610 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15.
2025-05-09 18:22:38,610 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-09 18:22:38,612 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-09 18:22:38,612 - __main__ - INFO - Parsed 130 listings for bbox: 32.060576,34.760166,32.071472,34.775629.
2025-05-09 18:22:38,612 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 18:22:42,613 - __main__ - INFO - Fetching data for bbox 10/12: 32.057632,34.767177,32.068528,34.782639...
2025-05-09 18:22:42,614 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15
2025-05-09 18:22:42,614 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.057632,34.767177,32.068528,34.782639', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 18:22:43,030 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15 HTTP/1.1" 200 None
2025-05-09 18:22:43,102 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15.
2025-05-09 18:22:43,102 - src.listing_parser - INFO - Found 157 apartment items in the list. Attempting to parse...
2025-05-09 18:22:43,105 - src.listing_parser - INFO - Successfully parsed 157/157 listings.
2025-05-09 18:22:43,105 - __main__ - INFO - Parsed 157 listings for bbox: 32.057632,34.767177,32.068528,34.782639.
2025-05-09 18:22:43,105 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 18:22:47,106 - __main__ - INFO - Fetching data for bbox 11/12: 32.052334,34.760749,32.063151,34.776098...
2025-05-09 18:22:47,107 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15
2025-05-09 18:22:47,107 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.052334,34.760749,32.063151,34.776098', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 18:22:47,740 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15 HTTP/1.1" 200 None
2025-05-09 18:22:47,875 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15.
2025-05-09 18:22:47,876 - src.listing_parser - INFO - Found 177 apartment items in the list. Attempting to parse...
2025-05-09 18:22:47,879 - src.listing_parser - INFO - Successfully parsed 177/177 listings.
2025-05-09 18:22:47,879 - __main__ - INFO - Parsed 177 listings for bbox: 32.052334,34.760749,32.063151,34.776098.
2025-05-09 18:22:47,879 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 18:22:51,880 - __main__ - INFO - Fetching data for bbox 12/12: 32.066111,34.765788,32.070878,34.786357...
2025-05-09 18:22:51,881 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15
2025-05-09 18:22:51,881 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.066111,34.765788,32.070878,34.786357', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 18:22:52,247 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15 HTTP/1.1" 200 None
2025-05-09 18:22:52,318 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15.
2025-05-09 18:22:52,319 - src.listing_parser - INFO - Found 123 apartment items in the list. Attempting to parse...
2025-05-09 18:22:52,321 - src.listing_parser - INFO - Successfully parsed 123/123 listings.
2025-05-09 18:22:52,321 - __main__ - INFO - Parsed 123 listings for bbox: 32.066111,34.765788,32.070878,34.786357.
2025-05-09 18:22:52,321 - __main__ - INFO - Finished fetching. Total listings fetched across all bboxes (before deduplication): 1658
2025-05-09 18:22:52,321 - __main__ - INFO - Total unique apartments found after aggregation and deduplication: 377
2025-05-09 18:22:52,322 - __main__ - INFO - Found 4 new apartments potentially matching criteria.
2025-05-09 18:22:52,322 - __main__ - INFO - Attempting to notify for 4 apartments.
2025-05-09 18:22:52,322 - __main__ - INFO - Starting the notification process...
2025-05-09 18:22:52,322 - __main__ - INFO - Sending batch 1 with 4 apartments...
2025-05-09 18:22:52,322 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 18:22:52,322 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 18:22:52,337 - src.notifier - INFO - Sending notification for apartment 55362897 to chat -4741762001 (10 images)
2025-05-09 18:22:52,338 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55362897`)\n------\n*Address:*  ()   \n*Price:* 5000\n*Rooms:* 2\n*Floor:* 0\n*Size:* 35 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/tucgq933)', media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010103_20250508211019.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010605_20250508211019.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010775_20250508211019.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010182_20250508211019.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010450_20250508211019.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010048_20250508211019.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010478_20250508211020.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010682_20250508211020.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010839_20250508211020.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010868_20250508211020.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 18:22:52,339 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 18:22:52,421 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103d4d580>
2025-05-09 18:22:52,421 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x103b35660> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 18:22:52,582 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103d29f70>
2025-05-09 18:22:52,582 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 18:22:52,583 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 18:22:52,583 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 18:22:52,583 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 18:22:52,584 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 18:22:57,584 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 18:22:57,584 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 18:22:57,585 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 18:22:57,585 - src.notifier - WARNING - Telegram request timed out for apartment 55362897. Will be retried next run if state saving failed or skipped.
2025-05-09 18:22:57,588 - __main__ - WARNING - Notifier returned False for apartment 55362897.
2025-05-09 18:22:57,588 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 18:22:57,588 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 18:22:57,604 - src.notifier - INFO - Sending notification for apartment 55362475 to chat -4741762001 (12 images)
2025-05-09 18:22:57,605 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55362475`)\n------\n*Address:*  17 ( ,   )   \n*Price:* 7500\n*Rooms:* 2\n*Floor:* 6\n*Size:* 75 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/a7alkrcf)', media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010700_20250508192952.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010670_20250508192948.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010314_20250508192949.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010293_20250508192949.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010306_20250508192949.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010559_20250508192950.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010549_20250508192953.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010560_20250508192951.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010099_20250508192952.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010628_20250508192953.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 18:22:57,606 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 18:22:57,681 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103d4d250>
2025-05-09 18:22:57,682 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x103b35a50> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 18:22:57,833 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103a761c0>
2025-05-09 18:22:57,834 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 18:22:57,834 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 18:22:57,834 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 18:22:57,835 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 18:22:57,835 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 18:23:02,836 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 18:23:02,837 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 18:23:02,838 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 18:23:02,838 - src.notifier - WARNING - Telegram request timed out for apartment 55362475. Will be retried next run if state saving failed or skipped.
2025-05-09 18:23:02,841 - __main__ - WARNING - Notifier returned False for apartment 55362475.
2025-05-09 18:23:02,841 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 18:23:02,841 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 18:23:02,856 - src.notifier - INFO - Sending notification for apartment 55365780 to chat -4741762001 (6 images)
2025-05-09 18:23:02,857 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55365780`)\n------\n*Address:*    \n*Price:* 6500\n*Rooms:* 2\n*Floor:* 5\n*Size:* 70 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/ltlif6lv)', media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010684_20250509165738.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010839_20250509165738.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010525_20250509165738.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010611_20250509165738.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010737_20250509165739.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010250_20250509165739.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 18:23:02,858 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 18:23:02,935 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103d4da00>
2025-05-09 18:23:02,935 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x103b35660> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 18:23:03,088 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103d4d430>
2025-05-09 18:23:03,089 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 18:23:03,089 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 18:23:03,089 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 18:23:03,090 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 18:23:03,090 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 18:23:08,091 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 18:23:08,092 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 18:23:08,092 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 18:23:08,093 - src.notifier - WARNING - Telegram request timed out for apartment 55365780. Will be retried next run if state saving failed or skipped.
2025-05-09 18:23:08,095 - __main__ - WARNING - Notifier returned False for apartment 55365780.
2025-05-09 18:23:08,096 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 18:23:08,096 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 18:23:08,111 - src.notifier - INFO - Sending notification for apartment 55243222 to chat -4741762001 (8 images)
2025-05-09 18:23:08,112 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55243222`)\n------\n*Address:*  ( ,   )   \n*Price:* 7200\n*Rooms:* 2.5\n*Floor:* 3\n*Size:* 50 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/fsfqgtd6)', media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010032_20250409200108.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010504_20250409200109.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010493_20250409200109.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010792_20250409200109.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010682_20250409200109.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010430_20250409200109.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010164_20250409200109.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/09/2_6/o/y2_1pa_010585_20250409200109.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 18:23:08,113 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 18:23:08,201 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103d4d850>
2025-05-09 18:23:08,201 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x103b35a50> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 18:23:08,366 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103d4d3a0>
2025-05-09 18:23:08,366 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 18:23:08,367 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 18:23:08,367 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 18:23:08,367 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 18:23:08,367 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 18:23:13,369 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 18:23:13,369 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 18:23:13,370 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 18:23:13,370 - src.notifier - WARNING - Telegram request timed out for apartment 55243222. Will be retried next run if state saving failed or skipped.
2025-05-09 18:23:13,373 - __main__ - WARNING - Notifier returned False for apartment 55243222.
2025-05-09 18:23:13,375 - src.state - INFO - Updated sent listings with batch 1 containing 4 listings.
2025-05-09 18:23:13,375 - __main__ - INFO - Notification process completed.
2025-05-09 18:23:13,376 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 18:23:13,376 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 18:23:13,390 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Finished* - Current amount saw is 506', 'parse_mode': 'Markdown'}`
2025-05-09 18:23:13,391 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 18:23:13,469 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103d4d0a0>
2025-05-09 18:23:13,470 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x103b35660> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 18:23:13,629 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x103d4d610>
2025-05-09 18:23:13,630 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 18:23:13,630 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 18:23:13,631 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 18:23:13,631 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 18:23:13,631 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 18:23:13,725 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 15:23:13 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'492'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 18:23:13,726 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-09 18:23:13,726 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 18:23:13,726 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 18:23:13,727 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 18:23:13,727 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 18:23:13,727 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2843, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746804193, 'text': 'Search Finished - Current amount saw is 506', 'entities': [{'offset': 0, 'length': 15, 'type': 'bold'}]}`
2025-05-09 18:23:13,728 - src.notifier - INFO - Successfully sent message: *Search Finished* - Current amount saw is 506
2025-05-09 18:23:13,729 - __main__ - INFO - Notification process completed.
2025-05-09 18:23:13,729 - __main__ - INFO - Notification summary: 0 sent, 4 failed.
2025-05-09 18:23:13,729 - __main__ - INFO - Attempting to save updated state with 506 total sent IDs and timestamps.
2025-05-09 18:23:13,733 - src.state - INFO - Successfully saved state for 506 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-09 18:23:13,733 - __main__ - INFO - Attempting to save state for 506 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-09 18:23:13,735 - src.state - INFO - Successfully saved state for 506 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-09 18:23:13,735 - __main__ - INFO - Apartment check run finished.
2025-05-09 18:23:13,737 - __main__ - INFO - Yad2 Apartment Notifier script finished.
/Users/zeev/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
2025-05-09 19:22:00,702 - __main__ - INFO - Starting Yad2 Apartment Notifier script.
sys.path: ['/Users/zeev/Desktop/code/yad-2-to-telegram', '/Users/zeev/Desktop/code/yad-2-to-telegram/src', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python39.zip', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/lib-dynload', '/Users/zeev/Library/Python/3.9/lib/python/site-packages', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/site-packages']
2025-05-09 19:22:00,702 - asyncio - DEBUG - Using selector: KqueueSelector
2025-05-09 19:22:00,703 - __main__ - INFO - Starting apartment check run...
2025-05-09 19:22:00,703 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 19:22:00,703 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 19:22:00,801 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Initiated*', 'parse_mode': 'Markdown'}`
2025-05-09 19:22:00,806 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 19:22:00,905 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1048d6430>
2025-05-09 19:22:00,905 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10488dac0> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 19:22:01,062 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1048cb220>
2025-05-09 19:22:01,063 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 19:22:01,063 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 19:22:01,063 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 19:22:01,063 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 19:22:01,064 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 19:22:01,171 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 16:22:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'465'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 19:22:01,172 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-09 19:22:01,172 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 19:22:01,172 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 19:22:01,172 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 19:22:01,173 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 19:22:01,173 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2858, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746807721, 'text': 'Search Initiated', 'entities': [{'offset': 0, 'length': 16, 'type': 'bold'}]}`
2025-05-09 19:22:01,174 - src.notifier - INFO - Successfully sent message: *Search Initiated*
2025-05-09 19:22:01,177 - src.state - INFO - Loaded 506 sent listing states (ID -> timestamp) from /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-09 19:22:01,177 - __main__ - INFO - Fetching data for bbox 1/12: 32.075192,34.763754,32.086468,34.779760...
2025-05-09 19:22:01,178 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15
2025-05-09 19:22:01,178 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075192,34.763754,32.086468,34.779760', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 19:22:01,197 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): gw.yad2.co.il:443
2025-05-09 19:22:01,752 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15 HTTP/1.1" 200 None
2025-05-09 19:22:01,830 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15.
2025-05-09 19:22:01,830 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-09 19:22:01,832 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-09 19:22:01,832 - __main__ - INFO - Parsed 130 listings for bbox: 32.075192,34.763754,32.086468,34.779760.
2025-05-09 19:22:01,832 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 19:22:05,833 - __main__ - INFO - Fetching data for bbox 2/12: 32.075076,34.771885,32.086353,34.787891...
2025-05-09 19:22:05,834 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15
2025-05-09 19:22:05,835 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075076,34.771885,32.086353,34.787891', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 19:22:06,213 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15 HTTP/1.1" 200 None
2025-05-09 19:22:06,282 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15.
2025-05-09 19:22:06,283 - src.listing_parser - INFO - Found 149 apartment items in the list. Attempting to parse...
2025-05-09 19:22:06,285 - src.listing_parser - INFO - Successfully parsed 149/149 listings.
2025-05-09 19:22:06,285 - __main__ - INFO - Parsed 149 listings for bbox: 32.075076,34.771885,32.086353,34.787891.
2025-05-09 19:22:06,286 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 19:22:10,286 - __main__ - INFO - Fetching data for bbox 3/12: 32.076017,34.781501,32.084821,34.793997...
2025-05-09 19:22:10,287 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15
2025-05-09 19:22:10,287 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.076017,34.781501,32.084821,34.793997', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 19:22:10,720 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15 HTTP/1.1" 200 None
2025-05-09 19:22:10,788 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15.
2025-05-09 19:22:10,789 - src.listing_parser - INFO - Found 144 apartment items in the list. Attempting to parse...
2025-05-09 19:22:10,791 - src.listing_parser - INFO - Successfully parsed 144/144 listings.
2025-05-09 19:22:10,792 - __main__ - INFO - Parsed 144 listings for bbox: 32.076017,34.781501,32.084821,34.793997.
2025-05-09 19:22:10,792 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 19:22:14,793 - __main__ - INFO - Fetching data for bbox 4/12: 32.080523,34.782766,32.088978,34.794767...
2025-05-09 19:22:14,794 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15
2025-05-09 19:22:14,794 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.080523,34.782766,32.088978,34.794767', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 19:22:15,225 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15 HTTP/1.1" 200 None
2025-05-09 19:22:15,295 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15.
2025-05-09 19:22:15,295 - src.listing_parser - INFO - Found 148 apartment items in the list. Attempting to parse...
2025-05-09 19:22:15,298 - src.listing_parser - INFO - Successfully parsed 148/148 listings.
2025-05-09 19:22:15,298 - __main__ - INFO - Parsed 148 listings for bbox: 32.080523,34.782766,32.088978,34.794767.
2025-05-09 19:22:15,298 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 19:22:19,299 - __main__ - INFO - Fetching data for bbox 5/12: 32.068977,34.760081,32.081317,34.777596...
2025-05-09 19:22:19,300 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15
2025-05-09 19:22:19,301 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.068977,34.760081,32.081317,34.777596', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 19:22:19,633 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15 HTTP/1.1" 200 None
2025-05-09 19:22:19,737 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15.
2025-05-09 19:22:19,738 - src.listing_parser - INFO - Found 124 apartment items in the list. Attempting to parse...
2025-05-09 19:22:19,740 - src.listing_parser - INFO - Successfully parsed 124/124 listings.
2025-05-09 19:22:19,740 - __main__ - INFO - Parsed 124 listings for bbox: 32.068977,34.760081,32.081317,34.777596.
2025-05-09 19:22:19,740 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 19:22:23,742 - __main__ - INFO - Fetching data for bbox 6/12: 32.067273,34.764900,32.079614,34.782414...
2025-05-09 19:22:23,743 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15
2025-05-09 19:22:23,743 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.067273,34.764900,32.079614,34.782414', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 19:22:24,133 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15 HTTP/1.1" 200 None
2025-05-09 19:22:24,202 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15.
2025-05-09 19:22:24,202 - src.listing_parser - INFO - Found 126 apartment items in the list. Attempting to parse...
2025-05-09 19:22:24,205 - src.listing_parser - INFO - Successfully parsed 126/126 listings.
2025-05-09 19:22:24,205 - __main__ - INFO - Parsed 126 listings for bbox: 32.067273,34.764900,32.079614,34.782414.
2025-05-09 19:22:24,205 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 19:22:28,206 - __main__ - INFO - Fetching data for bbox 7/12: 32.065226,34.770869,32.077566,34.788383...
2025-05-09 19:22:28,207 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15
2025-05-09 19:22:28,207 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.065226,34.770869,32.077566,34.788383', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 19:22:28,741 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15 HTTP/1.1" 200 None
2025-05-09 19:22:28,812 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15.
2025-05-09 19:22:28,813 - src.listing_parser - INFO - Found 120 apartment items in the list. Attempting to parse...
2025-05-09 19:22:28,815 - src.listing_parser - INFO - Successfully parsed 120/120 listings.
2025-05-09 19:22:28,815 - __main__ - INFO - Parsed 120 listings for bbox: 32.065226,34.770869,32.077566,34.788383.
2025-05-09 19:22:28,815 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 19:22:32,817 - __main__ - INFO - Fetching data for bbox 8/12: 32.064591,34.775937,32.076932,34.793451...
2025-05-09 19:22:32,818 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15
2025-05-09 19:22:32,818 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.064591,34.775937,32.076932,34.793451', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 19:22:33,247 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15 HTTP/1.1" 200 None
2025-05-09 19:22:33,319 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15.
2025-05-09 19:22:33,320 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-09 19:22:33,322 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-09 19:22:33,322 - __main__ - INFO - Parsed 130 listings for bbox: 32.064591,34.775937,32.076932,34.793451.
2025-05-09 19:22:33,322 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 19:22:37,323 - __main__ - INFO - Fetching data for bbox 9/12: 32.060576,34.760166,32.071472,34.775629...
2025-05-09 19:22:37,324 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15
2025-05-09 19:22:37,324 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.060576,34.760166,32.071472,34.775629', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 19:22:37,754 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15 HTTP/1.1" 200 None
2025-05-09 19:22:37,833 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15.
2025-05-09 19:22:37,834 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-09 19:22:37,836 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-09 19:22:37,836 - __main__ - INFO - Parsed 130 listings for bbox: 32.060576,34.760166,32.071472,34.775629.
2025-05-09 19:22:37,836 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 19:22:41,836 - __main__ - INFO - Fetching data for bbox 10/12: 32.057632,34.767177,32.068528,34.782639...
2025-05-09 19:22:41,837 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15
2025-05-09 19:22:41,838 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.057632,34.767177,32.068528,34.782639', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 19:22:42,258 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15 HTTP/1.1" 200 None
2025-05-09 19:22:42,328 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15.
2025-05-09 19:22:42,328 - src.listing_parser - INFO - Found 157 apartment items in the list. Attempting to parse...
2025-05-09 19:22:42,331 - src.listing_parser - INFO - Successfully parsed 157/157 listings.
2025-05-09 19:22:42,331 - __main__ - INFO - Parsed 157 listings for bbox: 32.057632,34.767177,32.068528,34.782639.
2025-05-09 19:22:42,331 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 19:22:46,333 - __main__ - INFO - Fetching data for bbox 11/12: 32.052334,34.760749,32.063151,34.776098...
2025-05-09 19:22:46,334 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15
2025-05-09 19:22:46,334 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.052334,34.760749,32.063151,34.776098', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 19:22:46,764 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15 HTTP/1.1" 200 None
2025-05-09 19:22:46,838 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15.
2025-05-09 19:22:46,838 - src.listing_parser - INFO - Found 177 apartment items in the list. Attempting to parse...
2025-05-09 19:22:46,841 - src.listing_parser - INFO - Successfully parsed 177/177 listings.
2025-05-09 19:22:46,841 - __main__ - INFO - Parsed 177 listings for bbox: 32.052334,34.760749,32.063151,34.776098.
2025-05-09 19:22:46,841 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 19:22:50,843 - __main__ - INFO - Fetching data for bbox 12/12: 32.066111,34.765788,32.070878,34.786357...
2025-05-09 19:22:50,844 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15
2025-05-09 19:22:50,844 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.066111,34.765788,32.070878,34.786357', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 19:22:50,848 - urllib3.connectionpool - DEBUG - Resetting dropped connection: gw.yad2.co.il
2025-05-09 19:22:51,389 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15 HTTP/1.1" 200 None
2025-05-09 19:22:51,457 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15.
2025-05-09 19:22:51,457 - src.listing_parser - INFO - Found 123 apartment items in the list. Attempting to parse...
2025-05-09 19:22:51,459 - src.listing_parser - INFO - Successfully parsed 123/123 listings.
2025-05-09 19:22:51,459 - __main__ - INFO - Parsed 123 listings for bbox: 32.066111,34.765788,32.070878,34.786357.
2025-05-09 19:22:51,460 - __main__ - INFO - Finished fetching. Total listings fetched across all bboxes (before deduplication): 1658
2025-05-09 19:22:51,460 - __main__ - INFO - Total unique apartments found after aggregation and deduplication: 368
2025-05-09 19:22:51,460 - __main__ - INFO - No *new* apartments found to notify.
2025-05-09 19:22:51,462 - src.state - INFO - Successfully saved state for 506 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-09 19:22:51,464 - __main__ - INFO - Yad2 Apartment Notifier script finished.
/Users/zeev/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
2025-05-09 20:22:00,907 - __main__ - INFO - Starting Yad2 Apartment Notifier script.
sys.path: ['/Users/zeev/Desktop/code/yad-2-to-telegram', '/Users/zeev/Desktop/code/yad-2-to-telegram/src', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python39.zip', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/lib-dynload', '/Users/zeev/Library/Python/3.9/lib/python/site-packages', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/site-packages']
2025-05-09 20:22:00,907 - asyncio - DEBUG - Using selector: KqueueSelector
2025-05-09 20:22:00,908 - __main__ - INFO - Starting apartment check run...
2025-05-09 20:22:00,908 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:22:00,908 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:22:01,030 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Initiated*', 'parse_mode': 'Markdown'}`
2025-05-09 20:22:01,035 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:22:01,119 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1054356a0>
2025-05-09 20:22:01,119 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1053edba0> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:22:01,280 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10541b670>
2025-05-09 20:22:01,283 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:22:01,284 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:22:01,284 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:22:01,284 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:22:01,284 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:22:01,382 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 17:22:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'465'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 20:22:01,383 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-09 20:22:01,384 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 20:22:01,384 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 20:22:01,384 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:22:01,384 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:22:01,385 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2862, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811321, 'text': 'Search Initiated', 'entities': [{'offset': 0, 'length': 16, 'type': 'bold'}]}`
2025-05-09 20:22:01,385 - src.notifier - INFO - Successfully sent message: *Search Initiated*
2025-05-09 20:23:01,392 - src.state - INFO - Loaded 486 sent listing states (ID -> timestamp) from /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-09 20:23:01,393 - __main__ - INFO - Fetching data for bbox 1/12: 32.075192,34.763754,32.086468,34.779760...
2025-05-09 20:23:01,394 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15
2025-05-09 20:23:01,394 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075192,34.763754,32.086468,34.779760', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 20:23:01,414 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): gw.yad2.co.il:443
2025-05-09 20:23:01,962 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15 HTTP/1.1" 200 None
2025-05-09 20:23:02,033 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15.
2025-05-09 20:23:02,033 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-09 20:23:02,036 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-09 20:23:02,036 - __main__ - INFO - Parsed 130 listings for bbox: 32.075192,34.763754,32.086468,34.779760.
2025-05-09 20:23:02,036 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 20:23:06,037 - __main__ - INFO - Fetching data for bbox 2/12: 32.075076,34.771885,32.086353,34.787891...
2025-05-09 20:23:06,038 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15
2025-05-09 20:23:06,038 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075076,34.771885,32.086353,34.787891', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 20:23:06,429 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15 HTTP/1.1" 200 None
2025-05-09 20:23:06,502 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15.
2025-05-09 20:23:06,503 - src.listing_parser - INFO - Found 149 apartment items in the list. Attempting to parse...
2025-05-09 20:23:06,505 - src.listing_parser - INFO - Successfully parsed 149/149 listings.
2025-05-09 20:23:06,505 - __main__ - INFO - Parsed 149 listings for bbox: 32.075076,34.771885,32.086353,34.787891.
2025-05-09 20:23:06,505 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 20:23:10,507 - __main__ - INFO - Fetching data for bbox 3/12: 32.076017,34.781501,32.084821,34.793997...
2025-05-09 20:23:10,508 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15
2025-05-09 20:23:10,508 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.076017,34.781501,32.084821,34.793997', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 20:23:10,935 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15 HTTP/1.1" 200 None
2025-05-09 20:23:11,006 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15.
2025-05-09 20:23:11,007 - src.listing_parser - INFO - Found 144 apartment items in the list. Attempting to parse...
2025-05-09 20:23:11,010 - src.listing_parser - INFO - Successfully parsed 144/144 listings.
2025-05-09 20:23:11,010 - __main__ - INFO - Parsed 144 listings for bbox: 32.076017,34.781501,32.084821,34.793997.
2025-05-09 20:23:11,010 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 20:23:15,010 - __main__ - INFO - Fetching data for bbox 4/12: 32.080523,34.782766,32.088978,34.794767...
2025-05-09 20:23:15,012 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15
2025-05-09 20:23:15,012 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.080523,34.782766,32.088978,34.794767', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 20:23:15,441 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15 HTTP/1.1" 200 None
2025-05-09 20:23:15,511 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15.
2025-05-09 20:23:15,511 - src.listing_parser - INFO - Found 148 apartment items in the list. Attempting to parse...
2025-05-09 20:23:15,514 - src.listing_parser - INFO - Successfully parsed 148/148 listings.
2025-05-09 20:23:15,514 - __main__ - INFO - Parsed 148 listings for bbox: 32.080523,34.782766,32.088978,34.794767.
2025-05-09 20:23:15,514 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 20:23:19,515 - __main__ - INFO - Fetching data for bbox 5/12: 32.068977,34.760081,32.081317,34.777596...
2025-05-09 20:23:19,516 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15
2025-05-09 20:23:19,516 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.068977,34.760081,32.081317,34.777596', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 20:23:19,854 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15 HTTP/1.1" 200 None
2025-05-09 20:23:19,923 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15.
2025-05-09 20:23:19,923 - src.listing_parser - INFO - Found 124 apartment items in the list. Attempting to parse...
2025-05-09 20:23:19,925 - src.listing_parser - INFO - Successfully parsed 124/124 listings.
2025-05-09 20:23:19,925 - __main__ - INFO - Parsed 124 listings for bbox: 32.068977,34.760081,32.081317,34.777596.
2025-05-09 20:23:19,926 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 20:23:23,927 - __main__ - INFO - Fetching data for bbox 6/12: 32.067273,34.764900,32.079614,34.782414...
2025-05-09 20:23:23,928 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15
2025-05-09 20:23:23,928 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.067273,34.764900,32.079614,34.782414', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 20:23:24,346 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15 HTTP/1.1" 200 None
2025-05-09 20:23:24,419 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15.
2025-05-09 20:23:24,419 - src.listing_parser - INFO - Found 126 apartment items in the list. Attempting to parse...
2025-05-09 20:23:24,422 - src.listing_parser - INFO - Successfully parsed 126/126 listings.
2025-05-09 20:23:24,422 - __main__ - INFO - Parsed 126 listings for bbox: 32.067273,34.764900,32.079614,34.782414.
2025-05-09 20:23:24,422 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 20:23:28,423 - __main__ - INFO - Fetching data for bbox 7/12: 32.065226,34.770869,32.077566,34.788383...
2025-05-09 20:23:28,424 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15
2025-05-09 20:23:28,424 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.065226,34.770869,32.077566,34.788383', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 20:23:28,855 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15 HTTP/1.1" 200 None
2025-05-09 20:23:28,926 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15.
2025-05-09 20:23:28,927 - src.listing_parser - INFO - Found 120 apartment items in the list. Attempting to parse...
2025-05-09 20:23:28,929 - src.listing_parser - INFO - Successfully parsed 120/120 listings.
2025-05-09 20:23:28,929 - __main__ - INFO - Parsed 120 listings for bbox: 32.065226,34.770869,32.077566,34.788383.
2025-05-09 20:23:28,929 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 20:23:32,931 - __main__ - INFO - Fetching data for bbox 8/12: 32.064591,34.775937,32.076932,34.793451...
2025-05-09 20:23:32,932 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15
2025-05-09 20:23:32,932 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.064591,34.775937,32.076932,34.793451', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 20:23:33,315 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15 HTTP/1.1" 200 None
2025-05-09 20:23:33,387 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15.
2025-05-09 20:23:33,387 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-09 20:23:33,389 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-09 20:23:33,389 - __main__ - INFO - Parsed 130 listings for bbox: 32.064591,34.775937,32.076932,34.793451.
2025-05-09 20:23:33,389 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 20:23:37,390 - __main__ - INFO - Fetching data for bbox 9/12: 32.060576,34.760166,32.071472,34.775629...
2025-05-09 20:23:37,390 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15
2025-05-09 20:23:37,391 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.060576,34.760166,32.071472,34.775629', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 20:23:37,748 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15 HTTP/1.1" 200 None
2025-05-09 20:23:37,831 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15.
2025-05-09 20:23:37,831 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-09 20:23:37,833 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-09 20:23:37,833 - __main__ - INFO - Parsed 130 listings for bbox: 32.060576,34.760166,32.071472,34.775629.
2025-05-09 20:23:37,833 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 20:23:41,834 - __main__ - INFO - Fetching data for bbox 10/12: 32.057632,34.767177,32.068528,34.782639...
2025-05-09 20:23:41,835 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15
2025-05-09 20:23:41,835 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.057632,34.767177,32.068528,34.782639', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 20:23:42,174 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15 HTTP/1.1" 200 None
2025-05-09 20:23:42,246 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15.
2025-05-09 20:23:42,247 - src.listing_parser - INFO - Found 157 apartment items in the list. Attempting to parse...
2025-05-09 20:23:42,249 - src.listing_parser - INFO - Successfully parsed 157/157 listings.
2025-05-09 20:23:42,249 - __main__ - INFO - Parsed 157 listings for bbox: 32.057632,34.767177,32.068528,34.782639.
2025-05-09 20:23:42,249 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 20:23:46,250 - __main__ - INFO - Fetching data for bbox 11/12: 32.052334,34.760749,32.063151,34.776098...
2025-05-09 20:23:46,250 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15
2025-05-09 20:23:46,250 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.052334,34.760749,32.063151,34.776098', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 20:23:46,673 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15 HTTP/1.1" 200 None
2025-05-09 20:23:46,743 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15.
2025-05-09 20:23:46,743 - src.listing_parser - INFO - Found 177 apartment items in the list. Attempting to parse...
2025-05-09 20:23:46,746 - src.listing_parser - INFO - Successfully parsed 177/177 listings.
2025-05-09 20:23:46,746 - __main__ - INFO - Parsed 177 listings for bbox: 32.052334,34.760749,32.063151,34.776098.
2025-05-09 20:23:46,746 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-09 20:23:50,746 - __main__ - INFO - Fetching data for bbox 12/12: 32.066111,34.765788,32.070878,34.786357...
2025-05-09 20:23:50,747 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15
2025-05-09 20:23:50,747 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.066111,34.765788,32.070878,34.786357', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-09 20:23:51,091 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15 HTTP/1.1" 200 None
2025-05-09 20:23:51,161 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15.
2025-05-09 20:23:51,161 - src.listing_parser - INFO - Found 123 apartment items in the list. Attempting to parse...
2025-05-09 20:23:51,163 - src.listing_parser - INFO - Successfully parsed 123/123 listings.
2025-05-09 20:23:51,163 - __main__ - INFO - Parsed 123 listings for bbox: 32.066111,34.765788,32.070878,34.786357.
2025-05-09 20:23:51,163 - __main__ - INFO - Finished fetching. Total listings fetched across all bboxes (before deduplication): 1658
2025-05-09 20:23:51,163 - __main__ - INFO - Total unique apartments found after aggregation and deduplication: 365
2025-05-09 20:23:51,163 - __main__ - INFO - Found 12 new apartments potentially matching criteria.
2025-05-09 20:23:51,163 - __main__ - INFO - Attempting to notify for 12 apartments.
2025-05-09 20:23:51,164 - __main__ - INFO - Starting the notification process...
2025-05-09 20:23:51,164 - __main__ - INFO - Sending batch 1 with 5 apartments...
2025-05-09 20:23:51,164 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:23:51,164 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:23:51,177 - src.notifier - INFO - Sending notification for apartment 54492816 to chat -4741762001 (6 images)
2025-05-09 20:23:51,178 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `54492816`)\n------\n*Address:*   69 (  - )   \n*Price:* 7000\n*Rooms:* 2\n*Floor:* 0\n*Size:* 50 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/p7lp37ac)', media='https://img.yad2.co.il/Pic/202411/02/2_2/o/y2_1_05471_20241102103944.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202411/09/2_2/o/y2_2_06090_20241109144636.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202411/09/2_2/o/y2_3_09513_20241109144639.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202411/09/2_2/o/y2_4_06504_20241109144642.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202411/09/2_2/o/y2_5_01312_20241109144645.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202411/10/2_2/o/y2_6_03475_20241110081917.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 20:23:51,179 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:23:51,270 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1055376a0>
2025-05-09 20:23:51,270 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1054f3580> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:23:51,425 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x104873e20>
2025-05-09 20:23:51,425 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:23:51,426 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:23:51,426 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:23:51,426 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:23:51,426 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:23:51,621 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 17:23:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'6308'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 20:23:51,621 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMediaGroup "HTTP/1.1 200 OK"
2025-05-09 20:23:51,621 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 20:23:51,621 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 20:23:51,622 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:23:51,622 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:23:51,622 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMediaGroup` finished with return value `[{'message_id': 2863, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811431, 'media_group_id': '13974491453610500', 'photo': [{'file_id': 'AgACAgQAAxUHaB4IsxRIOtfiUicAAQMesvGnELqsAAI4tTEbMvaMUWcsVOAXpXk2AQADAgADcwADNgQ', 'file_unique_id': 'AQADOLUxGzL2jFF4', 'file_size': 1539, 'width': 68, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4IsxRIOtfiUicAAQMesvGnELqsAAI4tTEbMvaMUWcsVOAXpXk2AQADAgADbQADNgQ', 'file_unique_id': 'AQADOLUxGzL2jFFy', 'file_size': 20273, 'width': 241, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4IsxRIOtfiUicAAQMesvGnELqsAAI4tTEbMvaMUWcsVOAXpXk2AQADAgADeAADNgQ', 'file_unique_id': 'AQADOLUxGzL2jFF9', 'file_size': 28667, 'width': 361, 'height': 480}], 'caption': 'New Listing Found! (ID: 54492816)\n------\nAddress:   69 (  - )   \nPrice: 7000\nRooms: 2\nFloor: 0\nSize: 50 sqm\n------\nLink to Yad2', 'caption_entities': [{'offset': 0, 'length': 18, 'type': 'bold'}, {'offset': 24, 'length': 8, 'type': 'code'}, {'offset': 41, 'length': 8, 'type': 'bold'}, {'offset': 94, 'length': 6, 'type': 'bold'}, {'offset': 106, 'length': 6, 'type': 'bold'}, {'offset': 115, 'length': 6, 'type': 'bold'}, {'offset': 124, 'length': 5, 'type': 'bold'}, {'offset': 144, 'length': 12, 'type': 'text_link', 'url': 'https://www.yad2.co.il/realestate/item/p7lp37ac'}]}, {'message_id': 2864, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811431, 'media_group_id': '13974491453610500', 'photo': [{'file_id': 'AgACAgQAAxUHaB4Is-nuC5heUy6SpwRXOpNBycYAAlK2MRtTdIxRmQzRH7xKKTUBAAMCAANzAAM2BA', 'file_unique_id': 'AQADUrYxG1N0jFF4', 'file_size': 1321, 'width': 90, 'height': 67}, {'file_id': 'AgACAgQAAxUHaB4Is-nuC5heUy6SpwRXOpNBycYAAlK2MRtTdIxRmQzRH7xKKTUBAAMCAANtAAM2BA', 'file_unique_id': 'AQADUrYxG1N0jFFy', 'file_size': 17740, 'width': 320, 'height': 240}, {'file_id': 'AgACAgQAAxUHaB4Is-nuC5heUy6SpwRXOpNBycYAAlK2MRtTdIxRmQzRH7xKKTUBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADUrYxG1N0jFF9', 'file_size': 41159, 'width': 640, 'height': 480}]}, {'message_id': 2865, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811431, 'media_group_id': '13974491453610500', 'photo': [{'file_id': 'AgACAgQAAxUHaB4Is48H4WNXii-g161jbFygkSQAAsi2MRsX0YxRWjZpdL3gLYABAAMCAANzAAM2BA', 'file_unique_id': 'AQADyLYxGxfRjFF4', 'file_size': 1304, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4Is48H4WNXii-g161jbFygkSQAAsi2MRsX0YxRWjZpdL3gLYABAAMCAANtAAM2BA', 'file_unique_id': 'AQADyLYxGxfRjFFy', 'file_size': 16013, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4Is48H4WNXii-g161jbFygkSQAAsi2MRsX0YxRWjZpdL3gLYABAAMCAAN4AAM2BA', 'file_unique_id': 'AQADyLYxGxfRjFF9', 'file_size': 22491, 'width': 360, 'height': 480}]}, {'message_id': 2866, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811431, 'media_group_id': '13974491453610500', 'photo': [{'file_id': 'AgACAgQAAxUHaB4Is3Ko6NT79cBhZSK3ZmbDxuIAAha3MRsIUIxRg5V9rUmDXSYBAAMCAANzAAM2BA', 'file_unique_id': 'AQADFrcxGwhQjFF4', 'file_size': 1532, 'width': 90, 'height': 67}, {'file_id': 'AgACAgQAAxUHaB4Is3Ko6NT79cBhZSK3ZmbDxuIAAha3MRsIUIxRg5V9rUmDXSYBAAMCAANtAAM2BA', 'file_unique_id': 'AQADFrcxGwhQjFFy', 'file_size': 17790, 'width': 320, 'height': 240}, {'file_id': 'AgACAgQAAxUHaB4Is3Ko6NT79cBhZSK3ZmbDxuIAAha3MRsIUIxRg5V9rUmDXSYBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADFrcxGwhQjFF9', 'file_size': 40079, 'width': 640, 'height': 480}]}, {'message_id': 2867, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811431, 'media_group_id': '13974491453610500', 'photo': [{'file_id': 'AgACAgQAAxUHaB4IuMeWPi1IbT9f_xYFT8389JgAAom2MRsx6IxRIxtN03O6kT0BAAMCAANzAAM2BA', 'file_unique_id': 'AQADibYxGzHojFF4', 'file_size': 1273, 'width': 68, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4IuMeWPi1IbT9f_xYFT8389JgAAom2MRsx6IxRIxtN03O6kT0BAAMCAANtAAM2BA', 'file_unique_id': 'AQADibYxGzHojFFy', 'file_size': 13164, 'width': 241, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4IuMeWPi1IbT9f_xYFT8389JgAAom2MRsx6IxRIxtN03O6kT0BAAMCAAN4AAM2BA', 'file_unique_id': 'AQADibYxGzHojFF9', 'file_size': 18263, 'width': 361, 'height': 480}]}, {'message_id': 2868, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811431, 'media_group_id': '13974491453610500', 'photo': [{'file_id': 'AgACAgQAAxUHaB4IszKkZx8aWOu38p1hmng6HgUAAlm1MRvosZVRThatqhZsmUEBAAMCAANzAAM2BA', 'file_unique_id': 'AQADWbUxG-ixlVF4', 'file_size': 1633, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4IszKkZx8aWOu38p1hmng6HgUAAlm1MRvosZVRThatqhZsmUEBAAMCAANtAAM2BA', 'file_unique_id': 'AQADWbUxG-ixlVFy', 'file_size': 24567, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4IszKkZx8aWOu38p1hmng6HgUAAlm1MRvosZVRThatqhZsmUEBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADWbUxG-ixlVF9', 'file_size': 35333, 'width': 360, 'height': 480}]}]`
2025-05-09 20:23:51,623 - src.notifier - DEBUG - Sent media group (6 photos) for 54492816.
2025-05-09 20:23:51,623 - src.notifier - INFO - Successfully sent notification for apartment 54492816
2025-05-09 20:23:51,624 - __main__ - DEBUG - Notification for 54492816 successful.
2025-05-09 20:24:51,625 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:24:51,627 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:24:51,646 - src.notifier - INFO - Sending notification for apartment 55365453 to chat -4741762001 (0 images)
2025-05-09 20:24:51,646 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': "*New Listing Found!* (ID: `55365453`)\n------\n*Address:*  '' 101 (  - )   \n*Price:* 6300\n*Rooms:* 2\n*Floor:* 2\n*Size:* 50 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/co0zx443)", 'link_preview_options': LinkPreviewOptions(is_disabled=False), 'parse_mode': 'Markdown'}`
2025-05-09 20:24:51,647 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:24:51,736 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10570efa0>
2025-05-09 20:24:51,736 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x105527200> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:24:51,897 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10570ef40>
2025-05-09 20:24:51,898 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:24:51,898 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:24:51,899 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:24:51,899 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:24:51,899 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:24:52,129 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 17:24:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1187'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 20:24:52,130 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-09 20:24:52,130 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 20:24:52,130 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 20:24:52,131 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:24:52,131 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:24:52,131 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2869, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811492, 'text': "New Listing Found! (ID: 55365453)\n------\nAddress:  '' 101 (  - )   \nPrice: 6300\nRooms: 2\nFloor: 2\nSize: 50 sqm\n------\nLink to Yad2", 'entities': [{'offset': 0, 'length': 18, 'type': 'bold'}, {'offset': 24, 'length': 8, 'type': 'code'}, {'offset': 41, 'length': 8, 'type': 'bold'}, {'offset': 98, 'length': 6, 'type': 'bold'}, {'offset': 110, 'length': 6, 'type': 'bold'}, {'offset': 119, 'length': 6, 'type': 'bold'}, {'offset': 128, 'length': 5, 'type': 'bold'}, {'offset': 148, 'length': 12, 'type': 'text_link', 'url': 'https://www.yad2.co.il/realestate/item/co0zx443'}], 'link_preview_options': {'url': 'https://www.yad2.co.il/realestate/item/co0zx443'}}`
2025-05-09 20:24:52,132 - src.notifier - DEBUG - Sent text-only message for 55365453.
2025-05-09 20:24:52,132 - src.notifier - INFO - Successfully sent notification for apartment 55365453
2025-05-09 20:24:52,133 - __main__ - DEBUG - Notification for 55365453 successful.
2025-05-09 20:25:52,135 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:25:52,136 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:25:52,153 - src.notifier - INFO - Sending notification for apartment 55365025 to chat -4741762001 (10 images)
2025-05-09 20:25:52,154 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55365025`)\n------\n*Address:*  (  - )   \n*Price:* 6500\n*Rooms:* 2\n*Floor:* 3\n*Size:* 65 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/nexiv96t)', media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010038_20250509130841.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010788_20250509130852.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010601_20250509130909.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010373_20250509130925.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010538_20250509130946.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010707_20250509130946.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010918_20250509130946.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010547_20250509130946.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010801_20250509130958.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010356_20250509131007.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 20:25:52,155 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:25:52,242 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105693430>
2025-05-09 20:25:52,242 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x105527740> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:25:52,401 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10570ef70>
2025-05-09 20:25:52,401 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:25:52,402 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:25:52,402 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:25:52,402 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:25:52,403 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:25:57,404 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 20:25:57,404 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:25:57,404 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:25:57,405 - src.notifier - WARNING - Telegram request timed out for apartment 55365025. Will be retried next run if state saving failed or skipped.
2025-05-09 20:25:57,408 - __main__ - WARNING - Notifier returned False for apartment 55365025.
2025-05-09 20:26:57,409 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:26:57,409 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:26:57,425 - src.notifier - INFO - Sending notification for apartment 55365169 to chat -4741762001 (4 images)
2025-05-09 20:26:57,426 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55365169`)\n------\n*Address:*   (  ,   )   \n*Price:* 7950\n*Rooms:* 2\n*Floor:* 0\n*Size:* 60 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/mjdiqwj1)', media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010815_20250509134902.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010166_20250509134902.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010174_20250509134902.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1pa_010432_20250509134902.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 20:26:57,426 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:26:57,504 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105693850>
2025-05-09 20:26:57,505 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x105527190> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:26:57,657 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1054ebc40>
2025-05-09 20:26:57,657 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:26:57,658 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:26:57,658 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:26:57,659 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:26:57,659 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:26:57,884 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 17:26:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'4486'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 20:26:57,884 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMediaGroup "HTTP/1.1 200 OK"
2025-05-09 20:26:57,885 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 20:26:57,885 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 20:26:57,885 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:26:57,885 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:26:57,886 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMediaGroup` finished with return value `[{'message_id': 2880, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811617, 'media_group_id': '13974492943809356', 'photo': [{'file_id': 'AgACAgQAAxUHaB4IyA4p4ogHsyZvwyfTAdA2ciAAAk-4MRuigPRQfU7LLFI5tBQBAAMCAANzAAM2BA', 'file_unique_id': 'AQADT7gxG6KA9FB4', 'file_size': 1541, 'width': 90, 'height': 67}, {'file_id': 'AgACAgQAAxUHaB4IyA4p4ogHsyZvwyfTAdA2ciAAAk-4MRuigPRQfU7LLFI5tBQBAAMCAANtAAM2BA', 'file_unique_id': 'AQADT7gxG6KA9FBy', 'file_size': 18459, 'width': 320, 'height': 240}, {'file_id': 'AgACAgQAAxUHaB4IyA4p4ogHsyZvwyfTAdA2ciAAAk-4MRuigPRQfU7LLFI5tBQBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADT7gxG6KA9FB9', 'file_size': 44704, 'width': 640, 'height': 480}], 'caption': 'New Listing Found! (ID: 55365169)\n------\nAddress:   (  ,   )   \nPrice: 7950\nRooms: 2\nFloor: 0\nSize: 60 sqm\n------\nLink to Yad2', 'caption_entities': [{'offset': 0, 'length': 18, 'type': 'bold'}, {'offset': 24, 'length': 8, 'type': 'code'}, {'offset': 41, 'length': 8, 'type': 'bold'}, {'offset': 98, 'length': 6, 'type': 'bold'}, {'offset': 110, 'length': 6, 'type': 'bold'}, {'offset': 119, 'length': 6, 'type': 'bold'}, {'offset': 128, 'length': 5, 'type': 'bold'}, {'offset': 148, 'length': 12, 'type': 'text_link', 'url': 'https://www.yad2.co.il/realestate/item/mjdiqwj1'}]}, {'message_id': 2881, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811617, 'media_group_id': '13974492943809356', 'photo': [{'file_id': 'AgACAgQAAxUHaB4IyKCu5ecDT4wfhQNRAwgmSRoAAhu5MRu9rvVQNgaMG-APdZUBAAMCAANzAAM2BA', 'file_unique_id': 'AQADG7kxG72u9VB4', 'file_size': 1716, 'width': 90, 'height': 67}, {'file_id': 'AgACAgQAAxUHaB4IyKCu5ecDT4wfhQNRAwgmSRoAAhu5MRu9rvVQNgaMG-APdZUBAAMCAANtAAM2BA', 'file_unique_id': 'AQADG7kxG72u9VBy', 'file_size': 26077, 'width': 320, 'height': 240}, {'file_id': 'AgACAgQAAxUHaB4IyKCu5ecDT4wfhQNRAwgmSRoAAhu5MRu9rvVQNgaMG-APdZUBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADG7kxG72u9VB9', 'file_size': 67642, 'width': 640, 'height': 480}]}, {'message_id': 2882, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811617, 'media_group_id': '13974492943809356', 'photo': [{'file_id': 'AgACAgQAAxUHaB4IyD5m6rGtupD830JpjcvPAAFYAALGuDEb7XP1UC0sH_bmCo8SAQADAgADcwADNgQ', 'file_unique_id': 'AQADxrgxG-1z9VB4', 'file_size': 1227, 'width': 90, 'height': 67}, {'file_id': 'AgACAgQAAxUHaB4IyD5m6rGtupD830JpjcvPAAFYAALGuDEb7XP1UC0sH_bmCo8SAQADAgADbQADNgQ', 'file_unique_id': 'AQADxrgxG-1z9VBy', 'file_size': 12389, 'width': 320, 'height': 240}, {'file_id': 'AgACAgQAAxUHaB4IyD5m6rGtupD830JpjcvPAAFYAALGuDEb7XP1UC0sH_bmCo8SAQADAgADeAADNgQ', 'file_unique_id': 'AQADxrgxG-1z9VB9', 'file_size': 27895, 'width': 640, 'height': 480}]}, {'message_id': 2883, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811617, 'media_group_id': '13974492943809356', 'photo': [{'file_id': 'AgACAgQAAxUHaB4IyCIJAAGKP_XU8dZ2M_LoapjmAAJKuTEbQpf1ULFdE75PT1HYAQADAgADcwADNgQ', 'file_unique_id': 'AQADSrkxG0KX9VB4', 'file_size': 1701, 'width': 90, 'height': 67}, {'file_id': 'AgACAgQAAxUHaB4IyCIJAAGKP_XU8dZ2M_LoapjmAAJKuTEbQpf1ULFdE75PT1HYAQADAgADbQADNgQ', 'file_unique_id': 'AQADSrkxG0KX9VBy', 'file_size': 21364, 'width': 320, 'height': 240}, {'file_id': 'AgACAgQAAxUHaB4IyCIJAAGKP_XU8dZ2M_LoapjmAAJKuTEbQpf1ULFdE75PT1HYAQADAgADeAADNgQ', 'file_unique_id': 'AQADSrkxG0KX9VB9', 'file_size': 49055, 'width': 640, 'height': 480}]}]`
2025-05-09 20:26:57,891 - src.notifier - DEBUG - Sent media group (4 photos) for 55365169.
2025-05-09 20:26:57,891 - src.notifier - INFO - Successfully sent notification for apartment 55365169
2025-05-09 20:26:57,893 - __main__ - DEBUG - Notification for 55365169 successful.
2025-05-09 20:27:57,894 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:27:57,894 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:27:57,911 - src.notifier - INFO - Sending notification for apartment 47485125 to chat -4741762001 (11 images)
2025-05-09 20:27:57,912 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `47485125`)\n------\n*Address:*   (  ,   )   \n*Price:* 6500\n*Rooms:* 2\n*Floor:* 1\n*Size:* 45 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/3rj9yqc9)', media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_1_j7t7fyFU5U_20220713.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_2_YnbqXQ6XIX_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_3_s4u89oSSmC_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_4_bb_SyBUBre_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_5_SqwASCqPJr_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_6_VsDYXWknQv_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_7_z1k4w4qYGt_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_8_GGXUT4Sywv_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_9_7RgKRZ4dPJ_20220713.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202207/13/2_6/o/y2_10_auyu7CSjVd_20220713.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 20:27:57,913 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:27:57,991 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105693580>
2025-05-09 20:27:57,991 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10553e200> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:27:58,145 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105693760>
2025-05-09 20:27:58,145 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:27:58,146 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:27:58,146 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:27:58,147 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:27:58,147 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:27:58,337 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 17:27:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'10596'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 20:27:58,338 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMediaGroup "HTTP/1.1 200 OK"
2025-05-09 20:27:58,338 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 20:27:58,338 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 20:27:58,338 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:27:58,338 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:27:58,339 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMediaGroup` finished with return value `[{'message_id': 2884, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811678, 'media_group_id': '13974493427194572', 'photo': [{'file_id': 'AgACAgQAAxUHaB4JAeqrQG58f4VHYnTh-110PGgAAjW5MRvyQfVQhsPsV1d0JR0BAAMCAANzAAM2BA', 'file_unique_id': 'AQADNbkxG_JB9VB4', 'file_size': 1000, 'width': 90, 'height': 51}, {'file_id': 'AgACAgQAAxUHaB4JAeqrQG58f4VHYnTh-110PGgAAjW5MRvyQfVQhsPsV1d0JR0BAAMCAANtAAM2BA', 'file_unique_id': 'AQADNbkxG_JB9VBy', 'file_size': 13234, 'width': 320, 'height': 180}, {'file_id': 'AgACAgQAAxUHaB4JAeqrQG58f4VHYnTh-110PGgAAjW5MRvyQfVQhsPsV1d0JR0BAAMCAAN5AAM2BA', 'file_unique_id': 'AQADNbkxG_JB9VB-', 'file_size': 51804, 'width': 853, 'height': 480}, {'file_id': 'AgACAgQAAxUHaB4JAeqrQG58f4VHYnTh-110PGgAAjW5MRvyQfVQhsPsV1d0JR0BAAMCAAN4AAM2BA', 'file_unique_id': 'AQADNbkxG_JB9VB9', 'file_size': 60033, 'width': 800, 'height': 450}], 'caption': 'New Listing Found! (ID: 47485125)\n------\nAddress:   (  ,   )   \nPrice: 6500\nRooms: 2\nFloor: 1\nSize: 45 sqm\n------\nLink to Yad2', 'caption_entities': [{'offset': 0, 'length': 18, 'type': 'bold'}, {'offset': 24, 'length': 8, 'type': 'code'}, {'offset': 41, 'length': 8, 'type': 'bold'}, {'offset': 102, 'length': 6, 'type': 'bold'}, {'offset': 114, 'length': 6, 'type': 'bold'}, {'offset': 123, 'length': 6, 'type': 'bold'}, {'offset': 132, 'length': 5, 'type': 'bold'}, {'offset': 152, 'length': 12, 'type': 'text_link', 'url': 'https://www.yad2.co.il/realestate/item/3rj9yqc9'}]}, {'message_id': 2885, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811678, 'media_group_id': '13974493427194572', 'photo': [{'file_id': 'AgACAgQAAxUHaB4I-ymug1fkWhoa9DFTaVcreLAAAgq4MRuxSv1QjPKn4aYI5IEBAAMCAANzAAM2BA', 'file_unique_id': 'AQADCrgxG7FK_VB4', 'file_size': 956, 'width': 51, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4I-ymug1fkWhoa9DFTaVcreLAAAgq4MRuxSv1QjPKn4aYI5IEBAAMCAANtAAM2BA', 'file_unique_id': 'AQADCrgxG7FK_VBy', 'file_size': 11091, 'width': 180, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4I-ymug1fkWhoa9DFTaVcreLAAAgq4MRuxSv1QjPKn4aYI5IEBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADCrgxG7FK_VB9', 'file_size': 15245, 'width': 270, 'height': 480}]}, {'message_id': 2886, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811678, 'media_group_id': '13974493427194572', 'photo': [{'file_id': 'AgACAgQAAxUHaB4I--QLbmciDifa8NA7zruyjscAArC4MRtq9fVQNvW8MNaHAT4BAAMCAANzAAM2BA', 'file_unique_id': 'AQADsLgxG2r19VB4', 'file_size': 965, 'width': 51, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4I--QLbmciDifa8NA7zruyjscAArC4MRtq9fVQNvW8MNaHAT4BAAMCAANtAAM2BA', 'file_unique_id': 'AQADsLgxG2r19VBy', 'file_size': 10815, 'width': 180, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4I--QLbmciDifa8NA7zruyjscAArC4MRtq9fVQNvW8MNaHAT4BAAMCAAN4AAM2BA', 'file_unique_id': 'AQADsLgxG2r19VB9', 'file_size': 15313, 'width': 270, 'height': 480}]}, {'message_id': 2887, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811678, 'media_group_id': '13974493427194572', 'photo': [{'file_id': 'AgACAgQAAxUHaB4JAAExLGTS1xfnE4AT6rzOLiGGAAKTuTEbf5L1UDZwMQrQRxtgAQADAgADcwADNgQ', 'file_unique_id': 'AQADk7kxG3-S9VB4', 'file_size': 962, 'width': 51, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4JAAExLGTS1xfnE4AT6rzOLiGGAAKTuTEbf5L1UDZwMQrQRxtgAQADAgADbQADNgQ', 'file_unique_id': 'AQADk7kxG3-S9VBy', 'file_size': 10902, 'width': 180, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4JAAExLGTS1xfnE4AT6rzOLiGGAAKTuTEbf5L1UDZwMQrQRxtgAQADAgADeAADNgQ', 'file_unique_id': 'AQADk7kxG3-S9VB9', 'file_size': 15456, 'width': 270, 'height': 480}]}, {'message_id': 2888, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811678, 'media_group_id': '13974493427194572', 'photo': [{'file_id': 'AgACAgQAAxUHaB4I-xLJs_yjqMJdlnPHOoQOzCcAAgu5MRtC3PVQLhlwq8Yv188BAAMCAANzAAM2BA', 'file_unique_id': 'AQADC7kxG0Lc9VB4', 'file_size': 1036, 'width': 51, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4I-xLJs_yjqMJdlnPHOoQOzCcAAgu5MRtC3PVQLhlwq8Yv188BAAMCAANtAAM2BA', 'file_unique_id': 'AQADC7kxG0Lc9VBy', 'file_size': 13575, 'width': 180, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4I-xLJs_yjqMJdlnPHOoQOzCcAAgu5MRtC3PVQLhlwq8Yv188BAAMCAAN4AAM2BA', 'file_unique_id': 'AQADC7kxG0Lc9VB9', 'file_size': 19529, 'width': 270, 'height': 480}]}, {'message_id': 2889, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811678, 'media_group_id': '13974493427194572', 'photo': [{'file_id': 'AgACAgQAAxUHaB4JAAF1D9SUoSyHd9qGtmDELxiQAAJuuTEb29r0UBcy5xJX_naJAQADAgADcwADNgQ', 'file_unique_id': 'AQADbrkxG9va9FB4', 'file_size': 975, 'width': 51, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4JAAF1D9SUoSyHd9qGtmDELxiQAAJuuTEb29r0UBcy5xJX_naJAQADAgADbQADNgQ', 'file_unique_id': 'AQADbrkxG9va9FBy', 'file_size': 9267, 'width': 180, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4JAAF1D9SUoSyHd9qGtmDELxiQAAJuuTEb29r0UBcy5xJX_naJAQADAgADeAADNgQ', 'file_unique_id': 'AQADbrkxG9va9FB9', 'file_size': 12294, 'width': 270, 'height': 480}]}, {'message_id': 2890, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811678, 'media_group_id': '13974493427194572', 'photo': [{'file_id': 'AgACAgQAAxUHaB4I-98_oVDnDXB2VBaCNLvNP4YAAvK4MRvz1_RQhQABx6fy15SfAQADAgADcwADNgQ', 'file_unique_id': 'AQAD8rgxG_PX9FB4', 'file_size': 1481, 'width': 90, 'height': 51}, {'file_id': 'AgACAgQAAxUHaB4I-98_oVDnDXB2VBaCNLvNP4YAAvK4MRvz1_RQhQABx6fy15SfAQADAgADbQADNgQ', 'file_unique_id': 'AQAD8rgxG_PX9FBy', 'file_size': 27556, 'width': 320, 'height': 180}, {'file_id': 'AgACAgQAAxUHaB4I-98_oVDnDXB2VBaCNLvNP4YAAvK4MRvz1_RQhQABx6fy15SfAQADAgADeQADNgQ', 'file_unique_id': 'AQAD8rgxG_PX9FB-', 'file_size': 126829, 'width': 853, 'height': 480}, {'file_id': 'AgACAgQAAxUHaB4I-98_oVDnDXB2VBaCNLvNP4YAAvK4MRvz1_RQhQABx6fy15SfAQADAgADeAADNgQ', 'file_unique_id': 'AQAD8rgxG_PX9FB9', 'file_size': 141810, 'width': 800, 'height': 450}]}, {'message_id': 2891, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811678, 'media_group_id': '13974493427194572', 'photo': [{'file_id': 'AgACAgQAAxUHaB4I-0fRVqtqV8M_vY3mzsJezxQAAo-4MRvIyvRQkmfHTSHzwfcBAAMCAANzAAM2BA', 'file_unique_id': 'AQADj7gxG8jK9FB4', 'file_size': 977, 'width': 51, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4I-0fRVqtqV8M_vY3mzsJezxQAAo-4MRvIyvRQkmfHTSHzwfcBAAMCAANtAAM2BA', 'file_unique_id': 'AQADj7gxG8jK9FBy', 'file_size': 10540, 'width': 180, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4I-0fRVqtqV8M_vY3mzsJezxQAAo-4MRvIyvRQkmfHTSHzwfcBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADj7gxG8jK9FB9', 'file_size': 14288, 'width': 270, 'height': 480}]}, {'message_id': 2892, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811678, 'media_group_id': '13974493427194572', 'photo': [{'file_id': 'AgACAgQAAxUHaB4JAAHAZnzjIpFjX11VhFyWsnBQAAKDuTEbBVL0UPVaK9C3dmtOAQADAgADcwADNgQ', 'file_unique_id': 'AQADg7kxGwVS9FB4', 'file_size': 1002, 'width': 90, 'height': 51}, {'file_id': 'AgACAgQAAxUHaB4JAAHAZnzjIpFjX11VhFyWsnBQAAKDuTEbBVL0UPVaK9C3dmtOAQADAgADbQADNgQ', 'file_unique_id': 'AQADg7kxGwVS9FBy', 'file_size': 13040, 'width': 320, 'height': 180}, {'file_id': 'AgACAgQAAxUHaB4JAAHAZnzjIpFjX11VhFyWsnBQAAKDuTEbBVL0UPVaK9C3dmtOAQADAgADeQADNgQ', 'file_unique_id': 'AQADg7kxGwVS9FB-', 'file_size': 51301, 'width': 853, 'height': 480}, {'file_id': 'AgACAgQAAxUHaB4JAAHAZnzjIpFjX11VhFyWsnBQAAKDuTEbBVL0UPVaK9C3dmtOAQADAgADeAADNgQ', 'file_unique_id': 'AQADg7kxGwVS9FB9', 'file_size': 59576, 'width': 800, 'height': 450}]}, {'message_id': 2893, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811678, 'media_group_id': '13974493427194572', 'photo': [{'file_id': 'AgACAgQAAxUHaB4JAAG7-WzC_3oZkbjUVvM6j00TAAKLuDEbdhP0UPIDyZR8rsnbAQADAgADcwADNgQ', 'file_unique_id': 'AQADi7gxG3YT9FB4', 'file_size': 1019, 'width': 51, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4JAAG7-WzC_3oZkbjUVvM6j00TAAKLuDEbdhP0UPIDyZR8rsnbAQADAgADbQADNgQ', 'file_unique_id': 'AQADi7gxG3YT9FBy', 'file_size': 10627, 'width': 180, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4JAAG7-WzC_3oZkbjUVvM6j00TAAKLuDEbdhP0UPIDyZR8rsnbAQADAgADeAADNgQ', 'file_unique_id': 'AQADi7gxG3YT9FB9', 'file_size': 14161, 'width': 270, 'height': 480}]}]`
2025-05-09 20:27:58,342 - src.notifier - DEBUG - Sent media group (10 photos) for 47485125.
2025-05-09 20:27:58,342 - src.notifier - WARNING - Apartment 47485125 had 11 images, but only sent the first 10 due to Telegram limits.
2025-05-09 20:27:58,342 - src.notifier - INFO - Successfully sent notification for apartment 47485125
2025-05-09 20:27:58,343 - __main__ - DEBUG - Notification for 47485125 successful.
2025-05-09 20:28:58,345 - src.state - INFO - Updated sent_listings in memory with batch 1 containing 5 listings. Timestamps are floats.
2025-05-09 20:28:58,346 - __main__ - INFO - Waiting 10 seconds before sending the next batch...
2025-05-09 20:29:08,347 - __main__ - INFO - Sending batch 2 with 5 apartments...
2025-05-09 20:29:08,347 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:29:08,347 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:29:08,366 - src.notifier - INFO - Sending notification for apartment 55364387 to chat -4741762001 (7 images)
2025-05-09 20:29:08,367 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55364387`)\n------\n*Address:*   \n*Price:* 7750\n*Rooms:* 3\n*Floor:* 1\n*Size:* 80 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/mbg9d97b)', media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_1_SfA5lW4VN1_20250509.jpg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_2_0yyM7ESZIM_20250509.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_3_WmD5Msp2xc_20250509.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_4_qtEYaEtHbX_20250509.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_5_Q32EtLDMiX_20250509.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_6_AtGSClZlzV_20250509.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_7_GS55oceWHx_20250509.jpg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 20:29:08,368 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:29:08,461 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10551c9d0>
2025-05-09 20:29:08,461 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x105527190> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:29:08,625 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1055371f0>
2025-05-09 20:29:08,625 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:29:08,626 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:29:08,626 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:29:08,627 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:29:08,627 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:29:13,627 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 20:29:13,627 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:29:13,628 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:29:13,628 - src.notifier - WARNING - Telegram request timed out for apartment 55364387. Will be retried next run if state saving failed or skipped.
2025-05-09 20:29:13,631 - __main__ - WARNING - Notifier returned False for apartment 55364387.
2025-05-09 20:30:13,633 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:30:13,633 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:30:13,650 - src.notifier - INFO - Sending notification for apartment 53641149 to chat -4741762001 (13 images)
2025-05-09 20:30:13,651 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `53641149`)\n------\n*Address:*    (  ,   )   \n*Price:* 7900\n*Rooms:* 2\n*Floor:* 3\n*Size:* 45 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/eaxpt7hv)', media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_11_SjHPR2hNAL_20250509.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_12_91t4ADNM34_20250509.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/06/2_6/o/y2_1pa_010862_20240506142044.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/06/2_6/o/y2_1pa_010442_20240506142109.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/06/2_6/o/y2_1pa_010236_20240506142110.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/06/2_6/o/y2_1pa_010032_20240506142106.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202405/06/2_6/o/y2_1pa_010032_20240506142108.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_13_74EGC5Ic95_20250509.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_14_cF02SZcnDe_20250509.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_6/o/y2_15_qgBb0U9kbx_20250509.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 20:30:13,652 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:30:13,729 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10551cc40>
2025-05-09 20:30:13,729 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x105527e40> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:30:13,881 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x104873e20>
2025-05-09 20:30:13,882 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:30:13,883 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:30:13,883 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:30:13,883 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:30:13,883 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:30:18,884 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 20:30:18,884 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:30:18,885 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:30:18,885 - src.notifier - WARNING - Telegram request timed out for apartment 53641149. Will be retried next run if state saving failed or skipped.
2025-05-09 20:30:18,888 - __main__ - WARNING - Notifier returned False for apartment 53641149.
2025-05-09 20:31:18,890 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:31:18,890 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:31:18,907 - src.notifier - INFO - Sending notification for apartment 55364126 to chat -4741762001 (7 images)
2025-05-09 20:31:18,907 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55364126`)\n------\n*Address:*  9 (  - )   \n*Price:* 8000\n*Rooms:* 3\n*Floor:* 0\n*Size:* 87 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/vcln5hnm)', media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010971_20250509095110.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010702_20250509095106.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010619_20250509095107.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010788_20250509095108.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010039_20250509095109.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010123_20250509095110.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/09/2_2/o/y2_1pa_010926_20250509095111.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 20:31:18,908 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:31:18,986 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10551cb80>
2025-05-09 20:31:18,987 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x105527190> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:31:19,141 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10570ef40>
2025-05-09 20:31:19,142 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:31:19,142 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:31:19,142 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:31:19,143 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:31:19,143 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:31:24,144 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 20:31:24,144 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:31:24,145 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:31:24,145 - src.notifier - WARNING - Telegram request timed out for apartment 55364126. Will be retried next run if state saving failed or skipped.
2025-05-09 20:31:24,147 - __main__ - WARNING - Notifier returned False for apartment 55364126.
2025-05-09 20:32:24,148 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:32:24,149 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:32:24,165 - src.notifier - INFO - Sending notification for apartment 55327278 to chat -4741762001 (0 images)
2025-05-09 20:32:24,165 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*New Listing Found!* (ID: `55327278`)\n------\n*Address:*   7 (  -  )   \n*Price:* 7600\n*Rooms:* 2.5\n*Floor:* 3\n*Size:* 80 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/pol0mk4s)', 'link_preview_options': LinkPreviewOptions(is_disabled=False), 'parse_mode': 'Markdown'}`
2025-05-09 20:32:24,166 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:32:24,251 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10551ca00>
2025-05-09 20:32:24,251 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x105527e40> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:32:24,413 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105693ca0>
2025-05-09 20:32:24,413 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:32:24,413 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:32:24,413 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:32:24,414 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:32:24,414 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:32:24,605 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 17:32:24 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1223'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 20:32:24,606 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-09 20:32:24,606 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 20:32:24,606 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 20:32:24,606 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:32:24,606 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:32:24,607 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2918, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746811944, 'text': 'New Listing Found! (ID: 55327278)\n------\nAddress:   7 (  -  )   \nPrice: 7600\nRooms: 2.5\nFloor: 3\nSize: 80 sqm\n------\nLink to Yad2', 'entities': [{'offset': 0, 'length': 18, 'type': 'bold'}, {'offset': 24, 'length': 8, 'type': 'code'}, {'offset': 41, 'length': 8, 'type': 'bold'}, {'offset': 101, 'length': 6, 'type': 'bold'}, {'offset': 113, 'length': 6, 'type': 'bold'}, {'offset': 124, 'length': 6, 'type': 'bold'}, {'offset': 133, 'length': 5, 'type': 'bold'}, {'offset': 153, 'length': 12, 'type': 'text_link', 'url': 'https://www.yad2.co.il/realestate/item/pol0mk4s'}], 'link_preview_options': {'url': 'https://www.yad2.co.il/realestate/item/pol0mk4s'}}`
2025-05-09 20:32:24,607 - src.notifier - DEBUG - Sent text-only message for 55327278.
2025-05-09 20:32:24,608 - src.notifier - INFO - Successfully sent notification for apartment 55327278
2025-05-09 20:32:24,609 - __main__ - DEBUG - Notification for 55327278 successful.
2025-05-09 20:33:24,610 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:33:24,611 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:33:24,650 - src.notifier - INFO - Sending notification for apartment 55362765 to chat -4741762001 (7 images)
2025-05-09 20:33:24,651 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55362765`)\n------\n*Address:*   ( )   \n*Price:* 7500\n*Rooms:* 2\n*Floor:* 0\n*Size:* 45 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/zvyt6u2n)', media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010864_20250508203959.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010118_20250508203959.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010221_20250508204000.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010566_20250508204000.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010335_20250508204000.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010824_20250508204000.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010522_20250508204000.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 20:33:24,652 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:33:24,741 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105893bb0>
2025-05-09 20:33:24,741 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x105527ba0> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:33:24,896 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1054eb040>
2025-05-09 20:33:24,896 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:33:24,896 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:33:24,896 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:33:24,897 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:33:24,897 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:33:25,029 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 17:33:25 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'7219'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 20:33:25,031 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMediaGroup "HTTP/1.1 200 OK"
2025-05-09 20:33:25,031 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 20:33:25,031 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 20:33:25,031 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:33:25,032 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:33:25,032 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMediaGroup` finished with return value `[{'message_id': 2919, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812005, 'media_group_id': '13974496040910748', 'photo': [{'file_id': 'AgACAgQAAxUHaB4JChApAb0ZYYzDZgNsPr2oke8AAqm4MRsgnfRQz82OJtJSWW0BAAMCAANzAAM2BA', 'file_unique_id': 'AQADqbgxGyCd9FB4', 'file_size': 1454, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4JChApAb0ZYYzDZgNsPr2oke8AAqm4MRsgnfRQz82OJtJSWW0BAAMCAANtAAM2BA', 'file_unique_id': 'AQADqbgxGyCd9FBy', 'file_size': 18997, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4JChApAb0ZYYzDZgNsPr2oke8AAqm4MRsgnfRQz82OJtJSWW0BAAMCAAN4AAM2BA', 'file_unique_id': 'AQADqbgxGyCd9FB9', 'file_size': 26700, 'width': 360, 'height': 480}], 'caption': 'New Listing Found! (ID: 55362765)\n------\nAddress:   ( )   \nPrice: 7500\nRooms: 2\nFloor: 0\nSize: 45 sqm\n------\nLink to Yad2', 'caption_entities': [{'offset': 0, 'length': 18, 'type': 'bold'}, {'offset': 24, 'length': 8, 'type': 'code'}, {'offset': 41, 'length': 8, 'type': 'bold'}, {'offset': 86, 'length': 6, 'type': 'bold'}, {'offset': 98, 'length': 6, 'type': 'bold'}, {'offset': 107, 'length': 6, 'type': 'bold'}, {'offset': 116, 'length': 5, 'type': 'bold'}, {'offset': 136, 'length': 12, 'type': 'text_link', 'url': 'https://www.yad2.co.il/realestate/item/zvyt6u2n'}]}, {'message_id': 2920, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812005, 'media_group_id': '13974496040910748', 'photo': [{'file_id': 'AgACAgQAAxUHaB4JBuOULiOCc2EAAfU9s0-UfqxQAAJquTEbLoH0UPNNERUSkRkQAQADAgADcwADNgQ', 'file_unique_id': 'AQADarkxGy6B9FB4', 'file_size': 1451, 'width': 90, 'height': 67}, {'file_id': 'AgACAgQAAxUHaB4JBuOULiOCc2EAAfU9s0-UfqxQAAJquTEbLoH0UPNNERUSkRkQAQADAgADbQADNgQ', 'file_unique_id': 'AQADarkxGy6B9FBy', 'file_size': 18232, 'width': 320, 'height': 240}, {'file_id': 'AgACAgQAAxUHaB4JBuOULiOCc2EAAfU9s0-UfqxQAAJquTEbLoH0UPNNERUSkRkQAQADAgADeAADNgQ', 'file_unique_id': 'AQADarkxGy6B9FB9', 'file_size': 45412, 'width': 640, 'height': 480}]}, {'message_id': 2921, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812005, 'media_group_id': '13974496040910748', 'photo': [{'file_id': 'AgACAgQAAxUHaB4JCwdwbucEkHij2QGVWwhz5xUAAh-5MRveRvRQVQsK3GCspnMBAAMCAANzAAM2BA', 'file_unique_id': 'AQADH7kxG95G9FB4', 'file_size': 1242, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4JCwdwbucEkHij2QGVWwhz5xUAAh-5MRveRvRQVQsK3GCspnMBAAMCAANtAAM2BA', 'file_unique_id': 'AQADH7kxG95G9FBy', 'file_size': 15576, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4JCwdwbucEkHij2QGVWwhz5xUAAh-5MRveRvRQVQsK3GCspnMBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADH7kxG95G9FB9', 'file_size': 22190, 'width': 360, 'height': 480}]}, {'message_id': 2922, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812005, 'media_group_id': '13974496040910748', 'photo': [{'file_id': 'AgACAgQAAxUHaB4JBtEIogudqAAB0csdMiYzqoBWAALbuDEbgjX1UBW0cfK6LN1GAQADAgADcwADNgQ', 'file_unique_id': 'AQAD27gxG4I19VB4', 'file_size': 1242, 'width': 90, 'height': 67}, {'file_id': 'AgACAgQAAxUHaB4JBtEIogudqAAB0csdMiYzqoBWAALbuDEbgjX1UBW0cfK6LN1GAQADAgADbQADNgQ', 'file_unique_id': 'AQAD27gxG4I19VBy', 'file_size': 13480, 'width': 320, 'height': 240}, {'file_id': 'AgACAgQAAxUHaB4JBtEIogudqAAB0csdMiYzqoBWAALbuDEbgjX1UBW0cfK6LN1GAQADAgADeAADNgQ', 'file_unique_id': 'AQAD27gxG4I19VB9', 'file_size': 32330, 'width': 640, 'height': 480}]}, {'message_id': 2923, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812005, 'media_group_id': '13974496040910748', 'photo': [{'file_id': 'AgACAgQAAxUHaB4JC9C2FB-7YrlP6eaM79Xh18sAAj25MRs3pPVQlSIlgje9v54BAAMCAANzAAM2BA', 'file_unique_id': 'AQADPbkxGzek9VB4', 'file_size': 1108, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4JC9C2FB-7YrlP6eaM79Xh18sAAj25MRs3pPVQlSIlgje9v54BAAMCAANtAAM2BA', 'file_unique_id': 'AQADPbkxGzek9VBy', 'file_size': 12301, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4JC9C2FB-7YrlP6eaM79Xh18sAAj25MRs3pPVQlSIlgje9v54BAAMCAAN4AAM2BA', 'file_unique_id': 'AQADPbkxGzek9VB9', 'file_size': 16998, 'width': 360, 'height': 480}]}, {'message_id': 2924, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812005, 'media_group_id': '13974496040910748', 'photo': [{'file_id': 'AgACAgQAAxUHaB4JBkJvQYo7y5reYw_szIyNnfwAAv64MRuZ_vVQUr68aDeFR2MBAAMCAANzAAM2BA', 'file_unique_id': 'AQAD_rgxG5n-9VB4', 'file_size': 1364, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4JBkJvQYo7y5reYw_szIyNnfwAAv64MRuZ_vVQUr68aDeFR2MBAAMCAANtAAM2BA', 'file_unique_id': 'AQAD_rgxG5n-9VBy', 'file_size': 19105, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4JBkJvQYo7y5reYw_szIyNnfwAAv64MRuZ_vVQUr68aDeFR2MBAAMCAAN4AAM2BA', 'file_unique_id': 'AQAD_rgxG5n-9VB9', 'file_size': 25929, 'width': 360, 'height': 480}]}, {'message_id': 2925, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812005, 'media_group_id': '13974496040910748', 'photo': [{'file_id': 'AgACAgQAAxUHaB4JBs-GfXxvCZkpuoEOG1nbRToAAlu5MRsFGvVQcGsXdz4Wp0ABAAMCAANzAAM2BA', 'file_unique_id': 'AQADW7kxGwUa9VB4', 'file_size': 1546, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4JBs-GfXxvCZkpuoEOG1nbRToAAlu5MRsFGvVQcGsXdz4Wp0ABAAMCAANtAAM2BA', 'file_unique_id': 'AQADW7kxGwUa9VBy', 'file_size': 23741, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4JBs-GfXxvCZkpuoEOG1nbRToAAlu5MRsFGvVQcGsXdz4Wp0ABAAMCAAN4AAM2BA', 'file_unique_id': 'AQADW7kxGwUa9VB9', 'file_size': 35199, 'width': 360, 'height': 480}]}]`
2025-05-09 20:33:25,034 - src.notifier - DEBUG - Sent media group (7 photos) for 55362765.
2025-05-09 20:33:25,034 - src.notifier - INFO - Successfully sent notification for apartment 55362765
2025-05-09 20:33:25,035 - __main__ - DEBUG - Notification for 55362765 successful.
2025-05-09 20:34:25,037 - src.state - INFO - Updated sent_listings in memory with batch 1 containing 5 listings. Timestamps are floats.
2025-05-09 20:34:25,037 - __main__ - INFO - Waiting 10 seconds before sending the next batch...
2025-05-09 20:34:35,038 - __main__ - INFO - Sending batch 3 with 2 apartments...
2025-05-09 20:34:35,039 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:34:35,039 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:34:35,056 - src.notifier - INFO - Sending notification for apartment 55362475 to chat -4741762001 (12 images)
2025-05-09 20:34:35,057 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55362475`)\n------\n*Address:*  17 ( ,   )   \n*Price:* 7500\n*Rooms:* 2\n*Floor:* 6\n*Size:* 75 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/a7alkrcf)', media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010700_20250508192952.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010670_20250508192948.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010314_20250508192949.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010293_20250508192949.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010306_20250508192949.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010559_20250508192950.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010549_20250508192953.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010560_20250508192951.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010099_20250508192952.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010628_20250508192953.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 20:34:35,058 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:34:35,140 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105898070>
2025-05-09 20:34:35,141 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10550b580> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:34:35,305 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105893e80>
2025-05-09 20:34:35,305 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:34:35,306 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:34:35,306 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:34:35,306 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:34:35,306 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:34:40,308 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-09 20:34:40,308 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:34:40,309 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:34:40,309 - src.notifier - WARNING - Telegram request timed out for apartment 55362475. Will be retried next run if state saving failed or skipped.
2025-05-09 20:34:40,312 - __main__ - WARNING - Notifier returned False for apartment 55362475.
2025-05-09 20:35:40,313 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:35:40,314 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:35:40,331 - src.notifier - INFO - Sending notification for apartment 55362897 to chat -4741762001 (10 images)
2025-05-09 20:35:40,332 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55362897`)\n------\n*Address:*  ()   \n*Price:* 5000\n*Rooms:* 2\n*Floor:* 0\n*Size:* 35 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/tucgq933)', media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010103_20250508211019.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010605_20250508211019.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010775_20250508211019.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010182_20250508211019.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010450_20250508211019.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010048_20250508211019.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010478_20250508211020.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010682_20250508211020.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010839_20250508211020.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/08/2_6/o/y2_1pa_010868_20250508211020.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-09 20:35:40,333 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:35:40,416 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105898160>
2025-05-09 20:35:40,416 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10550b580> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:35:40,572 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x105537190>
2025-05-09 20:35:40,573 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:35:40,573 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:35:40,574 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:35:40,574 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:35:40,574 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:35:40,747 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 17:35:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'9966'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 20:35:40,747 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMediaGroup "HTTP/1.1 200 OK"
2025-05-09 20:35:40,747 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 20:35:40,748 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 20:35:40,748 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:35:40,748 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:35:40,749 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMediaGroup` finished with return value `[{'message_id': 2936, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812140, 'media_group_id': '13974497126503700', 'photo': [{'file_id': 'AgACAgQAAxUHaB4dzBSe751a1582VHTcWOOUMo4AApS4MRtNCfVQDO7ENzKFqB8BAAMCAANzAAM2BA', 'file_unique_id': 'AQADlLgxG00J9VB4', 'file_size': 1298, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4dzBSe751a1582VHTcWOOUMo4AApS4MRtNCfVQDO7ENzKFqB8BAAMCAANtAAM2BA', 'file_unique_id': 'AQADlLgxG00J9VBy', 'file_size': 17138, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4dzBSe751a1582VHTcWOOUMo4AApS4MRtNCfVQDO7ENzKFqB8BAAMCAAN4AAM2BA', 'file_unique_id': 'AQADlLgxG00J9VB9', 'file_size': 24171, 'width': 360, 'height': 480}], 'caption': 'New Listing Found! (ID: 55362897)\n------\nAddress:  ()   \nPrice: 5000\nRooms: 2\nFloor: 0\nSize: 35 sqm\n------\nLink to Yad2', 'caption_entities': [{'offset': 0, 'length': 18, 'type': 'bold'}, {'offset': 24, 'length': 8, 'type': 'code'}, {'offset': 41, 'length': 8, 'type': 'bold'}, {'offset': 80, 'length': 6, 'type': 'bold'}, {'offset': 92, 'length': 6, 'type': 'bold'}, {'offset': 101, 'length': 6, 'type': 'bold'}, {'offset': 110, 'length': 5, 'type': 'bold'}, {'offset': 130, 'length': 12, 'type': 'text_link', 'url': 'https://www.yad2.co.il/realestate/item/tucgq933'}]}, {'message_id': 2937, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812140, 'media_group_id': '13974497126503700', 'photo': [{'file_id': 'AgACAgQAAxUHaB4dzlR-IkSzk-FYD82O21VRjZ4AAvG4MRtobPRQMP4a272hkxUBAAMCAANzAAM2BA', 'file_unique_id': 'AQAD8bgxG2hs9FB4', 'file_size': 1438, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4dzlR-IkSzk-FYD82O21VRjZ4AAvG4MRtobPRQMP4a272hkxUBAAMCAANtAAM2BA', 'file_unique_id': 'AQAD8bgxG2hs9FBy', 'file_size': 18833, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4dzlR-IkSzk-FYD82O21VRjZ4AAvG4MRtobPRQMP4a272hkxUBAAMCAAN4AAM2BA', 'file_unique_id': 'AQAD8bgxG2hs9FB9', 'file_size': 26813, 'width': 360, 'height': 480}]}, {'message_id': 2938, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812140, 'media_group_id': '13974497126503700', 'photo': [{'file_id': 'AgACAgQAAxUHaB4d0oYsyre2jRe48fJggNO8GOoAAgy5MRuo5vVQhaxD1eZadHwBAAMCAANzAAM2BA', 'file_unique_id': 'AQADDLkxG6jm9VB4', 'file_size': 1782, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4d0oYsyre2jRe48fJggNO8GOoAAgy5MRuo5vVQhaxD1eZadHwBAAMCAANtAAM2BA', 'file_unique_id': 'AQADDLkxG6jm9VBy', 'file_size': 31824, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4d0oYsyre2jRe48fJggNO8GOoAAgy5MRuo5vVQhaxD1eZadHwBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADDLkxG6jm9VB9', 'file_size': 49718, 'width': 360, 'height': 480}]}, {'message_id': 2939, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812140, 'media_group_id': '13974497126503700', 'photo': [{'file_id': 'AgACAgQAAxUHaB4dzYvyyAiiddwQ9ad23ltH3HoAAhq5MRt3dvRQxcdIl4_U-AgBAAMCAANzAAM2BA', 'file_unique_id': 'AQADGrkxG3d29FB4', 'file_size': 1176, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4dzYvyyAiiddwQ9ad23ltH3HoAAhq5MRt3dvRQxcdIl4_U-AgBAAMCAANtAAM2BA', 'file_unique_id': 'AQADGrkxG3d29FBy', 'file_size': 14518, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4dzYvyyAiiddwQ9ad23ltH3HoAAhq5MRt3dvRQxcdIl4_U-AgBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADGrkxG3d29FB9', 'file_size': 20033, 'width': 360, 'height': 480}]}, {'message_id': 2940, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812140, 'media_group_id': '13974497126503700', 'photo': [{'file_id': 'AgACAgQAAxUHaB4dzWJi2zYhjaobEPUeYVL05nIAAj25MRvX-_RQWBQmWRyVseEBAAMCAANzAAM2BA', 'file_unique_id': 'AQADPbkxG9f79FB4', 'file_size': 1248, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4dzWJi2zYhjaobEPUeYVL05nIAAj25MRvX-_RQWBQmWRyVseEBAAMCAANtAAM2BA', 'file_unique_id': 'AQADPbkxG9f79FBy', 'file_size': 15396, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4dzWJi2zYhjaobEPUeYVL05nIAAj25MRvX-_RQWBQmWRyVseEBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADPbkxG9f79FB9', 'file_size': 21645, 'width': 360, 'height': 480}]}, {'message_id': 2941, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812140, 'media_group_id': '13974497126503700', 'photo': [{'file_id': 'AgACAgQAAxUHaB4d0kp3z587wlwXsg4I47oXkZQAAii5MRseCPVQotvzvk_e1NQBAAMCAANzAAM2BA', 'file_unique_id': 'AQADKLkxGx4I9VB4', 'file_size': 1583, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4d0kp3z587wlwXsg4I47oXkZQAAii5MRseCPVQotvzvk_e1NQBAAMCAANtAAM2BA', 'file_unique_id': 'AQADKLkxGx4I9VBy', 'file_size': 25863, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4d0kp3z587wlwXsg4I47oXkZQAAii5MRseCPVQotvzvk_e1NQBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADKLkxGx4I9VB9', 'file_size': 37619, 'width': 360, 'height': 480}]}, {'message_id': 2942, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812140, 'media_group_id': '13974497126503700', 'photo': [{'file_id': 'AgACAgQAAxUHaB4dzS2xtLAi1eyG_zENsRdGMJUAAka5MRvvVfVQ4ayQcO1RLXgBAAMCAANzAAM2BA', 'file_unique_id': 'AQADRrkxG-9V9VB4', 'file_size': 1515, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4dzS2xtLAi1eyG_zENsRdGMJUAAka5MRvvVfVQ4ayQcO1RLXgBAAMCAANtAAM2BA', 'file_unique_id': 'AQADRrkxG-9V9VBy', 'file_size': 27474, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4dzS2xtLAi1eyG_zENsRdGMJUAAka5MRvvVfVQ4ayQcO1RLXgBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADRrkxG-9V9VB9', 'file_size': 43610, 'width': 360, 'height': 480}]}, {'message_id': 2943, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812140, 'media_group_id': '13974497126503700', 'photo': [{'file_id': 'AgACAgQAAxUHaB4d0p6VNz2uk6UlsoPzkFxLQ88AAj65MRuLsvVQ93kFHleYh2sBAAMCAANzAAM2BA', 'file_unique_id': 'AQADPrkxG4uy9VB4', 'file_size': 870, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4d0p6VNz2uk6UlsoPzkFxLQ88AAj65MRuLsvVQ93kFHleYh2sBAAMCAANtAAM2BA', 'file_unique_id': 'AQADPrkxG4uy9VBy', 'file_size': 9530, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4d0p6VNz2uk6UlsoPzkFxLQ88AAj65MRuLsvVQ93kFHleYh2sBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADPrkxG4uy9VB9', 'file_size': 13388, 'width': 360, 'height': 480}]}, {'message_id': 2944, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812140, 'media_group_id': '13974497126503700', 'photo': [{'file_id': 'AgACAgQAAxUHaB4d0gKOxQ_2bs38zvRfu-23HGUAAiy5MRsOa_RQuKFtQVBQPBABAAMCAANzAAM2BA', 'file_unique_id': 'AQADLLkxGw5r9FB4', 'file_size': 1293, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4d0gKOxQ_2bs38zvRfu-23HGUAAiy5MRsOa_RQuKFtQVBQPBABAAMCAANtAAM2BA', 'file_unique_id': 'AQADLLkxGw5r9FBy', 'file_size': 22546, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4d0gKOxQ_2bs38zvRfu-23HGUAAiy5MRsOa_RQuKFtQVBQPBABAAMCAAN4AAM2BA', 'file_unique_id': 'AQADLLkxGw5r9FB9', 'file_size': 34119, 'width': 360, 'height': 480}]}, {'message_id': 2945, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812140, 'media_group_id': '13974497126503700', 'photo': [{'file_id': 'AgACAgQAAxUHaB4d09rmtnUTenmYvjS67kJYHCsAAjS5MRs5UfVQ7a6S8Two4QoBAAMCAANzAAM2BA', 'file_unique_id': 'AQADNLkxGzlR9VB4', 'file_size': 1445, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxUHaB4d09rmtnUTenmYvjS67kJYHCsAAjS5MRs5UfVQ7a6S8Two4QoBAAMCAANtAAM2BA', 'file_unique_id': 'AQADNLkxGzlR9VBy', 'file_size': 24507, 'width': 240, 'height': 320}, {'file_id': 'AgACAgQAAxUHaB4d09rmtnUTenmYvjS67kJYHCsAAjS5MRs5UfVQ7a6S8Two4QoBAAMCAAN4AAM2BA', 'file_unique_id': 'AQADNLkxGzlR9VB9', 'file_size': 37090, 'width': 360, 'height': 480}]}]`
2025-05-09 20:35:40,756 - src.notifier - DEBUG - Sent media group (10 photos) for 55362897.
2025-05-09 20:35:40,756 - src.notifier - INFO - Successfully sent notification for apartment 55362897
2025-05-09 20:35:40,758 - __main__ - DEBUG - Notification for 55362897 successful.
2025-05-09 20:36:40,756 - src.state - INFO - Updated sent_listings in memory with batch 1 containing 2 listings. Timestamps are floats.
2025-05-09 20:36:40,757 - __main__ - INFO - Notification process completed.
2025-05-09 20:37:40,757 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:37:40,758 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-09 20:37:40,775 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Finished* - 7 new apartments sent in this iteration. Total listings tracked: 498', 'parse_mode': 'Markdown'}`
2025-05-09 20:37:40,776 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-09 20:37:40,856 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10551c5e0>
2025-05-09 20:37:40,856 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x105527ba0> server_hostname='api.telegram.org' timeout=5.0
2025-05-09 20:37:41,009 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x1056e1ee0>
2025-05-09 20:37:41,009 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-09 20:37:41,010 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-09 20:37:41,010 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-09 20:37:41,010 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-09 20:37:41,010 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-09 20:37:41,122 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 09 May 2025 17:37:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'535'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-09 20:37:41,123 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-09 20:37:41,123 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-09 20:37:41,123 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-09 20:37:41,124 - httpcore.http11 - DEBUG - response_closed.started
2025-05-09 20:37:41,124 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-09 20:37:41,124 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2946, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746812261, 'text': 'Search Finished - 7 new apartments sent in this iteration. Total listings tracked: 498', 'entities': [{'offset': 0, 'length': 15, 'type': 'bold'}]}`
2025-05-09 20:37:41,125 - src.notifier - INFO - Successfully sent message: *Search Finished* - 7 new apartments sent in this iteration. Total listings tracked: 498
2025-05-09 20:37:41,126 - __main__ - INFO - Notification process completed.
2025-05-09 20:37:41,126 - __main__ - INFO - Notification summary: 7 sent, 5 failed.
2025-05-09 20:37:41,126 - __main__ - INFO - Attempting to save updated state with 498 total sent IDs and timestamps.
2025-05-09 20:37:41,144 - src.state - INFO - Successfully saved state for 498 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json with ISO timestamps.
2025-05-09 20:37:41,145 - __main__ - INFO - Attempting to save state for 498 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-09 20:37:41,147 - src.state - INFO - Successfully saved state for 498 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json with ISO timestamps.
2025-05-09 20:37:41,147 - __main__ - INFO - Apartment check run finished.
2025-05-09 20:37:41,149 - __main__ - INFO - Yad2 Apartment Notifier script finished.
/Users/zeev/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
Traceback (most recent call last):
  File "/Users/zeev/Desktop/code/yad-2-to-telegram/src/main.py", line 23, in <module>
    from repositories import mongo_repository
  File "/Users/zeev/Desktop/code/yad-2-to-telegram/repositories/mongo_repository.py", line 1, in <module>
    from pymongo import MongoClient
ModuleNotFoundError: No module named 'pymongo'
