/Library/Developer/CommandLineTools/usr/bin/python3: can't open file '/Users/zeev/Desktop/code/yad-2-to-telegram/src/main.py': [Errno 1] Operation not permitted
/Library/Developer/CommandLineTools/usr/bin/python3: can't open file '/Users/zeev/Desktop/code/yad-2-to-telegram/src/main.py': [Errno 1] Operation not permitted
/Library/Developer/CommandLineTools/usr/bin/python3: can't open file '/Users/zeev/Desktop/code/yad-2-to-telegram/src/main.py': [Errno 1] Operation not permitted
/Library/Developer/CommandLineTools/usr/bin/python3: can't open file '/Users/zeev/Desktop/code/yad-2-to-telegram/src/main.py': [Errno 1] Operation not permitted
/Users/zeev/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
2025-05-08 19:51:01,461 - __main__ - INFO - Starting Yad2 Apartment Notifier script.
sys.path: ['/Users/zeev/Desktop/code/yad-2-to-telegram', '/Users/zeev/Desktop/code/yad-2-to-telegram/src', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python39.zip', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/lib-dynload', '/Users/zeev/Library/Python/3.9/lib/python/site-packages', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/site-packages']
2025-05-08 19:51:01,461 - asyncio - DEBUG - Using selector: KqueueSelector
2025-05-08 19:51:01,461 - __main__ - INFO - Starting apartment check run...
2025-05-08 19:51:01,461 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:51:01,462 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:51:01,664 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Initiated*', 'parse_mode': 'Markdown'}`
2025-05-08 19:51:01,672 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:51:01,787 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x102c16430>
2025-05-08 19:51:01,804 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x102bceba0> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:51:01,962 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x102c0b220>
2025-05-08 19:51:01,963 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:51:01,964 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:51:01,964 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:51:01,964 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:51:01,964 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:51:02,063 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 08 May 2025 16:51:02 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'465'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-08 19:51:02,064 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-08 19:51:02,064 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-08 19:51:02,064 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-08 19:51:02,064 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:51:02,064 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:51:02,065 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2775, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746723062, 'text': 'Search Initiated', 'entities': [{'offset': 0, 'length': 16, 'type': 'bold'}]}`
2025-05-08 19:51:02,065 - src.notifier - INFO - Successfully sent message: *Search Initiated*
2025-05-08 19:51:02,067 - src.state - INFO - Loaded 471 sent listing states (ID -> timestamp) from /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 19:51:02,067 - __main__ - INFO - Fetching data for bbox 1/12: 32.075192,34.763754,32.086468,34.779760...
2025-05-08 19:51:02,068 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15
2025-05-08 19:51:02,068 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075192,34.763754,32.086468,34.779760', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:02,084 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): gw.yad2.co.il:443
2025-05-08 19:51:02,712 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:02,783 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15.
2025-05-08 19:51:02,783 - src.listing_parser - INFO - Found 132 apartment items in the list. Attempting to parse...
2025-05-08 19:51:02,786 - src.listing_parser - INFO - Successfully parsed 132/132 listings.
2025-05-08 19:51:02,786 - __main__ - INFO - Parsed 132 listings for bbox: 32.075192,34.763754,32.086468,34.779760.
2025-05-08 19:51:02,786 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:06,804 - __main__ - INFO - Fetching data for bbox 2/12: 32.075076,34.771885,32.086353,34.787891...
2025-05-08 19:51:06,805 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15
2025-05-08 19:51:06,805 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075076,34.771885,32.086353,34.787891', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:07,219 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:07,308 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15.
2025-05-08 19:51:07,308 - src.listing_parser - INFO - Found 146 apartment items in the list. Attempting to parse...
2025-05-08 19:51:07,312 - src.listing_parser - INFO - Successfully parsed 146/146 listings.
2025-05-08 19:51:07,312 - __main__ - INFO - Parsed 146 listings for bbox: 32.075076,34.771885,32.086353,34.787891.
2025-05-08 19:51:07,312 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:11,313 - __main__ - INFO - Fetching data for bbox 3/12: 32.076017,34.781501,32.084821,34.793997...
2025-05-08 19:51:11,314 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15
2025-05-08 19:51:11,314 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.076017,34.781501,32.084821,34.793997', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:11,775 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:11,858 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15.
2025-05-08 19:51:11,859 - src.listing_parser - INFO - Found 141 apartment items in the list. Attempting to parse...
2025-05-08 19:51:11,862 - src.listing_parser - INFO - Successfully parsed 141/141 listings.
2025-05-08 19:51:11,862 - __main__ - INFO - Parsed 141 listings for bbox: 32.076017,34.781501,32.084821,34.793997.
2025-05-08 19:51:11,862 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:15,864 - __main__ - INFO - Fetching data for bbox 4/12: 32.080523,34.782766,32.088978,34.794767...
2025-05-08 19:51:15,865 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15
2025-05-08 19:51:15,865 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.080523,34.782766,32.088978,34.794767', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:16,330 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:16,409 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15.
2025-05-08 19:51:16,409 - src.listing_parser - INFO - Found 145 apartment items in the list. Attempting to parse...
2025-05-08 19:51:16,412 - src.listing_parser - INFO - Successfully parsed 145/145 listings.
2025-05-08 19:51:16,412 - __main__ - INFO - Parsed 145 listings for bbox: 32.080523,34.782766,32.088978,34.794767.
2025-05-08 19:51:16,412 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:20,414 - __main__ - INFO - Fetching data for bbox 5/12: 32.068977,34.760081,32.081317,34.777596...
2025-05-08 19:51:20,415 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15
2025-05-08 19:51:20,415 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.068977,34.760081,32.081317,34.777596', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:20,855 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:20,910 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15.
2025-05-08 19:51:20,910 - src.listing_parser - INFO - Found 124 apartment items in the list. Attempting to parse...
2025-05-08 19:51:20,914 - src.listing_parser - INFO - Successfully parsed 124/124 listings.
2025-05-08 19:51:20,914 - __main__ - INFO - Parsed 124 listings for bbox: 32.068977,34.760081,32.081317,34.777596.
2025-05-08 19:51:20,914 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:24,915 - __main__ - INFO - Fetching data for bbox 6/12: 32.067273,34.764900,32.079614,34.782414...
2025-05-08 19:51:24,916 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15
2025-05-08 19:51:24,916 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.067273,34.764900,32.079614,34.782414', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:25,355 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:25,412 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15.
2025-05-08 19:51:25,413 - src.listing_parser - INFO - Found 126 apartment items in the list. Attempting to parse...
2025-05-08 19:51:25,416 - src.listing_parser - INFO - Successfully parsed 126/126 listings.
2025-05-08 19:51:25,416 - __main__ - INFO - Parsed 126 listings for bbox: 32.067273,34.764900,32.079614,34.782414.
2025-05-08 19:51:25,416 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:29,417 - __main__ - INFO - Fetching data for bbox 7/12: 32.065226,34.770869,32.077566,34.788383...
2025-05-08 19:51:29,418 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15
2025-05-08 19:51:29,418 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.065226,34.770869,32.077566,34.788383', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:29,812 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:29,881 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15.
2025-05-08 19:51:29,881 - src.listing_parser - INFO - Found 121 apartment items in the list. Attempting to parse...
2025-05-08 19:51:29,884 - src.listing_parser - INFO - Successfully parsed 121/121 listings.
2025-05-08 19:51:29,884 - __main__ - INFO - Parsed 121 listings for bbox: 32.065226,34.770869,32.077566,34.788383.
2025-05-08 19:51:29,884 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:33,886 - __main__ - INFO - Fetching data for bbox 8/12: 32.064591,34.775937,32.076932,34.793451...
2025-05-08 19:51:33,886 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15
2025-05-08 19:51:33,886 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.064591,34.775937,32.076932,34.793451', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:34,458 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:34,528 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15.
2025-05-08 19:51:34,528 - src.listing_parser - INFO - Found 131 apartment items in the list. Attempting to parse...
2025-05-08 19:51:34,531 - src.listing_parser - INFO - Successfully parsed 131/131 listings.
2025-05-08 19:51:34,531 - __main__ - INFO - Parsed 131 listings for bbox: 32.064591,34.775937,32.076932,34.793451.
2025-05-08 19:51:34,531 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:38,532 - __main__ - INFO - Fetching data for bbox 9/12: 32.060576,34.760166,32.071472,34.775629...
2025-05-08 19:51:38,532 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15
2025-05-08 19:51:38,532 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.060576,34.760166,32.071472,34.775629', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:38,963 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:39,060 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15.
2025-05-08 19:51:39,061 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-08 19:51:39,062 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-08 19:51:39,062 - __main__ - INFO - Parsed 130 listings for bbox: 32.060576,34.760166,32.071472,34.775629.
2025-05-08 19:51:39,062 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:43,064 - __main__ - INFO - Fetching data for bbox 10/12: 32.057632,34.767177,32.068528,34.782639...
2025-05-08 19:51:43,065 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15
2025-05-08 19:51:43,065 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.057632,34.767177,32.068528,34.782639', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:43,468 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:43,552 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15.
2025-05-08 19:51:43,552 - src.listing_parser - INFO - Found 155 apartment items in the list. Attempting to parse...
2025-05-08 19:51:43,556 - src.listing_parser - INFO - Successfully parsed 155/155 listings.
2025-05-08 19:51:43,556 - __main__ - INFO - Parsed 155 listings for bbox: 32.057632,34.767177,32.068528,34.782639.
2025-05-08 19:51:43,556 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:47,557 - __main__ - INFO - Fetching data for bbox 11/12: 32.052334,34.760749,32.063151,34.776098...
2025-05-08 19:51:47,558 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15
2025-05-08 19:51:47,558 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.052334,34.760749,32.063151,34.776098', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:47,975 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:48,047 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15.
2025-05-08 19:51:48,048 - src.listing_parser - INFO - Found 176 apartment items in the list. Attempting to parse...
2025-05-08 19:51:48,051 - src.listing_parser - INFO - Successfully parsed 176/176 listings.
2025-05-08 19:51:48,051 - __main__ - INFO - Parsed 176 listings for bbox: 32.052334,34.760749,32.063151,34.776098.
2025-05-08 19:51:48,051 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:51:52,053 - __main__ - INFO - Fetching data for bbox 12/12: 32.066111,34.765788,32.070878,34.786357...
2025-05-08 19:51:52,054 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15
2025-05-08 19:51:52,054 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.066111,34.765788,32.070878,34.786357', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:51:52,390 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:51:52,465 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15.
2025-05-08 19:51:52,465 - src.listing_parser - INFO - Found 123 apartment items in the list. Attempting to parse...
2025-05-08 19:51:52,468 - src.listing_parser - INFO - Successfully parsed 123/123 listings.
2025-05-08 19:51:52,468 - __main__ - INFO - Parsed 123 listings for bbox: 32.066111,34.765788,32.070878,34.786357.
2025-05-08 19:51:52,468 - __main__ - INFO - Finished fetching. Total listings fetched across all bboxes (before deduplication): 1650
2025-05-08 19:51:52,469 - __main__ - INFO - Total unique apartments found after aggregation and deduplication: 361
Traceback (most recent call last):
  File "/Users/zeev/Desktop/code/yad-2-to-telegram/src/main.py", line 296, in <module>
    asyncio.run(run_check(is_test_mode=args.test))
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/Users/zeev/Desktop/code/yad-2-to-telegram/src/main.py", line 184, in run_check
    new_apartments: List[ApartmentDTO] = state.filter_new_listings(unique_listings, sent_state) # Pass state dict
AttributeError: module 'src.state' has no attribute 'filter_new_listings'
/Users/zeev/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
2025-05-08 19:54:01,051 - __main__ - INFO - Starting Yad2 Apartment Notifier script.
sys.path: ['/Users/zeev/Desktop/code/yad-2-to-telegram', '/Users/zeev/Desktop/code/yad-2-to-telegram/src', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python39.zip', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/lib-dynload', '/Users/zeev/Library/Python/3.9/lib/python/site-packages', '/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/site-packages']
2025-05-08 19:54:01,051 - asyncio - DEBUG - Using selector: KqueueSelector
2025-05-08 19:54:01,051 - __main__ - INFO - Starting apartment check run...
2025-05-08 19:54:01,052 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:54:01,052 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:54:01,114 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Initiated*', 'parse_mode': 'Markdown'}`
2025-05-08 19:54:01,119 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:54:01,217 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10cf38430>
2025-05-08 19:54:01,217 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10ceeea50> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:54:01,373 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10cf2d220>
2025-05-08 19:54:01,374 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:54:01,374 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:54:01,374 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:54:01,374 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:54:01,374 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:54:01,469 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 08 May 2025 16:54:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'465'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-08 19:54:01,470 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMessage "HTTP/1.1 200 OK"
2025-05-08 19:54:01,470 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-08 19:54:01,470 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-08 19:54:01,470 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:54:01,470 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:54:01,470 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 2776, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746723241, 'text': 'Search Initiated', 'entities': [{'offset': 0, 'length': 16, 'type': 'bold'}]}`
2025-05-08 19:54:01,471 - src.notifier - INFO - Successfully sent message: *Search Initiated*
2025-05-08 19:54:01,472 - src.state - INFO - Loaded 471 sent listing states (ID -> timestamp) from /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 19:54:01,472 - __main__ - INFO - Fetching data for bbox 1/12: 32.075192,34.763754,32.086468,34.779760...
2025-05-08 19:54:01,472 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15
2025-05-08 19:54:01,473 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075192,34.763754,32.086468,34.779760', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:01,485 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): gw.yad2.co.il:443
2025-05-08 19:54:02,120 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:02,188 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075192%2C34.763754%2C32.086468%2C34.779760&zoom=15.
2025-05-08 19:54:02,189 - src.listing_parser - INFO - Found 132 apartment items in the list. Attempting to parse...
2025-05-08 19:54:02,190 - src.listing_parser - INFO - Successfully parsed 132/132 listings.
2025-05-08 19:54:02,190 - __main__ - INFO - Parsed 132 listings for bbox: 32.075192,34.763754,32.086468,34.779760.
2025-05-08 19:54:02,190 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:06,192 - __main__ - INFO - Fetching data for bbox 2/12: 32.075076,34.771885,32.086353,34.787891...
2025-05-08 19:54:06,193 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15
2025-05-08 19:54:06,193 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.075076,34.771885,32.086353,34.787891', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:06,627 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:06,696 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.075076%2C34.771885%2C32.086353%2C34.787891&zoom=15.
2025-05-08 19:54:06,697 - src.listing_parser - INFO - Found 146 apartment items in the list. Attempting to parse...
2025-05-08 19:54:06,699 - src.listing_parser - INFO - Successfully parsed 146/146 listings.
2025-05-08 19:54:06,699 - __main__ - INFO - Parsed 146 listings for bbox: 32.075076,34.771885,32.086353,34.787891.
2025-05-08 19:54:06,700 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:10,701 - __main__ - INFO - Fetching data for bbox 3/12: 32.076017,34.781501,32.084821,34.793997...
2025-05-08 19:54:10,702 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15
2025-05-08 19:54:10,702 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.076017,34.781501,32.084821,34.793997', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:11,074 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:11,147 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.076017%2C34.781501%2C32.084821%2C34.793997&zoom=15.
2025-05-08 19:54:11,147 - src.listing_parser - INFO - Found 141 apartment items in the list. Attempting to parse...
2025-05-08 19:54:11,150 - src.listing_parser - INFO - Successfully parsed 141/141 listings.
2025-05-08 19:54:11,150 - __main__ - INFO - Parsed 141 listings for bbox: 32.076017,34.781501,32.084821,34.793997.
2025-05-08 19:54:11,150 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:15,152 - __main__ - INFO - Fetching data for bbox 4/12: 32.080523,34.782766,32.088978,34.794767...
2025-05-08 19:54:15,153 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15
2025-05-08 19:54:15,153 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.080523,34.782766,32.088978,34.794767', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:15,637 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:15,708 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.080523%2C34.782766%2C32.088978%2C34.794767&zoom=15.
2025-05-08 19:54:15,709 - src.listing_parser - INFO - Found 145 apartment items in the list. Attempting to parse...
2025-05-08 19:54:15,712 - src.listing_parser - INFO - Successfully parsed 145/145 listings.
2025-05-08 19:54:15,712 - __main__ - INFO - Parsed 145 listings for bbox: 32.080523,34.782766,32.088978,34.794767.
2025-05-08 19:54:15,712 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:19,713 - __main__ - INFO - Fetching data for bbox 5/12: 32.068977,34.760081,32.081317,34.777596...
2025-05-08 19:54:19,714 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15
2025-05-08 19:54:19,714 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.068977,34.760081,32.081317,34.777596', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:20,143 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:20,214 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.068977%2C34.760081%2C32.081317%2C34.777596&zoom=15.
2025-05-08 19:54:20,214 - src.listing_parser - INFO - Found 124 apartment items in the list. Attempting to parse...
2025-05-08 19:54:20,217 - src.listing_parser - INFO - Successfully parsed 124/124 listings.
2025-05-08 19:54:20,217 - __main__ - INFO - Parsed 124 listings for bbox: 32.068977,34.760081,32.081317,34.777596.
2025-05-08 19:54:20,217 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:24,218 - __main__ - INFO - Fetching data for bbox 6/12: 32.067273,34.764900,32.079614,34.782414...
2025-05-08 19:54:24,219 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15
2025-05-08 19:54:24,220 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.067273,34.764900,32.079614,34.782414', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:24,649 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:24,717 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.067273%2C34.764900%2C32.079614%2C34.782414&zoom=15.
2025-05-08 19:54:24,718 - src.listing_parser - INFO - Found 126 apartment items in the list. Attempting to parse...
2025-05-08 19:54:24,720 - src.listing_parser - INFO - Successfully parsed 126/126 listings.
2025-05-08 19:54:24,720 - __main__ - INFO - Parsed 126 listings for bbox: 32.067273,34.764900,32.079614,34.782414.
2025-05-08 19:54:24,720 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:28,722 - __main__ - INFO - Fetching data for bbox 7/12: 32.065226,34.770869,32.077566,34.788383...
2025-05-08 19:54:28,723 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15
2025-05-08 19:54:28,723 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.065226,34.770869,32.077566,34.788383', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:29,063 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:29,132 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.065226%2C34.770869%2C32.077566%2C34.788383&zoom=15.
2025-05-08 19:54:29,133 - src.listing_parser - INFO - Found 121 apartment items in the list. Attempting to parse...
2025-05-08 19:54:29,135 - src.listing_parser - INFO - Successfully parsed 121/121 listings.
2025-05-08 19:54:29,135 - __main__ - INFO - Parsed 121 listings for bbox: 32.065226,34.770869,32.077566,34.788383.
2025-05-08 19:54:29,135 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:33,136 - __main__ - INFO - Fetching data for bbox 8/12: 32.064591,34.775937,32.076932,34.793451...
2025-05-08 19:54:33,136 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15
2025-05-08 19:54:33,136 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.064591,34.775937,32.076932,34.793451', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:33,557 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:33,624 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.064591%2C34.775937%2C32.076932%2C34.793451&zoom=15.
2025-05-08 19:54:33,625 - src.listing_parser - INFO - Found 131 apartment items in the list. Attempting to parse...
2025-05-08 19:54:33,626 - src.listing_parser - INFO - Successfully parsed 131/131 listings.
2025-05-08 19:54:33,626 - __main__ - INFO - Parsed 131 listings for bbox: 32.064591,34.775937,32.076932,34.793451.
2025-05-08 19:54:33,626 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:37,628 - __main__ - INFO - Fetching data for bbox 9/12: 32.060576,34.760166,32.071472,34.775629...
2025-05-08 19:54:37,628 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15
2025-05-08 19:54:37,628 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.060576,34.760166,32.071472,34.775629', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:38,063 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:38,142 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.060576%2C34.760166%2C32.071472%2C34.775629&zoom=15.
2025-05-08 19:54:38,143 - src.listing_parser - INFO - Found 130 apartment items in the list. Attempting to parse...
2025-05-08 19:54:38,145 - src.listing_parser - INFO - Successfully parsed 130/130 listings.
2025-05-08 19:54:38,145 - __main__ - INFO - Parsed 130 listings for bbox: 32.060576,34.760166,32.071472,34.775629.
2025-05-08 19:54:38,145 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:42,146 - __main__ - INFO - Fetching data for bbox 10/12: 32.057632,34.767177,32.068528,34.782639...
2025-05-08 19:54:42,147 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15
2025-05-08 19:54:42,147 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.057632,34.767177,32.068528,34.782639', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:42,671 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:42,743 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.057632%2C34.767177%2C32.068528%2C34.782639&zoom=15.
2025-05-08 19:54:42,744 - src.listing_parser - INFO - Found 155 apartment items in the list. Attempting to parse...
2025-05-08 19:54:42,746 - src.listing_parser - INFO - Successfully parsed 155/155 listings.
2025-05-08 19:54:42,747 - __main__ - INFO - Parsed 155 listings for bbox: 32.057632,34.767177,32.068528,34.782639.
2025-05-08 19:54:42,747 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:46,747 - __main__ - INFO - Fetching data for bbox 11/12: 32.052334,34.760749,32.063151,34.776098...
2025-05-08 19:54:46,748 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15
2025-05-08 19:54:46,748 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.052334,34.760749,32.063151,34.776098', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:47,245 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:47,251 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.052334%2C34.760749%2C32.063151%2C34.776098&zoom=15.
2025-05-08 19:54:47,252 - src.listing_parser - INFO - Found 176 apartment items in the list. Attempting to parse...
2025-05-08 19:54:47,255 - src.listing_parser - INFO - Successfully parsed 176/176 listings.
2025-05-08 19:54:47,255 - __main__ - INFO - Parsed 176 listings for bbox: 32.052334,34.760749,32.063151,34.776098.
2025-05-08 19:54:47,255 - __main__ - DEBUG - Waiting 4 seconds before next fetch...
2025-05-08 19:54:51,257 - __main__ - INFO - Fetching data for bbox 12/12: 32.066111,34.765788,32.070878,34.786357...
2025-05-08 19:54:51,258 - src.fetcher - INFO - Attempting to fetch data (Attempt 1/3) from: https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15
2025-05-08 19:54:51,258 - src.fetcher - DEBUG - Making request to base_url: https://gw.yad2.co.il/realestate-feed/rent/map with params: {'multiNeighborhood': '1461,1520', 'minPrice': 4000, 'maxPrice': 8000, 'minRooms': 2, 'maxRooms': 4, 'property': '1,3,6,7,25,49,51,11,31,43,4', 'bBox': '32.066111,34.765788,32.070878,34.786357', 'zoom': 15} and merged headers: {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36', 'Accept-Encoding': 'gzip, deflate', 'Accept': 'application/json, text/plain, */*', 'Connection': 'keep-alive', 'Accept-Language': 'en-US,en;q=0.9', 'Origin': 'https://www.yad2.co.il', 'Referer': 'https://www.yad2.co.il/', 'Sec-Fetch-Dest': 'empty', 'Sec-Fetch-Mode': 'cors', 'Sec-Fetch-Site': 'same-site', 'sec-ch-ua': '"Google Chrome";v="135", "Not-A.Brand";v="8", "Chromium";v="135"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"'}
2025-05-08 19:54:51,682 - urllib3.connectionpool - DEBUG - https://gw.yad2.co.il:443 "GET /realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15 HTTP/1.1" 200 None
2025-05-08 19:54:51,753 - src.fetcher - INFO - Successfully fetched and parsed JSON data from https://gw.yad2.co.il/realestate-feed/rent/map?multiNeighborhood=1461%2C1520&minPrice=4000&maxPrice=8000&minRooms=2&maxRooms=4&property=1%2C3%2C6%2C7%2C25%2C49%2C51%2C11%2C31%2C43%2C4&bBox=32.066111%2C34.765788%2C32.070878%2C34.786357&zoom=15.
2025-05-08 19:54:51,754 - src.listing_parser - INFO - Found 123 apartment items in the list. Attempting to parse...
2025-05-08 19:54:51,756 - src.listing_parser - INFO - Successfully parsed 123/123 listings.
2025-05-08 19:54:51,756 - __main__ - INFO - Parsed 123 listings for bbox: 32.066111,34.765788,32.070878,34.786357.
2025-05-08 19:54:51,756 - __main__ - INFO - Finished fetching. Total listings fetched across all bboxes (before deduplication): 1650
2025-05-08 19:54:51,757 - __main__ - INFO - Total unique apartments found after aggregation and deduplication: 363
2025-05-08 19:54:51,757 - __main__ - INFO - Found 10 new apartments potentially matching criteria.
2025-05-08 19:54:51,757 - __main__ - INFO - Attempting to notify for 10 apartments.
2025-05-08 19:54:51,757 - __main__ - INFO - Starting the notification process...
2025-05-08 19:54:51,757 - __main__ - INFO - Sending batch 1 with 5 apartments...
2025-05-08 19:54:51,757 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:54:51,757 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:54:51,772 - src.notifier - INFO - Sending notification for apartment 55246023 to chat -4741762001 (8 images)
2025-05-08 19:54:51,773 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55246023`)\n------\n*Address:*  20 ( )   \n*Price:* 6200\n*Rooms:* 3\n*Floor:* 2\n*Size:* 66 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/2stb8gq5)', media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010657_20250410152033.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010971_20250410152036.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010547_20250410152043.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010318_20250410152033.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010056_20250410152036.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010304_20250410152048.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010116_20250410152045.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010140_20250410152038.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:54:51,774 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:54:51,855 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b070>
2025-05-08 19:54:51,855 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76c10> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:54:52,015 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d210dc0>
2025-05-08 19:54:52,016 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:54:52,016 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:54:52,016 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:54:52,017 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:54:52,017 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:54:57,019 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:54:57,019 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:54:57,020 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:54:57,020 - src.notifier - WARNING - Telegram request timed out for apartment 55246023. Will be retried next run if state saving failed or skipped.
2025-05-08 19:54:57,023 - __main__ - WARNING - Notifier returned False for apartment 55246023.
2025-05-08 19:54:57,023 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:54:57,023 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:54:57,038 - src.notifier - INFO - Sending notification for apartment 55245944 to chat -4741762001 (9 images)
2025-05-08 19:54:57,039 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55245944`)\n------\n*Address:*  20 ( )   \n*Price:* 6200\n*Rooms:* 3\n*Floor:* 1\n*Size:* 70 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/79iulmqm)', media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010300_20250410150111.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010134_20250410150056.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010548_20250410150247.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010796_20250410150051.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010329_20250410150056.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010583_20250410150057.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010567_20250410150246.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010600_20250410150052.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/10/2_6/o/y2_1pa_010303_20250410150055.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:54:57,040 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:54:57,126 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b220>
2025-05-08 19:54:57,127 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76f20> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:54:57,292 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d210d30>
2025-05-08 19:54:57,293 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:54:57,293 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:54:57,293 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:54:57,294 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:54:57,294 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:02,295 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:55:02,296 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:02,296 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:02,297 - src.notifier - WARNING - Telegram request timed out for apartment 55245944. Will be retried next run if state saving failed or skipped.
2025-05-08 19:55:02,300 - __main__ - WARNING - Notifier returned False for apartment 55245944.
2025-05-08 19:55:02,300 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:02,300 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:02,316 - src.notifier - INFO - Sending notification for apartment 54195140 to chat -4741762001 (8 images)
2025-05-08 19:55:02,317 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `54195140`)\n------\n*Address:*  ()   \n*Price:* 7700\n*Rooms:* 2\n*Floor:* 5\n*Size:* 65 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/43fjqfbm)', media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010187_20240806131050.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010452_20240806131056.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010467_20240806131102.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010912_20240806131107.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010811_20240806131112.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010058_20240806131116.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010950_20240806131120.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/06/2_6/o/y2_1pa_010896_20240806131132.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:55:02,317 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:55:02,399 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b5e0>
2025-05-08 19:55:02,399 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76c10> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:55:02,555 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d210f70>
2025-05-08 19:55:02,558 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:55:02,559 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:55:02,576 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:55:02,577 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:55:02,577 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:07,579 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:55:07,579 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:07,580 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:07,580 - src.notifier - WARNING - Telegram request timed out for apartment 54195140. Will be retried next run if state saving failed or skipped.
2025-05-08 19:55:07,583 - __main__ - WARNING - Notifier returned False for apartment 54195140.
2025-05-08 19:55:07,583 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:07,583 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:07,598 - src.notifier - INFO - Sending notification for apartment 55289897 to chat -4741762001 (5 images)
2025-05-08 19:55:07,599 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55289897`)\n------\n*Address:*  17   \n*Price:* 7000\n*Rooms:* 2\n*Floor:* 1\n*Size:* 64 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/e9107wm1)', media='https://img.yad2.co.il/Pic/202504/22/2_6/o/y2_1pa_010089_20250422180005.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/22/2_6/o/y2_1pa_010998_20250422180028.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/22/2_6/o/y2_1pa_010154_20250422180029.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/22/2_6/o/y2_1pa_010735_20250422180029.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/22/2_6/o/y2_1pa_010343_20250422180237.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:55:07,600 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:55:07,683 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b190>
2025-05-08 19:55:07,683 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76f20> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:55:07,853 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d210d60>
2025-05-08 19:55:07,853 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:55:07,854 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:55:07,854 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:55:07,854 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:55:07,855 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:12,856 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:55:12,856 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:12,857 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:12,858 - src.notifier - WARNING - Telegram request timed out for apartment 55289897. Will be retried next run if state saving failed or skipped.
2025-05-08 19:55:12,861 - __main__ - WARNING - Notifier returned False for apartment 55289897.
2025-05-08 19:55:12,861 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:12,861 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:12,876 - src.notifier - INFO - Sending notification for apartment 54206030 to chat -4741762001 (9 images)
2025-05-08 19:55:12,877 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `54206030`)\n------\n*Address:*  18 ( )   \n*Price:* 5500\n*Rooms:* 2\n*Floor:* 3\n*Size:* 55 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/weqyyl0n)', media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_1_XGFXBldCGT_20250304.jpg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_2_e9Mq9SSJFM_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_3_wnQAUpHbiy_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_4_qeF9s7SDaw_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_5_5tAnafE1wd_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_6_NSCxmIEZdH_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_7_2W8z5w285o_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_8_CS_lyEMpeC_20250304.jpg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/04/2_6/o/y2_9_qx65eqMAcs_20250304.jpg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:55:12,878 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:55:12,964 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b2e0>
2025-05-08 19:55:12,964 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76c10> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:55:13,128 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d210b50>
2025-05-08 19:55:13,129 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:55:13,129 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:55:13,130 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:55:13,130 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:55:13,130 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:18,132 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:55:18,132 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:18,133 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:18,133 - src.notifier - WARNING - Telegram request timed out for apartment 54206030. Will be retried next run if state saving failed or skipped.
2025-05-08 19:55:18,136 - __main__ - WARNING - Notifier returned False for apartment 54206030.
2025-05-08 19:55:18,139 - src.state - INFO - Updated sent listings with batch 1 containing 5 listings.
2025-05-08 19:55:18,139 - __main__ - INFO - Waiting 10 seconds before sending the next batch...
2025-05-08 19:55:28,140 - __main__ - INFO - Sending batch 2 with 5 apartments...
2025-05-08 19:55:28,141 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:28,141 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:28,157 - src.notifier - INFO - Sending notification for apartment 54278482 to chat -4741762001 (6 images)
2025-05-08 19:55:28,158 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `54278482`)\n------\n*Address:*    ()   \n*Price:* 6900\n*Rooms:* 2\n*Floor:* 2\n*Size:* 58 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/a36d99ys)', media='https://img.yad2.co.il/Pic/202408/25/2_6/o/y2_1pa_010075_20240825171340.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/25/2_6/o/y2_1pa_010783_20240825171340.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/25/2_6/o/y2_1pa_010932_20240825171340.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/25/2_6/o/y2_1pa_010305_20240825171339.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/25/2_6/o/y2_1pa_010245_20240825171340.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202408/25/2_6/o/y2_1pa_010252_20240825171340.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:55:28,159 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:55:28,250 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b7f0>
2025-05-08 19:55:28,250 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76f20> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:55:28,413 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10cf2d190>
2025-05-08 19:55:28,414 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:55:28,415 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:55:28,415 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:55:28,415 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:55:28,415 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:33,417 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:55:33,417 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:33,418 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:33,418 - src.notifier - WARNING - Telegram request timed out for apartment 54278482. Will be retried next run if state saving failed or skipped.
2025-05-08 19:55:33,421 - __main__ - WARNING - Notifier returned False for apartment 54278482.
2025-05-08 19:55:33,421 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:33,421 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:33,436 - src.notifier - INFO - Sending notification for apartment 55356058 to chat -4741762001 (9 images)
2025-05-08 19:55:33,437 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55356058`)\n------\n*Address:*   46   \n*Price:* 6500\n*Rooms:* 2\n*Floor:* 6\n*Size:* 49 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/x99grbvy)', media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010590_20250507170159.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010363_20250507170129.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010895_20250507170200.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010804_20250507170159.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010527_20250507170200.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010142_20250507170159.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010214_20250507170200.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010387_20250507170302.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202505/07/2_6/o/y2_1pa_010446_20250507170303.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:55:33,438 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:55:33,524 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18b7c0>
2025-05-08 19:55:33,524 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76c10> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:55:33,689 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d200820>
2025-05-08 19:55:33,690 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:55:33,690 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:55:33,690 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:55:33,691 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:55:33,691 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:38,693 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:55:38,693 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:38,694 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:38,694 - src.notifier - WARNING - Telegram request timed out for apartment 55356058. Will be retried next run if state saving failed or skipped.
2025-05-08 19:55:38,697 - __main__ - WARNING - Notifier returned False for apartment 55356058.
2025-05-08 19:55:38,697 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:38,697 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:55:38,712 - src.notifier - INFO - Sending notification for apartment 55149816 to chat -4741762001 (2 images)
2025-05-08 19:55:38,713 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55149816`)\n------\n*Address:*    \n*Price:* 7000\n*Rooms:* 2\n*Floor:* 4\n*Size:* 63 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/f7pfzb72)', media='https://img.yad2.co.il/Pic/202503/19/2_6/o/y2_1_zD28T7uRv2_20250319.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202503/19/2_6/o/y2_2_5WE2JV4YHv_20250319.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:55:38,713 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:55:38,795 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18bd30>
2025-05-08 19:55:38,795 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cf76f20> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:55:38,958 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d18bf10>
2025-05-08 19:55:38,958 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:55:38,959 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:55:38,959 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:55:38,959 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:55:38,960 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:55:39,047 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 429, b'Too Many Requests', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 08 May 2025 16:55:39 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'111'), (b'Connection', b'keep-alive'), (b'Retry-After', b'34'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-08 19:55:39,048 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendMediaGroup "HTTP/1.1 429 Too Many Requests"
2025-05-08 19:55:39,048 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-08 19:55:39,048 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-08 19:55:39,048 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:55:39,049 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:55:39,049 - src.notifier - WARNING - Telegram Flood control exceeded for 55149816. Need to retry after 34 seconds.
2025-05-08 19:55:39,049 - __main__ - WARNING - Rate limit hit for 55149816. Waiting 35 seconds before retrying...
2025-05-08 19:56:14,057 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:56:14,057 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:56:14,073 - src.notifier - INFO - Sending notification for apartment 55110599 to chat -4741762001 (1 images)
2025-05-08 19:56:14,073 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendPhoto` with parameters `{'chat_id': '-4741762001', 'photo': 'https://img.yad2.co.il/Pic/202503/10/2_6/o/y2_1pa_010253_20250310114724.jpeg', 'caption': '*New Listing Found!* (ID: `55110599`)\n------\n*Address:*   10 ( ,   )   \n*Price:* 7500\n*Rooms:* 2\n*Floor:* 3\n*Size:* 62 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/243q1v07)', 'parse_mode': 'Markdown'}`
2025-05-08 19:56:14,074 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:56:14,153 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d394a90>
2025-05-08 19:56:14,153 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cff4a50> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:56:14,307 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d2101c0>
2025-05-08 19:56:14,308 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:56:14,308 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:56:14,308 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:56:14,309 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:56:14,309 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:56:14,412 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Thu, 08 May 2025 16:56:14 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1708'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-05-08 19:56:14,413 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA/sendPhoto "HTTP/1.1 200 OK"
2025-05-08 19:56:14,413 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-05-08 19:56:14,413 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-05-08 19:56:14,414 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:56:14,414 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:56:14,414 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendPhoto` finished with return value `{'message_id': 2804, 'from': {'id': 7684767205, 'is_bot': True, 'first_name': 'Aptfinderfortaliandzeev', 'username': 'Apt_finder_TZ_bot'}, 'chat': {'id': -4741762001, 'title': 'Apt search', 'type': 'group', 'all_members_are_administrators': True, 'accepted_gift_types': {'unlimited_gifts': False, 'limited_gifts': False, 'unique_gifts': False, 'premium_subscription': False}}, 'date': 1746723374, 'photo': [{'file_id': 'AgACAgQAAxkDAAIK9Ggc4i4e5f_eJC0hWdOWlGfIdUhKAAJEtzEb33zFUqzugIx28v-tAQADAgADcwADNgQ', 'file_unique_id': 'AQADRLcxG998xVJ4', 'file_size': 1569, 'width': 67, 'height': 90}, {'file_id': 'AgACAgQAAxkDAAIK9Ggc4i4e5f_eJC0hWdOWlGfIdUhKAAJEtzEb33zFUqzugIx28v-tAQADAgADbQADNgQ', 'file_unique_id': 'AQADRLcxG998xVJy', 'file_size': 22240, 'width': 238, 'height': 320}, {'file_id': 'AgACAgQAAxkDAAIK9Ggc4i4e5f_eJC0hWdOWlGfIdUhKAAJEtzEb33zFUqzugIx28v-tAQADAgADeAADNgQ', 'file_unique_id': 'AQADRLcxG998xVJ9', 'file_size': 32396, 'width': 357, 'height': 480}], 'caption': 'New Listing Found! (ID: 55110599)\n------\nAddress:   10 ( ,   )   \nPrice: 7500\nRooms: 2\nFloor: 3\nSize: 62 sqm\n------\nLink to Yad2', 'caption_entities': [{'offset': 0, 'length': 18, 'type': 'bold'}, {'offset': 24, 'length': 8, 'type': 'code'}, {'offset': 41, 'length': 8, 'type': 'bold'}, {'offset': 105, 'length': 6, 'type': 'bold'}, {'offset': 117, 'length': 6, 'type': 'bold'}, {'offset': 126, 'length': 6, 'type': 'bold'}, {'offset': 135, 'length': 5, 'type': 'bold'}, {'offset': 155, 'length': 12, 'type': 'text_link', 'url': 'https://www.yad2.co.il/realestate/item/243q1v07'}]}`
2025-05-08 19:56:14,415 - src.notifier - DEBUG - Sent single photo message for 55110599.
2025-05-08 19:56:14,415 - src.notifier - INFO - Successfully sent notification for apartment 55110599
2025-05-08 19:56:14,416 - __main__ - DEBUG - Notification for 55110599 successful.
2025-05-08 19:56:14,417 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:56:14,417 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:56:14,432 - src.notifier - INFO - Sending notification for apartment 55247900 to chat -4741762001 (12 images)
2025-05-08 19:56:14,433 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMediaGroup` with parameters `{'chat_id': '-4741762001', 'media': [InputMediaPhoto(caption='*New Listing Found!* (ID: `55247900`)\n------\n*Address:*   46 ( ,   )   \n*Price:* 7500\n*Rooms:* 2\n*Floor:* 7\n*Size:* 49 sqm\n------\n[Link to Yad2](https://www.yad2.co.il/realestate/item/e6lvj3k5)', media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010885_20250411095919.jpeg', parse_mode='Markdown', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010343_20250411100059.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010034_20250411095945.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010619_20250411095944.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010487_20250411095952.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010588_20250411095953.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010351_20250411095953.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010792_20250411095953.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010124_20250411100004.jpeg', type=<InputMediaType.PHOTO>), InputMediaPhoto(media='https://img.yad2.co.il/Pic/202504/11/2_6/o/y2_1pa_010956_20250411100003.jpeg', type=<InputMediaType.PHOTO>)]}`
2025-05-08 19:56:14,434 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:56:14,515 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d395220>
2025-05-08 19:56:14,515 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cff4580> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:56:14,668 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d3926a0>
2025-05-08 19:56:14,669 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:56:14,670 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:56:14,670 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:56:14,670 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:56:14,670 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:56:19,672 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:56:19,672 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:56:19,673 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:56:19,674 - src.notifier - WARNING - Telegram request timed out for apartment 55247900. Will be retried next run if state saving failed or skipped.
2025-05-08 19:56:19,676 - __main__ - WARNING - Notifier returned False for apartment 55247900.
2025-05-08 19:56:19,679 - src.state - INFO - Updated sent listings with batch 1 containing 5 listings.
2025-05-08 19:56:19,679 - __main__ - INFO - Notification process completed.
2025-05-08 19:56:19,679 - telegram.Bot - DEBUG - Set Bot API URL: https://api.telegram.org/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:56:19,679 - telegram.Bot - DEBUG - Set Bot API File URL: https://api.telegram.org/file/bot7684767205:AAE3HVDNwO62Y0fAo-u5bdYPq0gt6L3_awA
2025-05-08 19:56:19,694 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': '-4741762001', 'text': '*Search Finished* - Current amount saw is 481', 'parse_mode': 'Markdown'}`
2025-05-08 19:56:19,695 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-08 19:56:19,775 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d395130>
2025-05-08 19:56:19,775 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10cff4580> server_hostname='api.telegram.org' timeout=5.0
2025-05-08 19:56:19,932 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x10d394d30>
2025-05-08 19:56:19,933 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-05-08 19:56:19,934 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-05-08 19:56:19,934 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-05-08 19:56:19,934 - httpcore.http11 - DEBUG - send_request_body.complete
2025-05-08 19:56:19,934 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-05-08 19:56:24,936 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=ReadTimeout(TimeoutError())
2025-05-08 19:56:24,937 - httpcore.http11 - DEBUG - response_closed.started
2025-05-08 19:56:24,938 - httpcore.http11 - DEBUG - response_closed.complete
2025-05-08 19:56:24,938 - src.notifier - ERROR - Failed to send message: *Search Finished* - Current amount saw is 481. Error: Timed out
Traceback (most recent call last):
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/http11.py", line 136, in handle_async_request
    raise exc
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_async/http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_backends/anyio.py", line 37, in read
    return b""
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_httpxrequest.py", line 277, in do_request
    res = await self._client.request(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    self.gen.throw(type, value, traceback)
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/zeev/Desktop/code/yad-2-to-telegram/src/notifier.py", line 156, in send_telegram_message
    await bot.send_message(chat_id=chat_id, text=message, parse_mode="Markdown")
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 1091, in send_message
    return await self._send_message(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 803, in _send_message
    result = await self._post(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 691, in _post
    return await self._do_post(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/_bot.py", line 720, in _do_post
    result = await request.post(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/Users/zeev/Library/Python/3.9/lib/python/site-packages/telegram/request/_httpxrequest.py", line 294, in do_request
    raise TimedOut from err
telegram.error.TimedOut: Timed out
2025-05-08 19:56:24,989 - __main__ - INFO - Notification process completed.
2025-05-08 19:56:24,989 - __main__ - INFO - Notification summary: 1 sent, 8 failed.
2025-05-08 19:56:24,989 - __main__ - INFO - Attempting to save updated state with 481 total sent IDs and timestamps.
2025-05-08 19:56:24,991 - src.state - INFO - Successfully saved state for 481 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 19:56:24,991 - __main__ - INFO - Attempting to save state for 481 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 19:56:24,992 - src.state - INFO - Successfully saved state for 481 listings to /Users/zeev/Desktop/code/yad-2-to-telegram/src/../sent_listings.json
2025-05-08 19:56:24,993 - __main__ - INFO - Apartment check run finished.
2025-05-08 19:56:24,994 - __main__ - INFO - Yad2 Apartment Notifier script finished.
